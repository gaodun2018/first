webpackJsonp([17],{WM04:function(e,t){},l3hi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("BO1k"),r=n.n(a),s=n("Xxa5"),i=n.n(s),c=n("exGp"),o=n.n(c),l=n("yt7g"),u={components:{},data:function(){return{radio:"全部",radio2:"全部",input2:"",keywords:"",resource:{resources:[],pagination:{total:0,current_page:1}},clver:"0",clversm:"0",tags:[],currentPage:1,paginationTotal:0,pageSize:50,loading:!1}},methods:{outlinechange:function(e){this.clver=e,this.clversm="0",this.loadResources()},mulchange:function(e){this.clversm=e,this.loadResources()},onRemove:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.removeLecturenote(e.id).then(function(e){0==e.status?(t.$message({type:"success",message:"删除成功"}),t.loadResources()):t.$message({type:"warning",message:"删除失败"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},didClickEdit:function(e){console.log("navigate to edit video "+e.row.id),this.$router.push({name:"editVideo",params:{id:e.row.id}})},fetchResources:function(){var e=this;return o()(i.a.mark(function t(){var n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={page_size:e.pageSize,page:e.currentPage,discriminator:"video",keywords:e.keywords},"0"!=e.clver&&(n.tag_id=e.clver),"0"!=e.clversm&&(n.tag_id=e.clversm),t.next=5,e.$http.getResource(n);case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}},t,e)}))()},loadResources:function(){var e=this;return o()(i.a.mark(function t(){var n,a,s,c,o,u,d,p,v;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.fetchResources();case 3:for(n=t.sent,a=n.result,s=!0,c=!1,o=void 0,t.prev=8,u=r()(a.resources);!(s=(d=u.next()).done);s=!0)(p=d.value).created_at=new Date(1e3*p.created_at),p.updated_at=Object(l.f)(new Date(1e3*p.updated_at)),p.project_name=null==p.tag?"":p.tag.name;t.next=16;break;case 12:t.prev=12,t.t0=t.catch(8),c=!0,o=t.t0;case 16:t.prev=16,t.prev=17,!s&&u.return&&u.return();case 19:if(t.prev=19,!c){t.next=22;break}throw o;case 22:return t.finish(19);case 23:return t.finish(16);case 24:e.resource=a,v=e.resource.pagination.total,e.paginationTotal=v,e.loading=!1;case 28:case"end":return t.stop()}},t,e,[[8,12,16,24],[17,,19,23]])}))()},didChangePage:function(e){var t=this;return o()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.currentPage=e,t.loadResources();case 2:case"end":return n.stop()}},n,t)}))()},didChangePageSize:function(e){this.pageSize=e,this.loadResources()},handleIconClick:function(){this.clver="0",this.clversm="0",this.loadResources()}},created:function(){var e=this;return o()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getTags("project");case 2:return e.tags=t.sent.result,t.next=5,e.loadResources();case 5:case"end":return t.stop()}},t,e)}))()}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"module-clues-content order-manage"},[n("div",{staticClass:"search_tools",staticStyle:{overflow:"hidden","margin-bottom":"22px"}},[n("el-row",[n("el-col",{attrs:{sm:24}},[n("div",{staticClass:"button_group_t"},[n("span",[e._v(" 项 目:")]),e._v(" "),n("span",{staticClass:"clitem",class:["0"===e.clver||0===e.clver?"current":""],on:{click:function(t){e.outlinechange("0")}}},[e._v("全部")]),e._v(" "),e._l(e.tags,function(t,a){return n("span",{key:a,staticClass:"clitem",class:[t.id===e.clver?"current":""],on:{click:function(n){e.outlinechange(t.id)}}},[e._v(e._s(t.name)+"\n                    ")])})],2),e._v(" "),n("div",{staticClass:"button_group_b"},[n("span",[e._v(" 科 目:")]),e._v(" "),n("span",{staticClass:"clitem",class:["0"===e.clversm||0===e.clversm?"current":""],on:{click:function(t){e.mulchange("0")}}},[e._v("全部")]),e._v(" "),e._l(e.tags,function(t){return"0"!=e.clver?[e._l(t.children,function(a){return parseInt(e.clver)==t.id?[n("span",{key:a.id,staticClass:"clitem",class:[a.id===e.clversm?"current":""],on:{click:function(t){e.mulchange(a.id)}}},[e._v(e._s(a.name))])]:e._e()})]:e._e()})],2)])],1),e._v(" "),n("el-row",{attrs:{type:"flex",align:"bottom"}},[n("el-col",{attrs:{sm:12}},[n("el-row",[n("div",{staticClass:"select-search"})])],1),e._v(" "),n("el-col",{attrs:{sm:12}},[n("el-row",{attrs:{type:"flex",justify:"end"}},[n("div",{staticClass:"input-search"},[n("el-input",{attrs:{placeholder:"课程ID／课程名称",size:"small",icon:"search","on-icon-click":e.handleIconClick},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleIconClick(t):null}},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),e._v(" "),e.unlocking("VIDEO_CREATE")?n("router-link",{staticClass:"routerBtn",attrs:{to:"/resource/video/create"}},[e._v("新增视频\n                        ")]):e._e()],1)])],1)],1)],1),e._v(" "),n("div",{staticClass:"edu_table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"","row-class-name":e.tableRowClassName,data:e.resource.resources},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{prop:"id",label:"视频id","min-width":"100",fixed:""}}),e._v(" "),n("el-table-column",{attrs:{prop:"title",label:"视频名称","min-width":"200"}}),e._v(" "),n("el-table-column",{attrs:{label:"时长","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                    "+e._s(t.row.duration_minutes>10?t.row.duration_minutes:"0"+t.row.duration_minutes)+"分\n                    "+e._s(t.row.duration_seconds>10?t.row.duration_seconds:"0"+t.row.duration_seconds)+"秒\n                ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"project_name",label:"项目","min-width":"115"}}),e._v(" "),n("el-table-column",{attrs:{prop:"updated_at",label:"更新时间","min-width":"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"creator.username",label:"操作员","min-width":"150"}}),e._v(" "),n("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center","min-width":"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.unlocking("VIDEO_EDIT")?n("el-button",{attrs:{type:"text"},on:{click:function(n){e.didClickEdit(t)}}},[e._v("修改\n                    ")]):e._e(),e._v(" "),e.unlocking("VIDEO_DELETE")?n("el-button",{attrs:{type:"text"},on:{click:function(n){e.onRemove(t.row)}}},[e._v("删除\n                    ")]):e._e()]}}])})],1)],1),e._v(" "),n("el-row",{attrs:{type:"flex",align:"center"}},[n("el-col",{attrs:{sm:24}},[n("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-sizes":[50,200,300,400],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.paginationTotal},on:{"size-change":e.didChangePageSize,"current-change":e.didChangePage}})],1)],1)],1)},staticRenderFns:[]};var p=n("VU/8")(u,d,!1,function(e){n("WM04")},null,null);t.default=p.exports}});
//# sourceMappingURL=17.f0bd1806ce3c538b7eea.js.map