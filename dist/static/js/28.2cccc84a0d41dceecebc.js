webpackJsonp([28],{v7tE:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("lC5x"),l=e.n(s),n=e("J0Oq"),i=e.n(n),r={components:{},data:function(){return{dialogFormVisible:!1,inuptVal:"",StudentDataList:[],classDetail:[],planList:[],totalNum:0,currentPage:1,form:{},student_id:"",pager:1,pageshow:!1}},computed:{class_id:function(){return this.$route.params.clid},course_id:function(){return this.$route.params.cid}},methods:{resetForm:function(t){this.$refs[t].resetFields()},handleIconClick:function(){""!=this.inuptVal&&(this.completeVal=""),this.fullscreenLoading=!0,this.getClassList()},adjustPlan:function(t,a){console.log(a),this.dialogFormVisible=!0,this.form={plan_id:a.plan_id},this.student_id=a.student_id},getClassList:function(){var t=this;return i()(l.a.mark(function a(){var e;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.inuptVal=t.inuptVal?t.inuptVal:"",a.next=3,t.$http.getClassList(t.class_id,{search_info:t.inuptVal,page:t.currentPage});case 3:0==(e=a.sent).data.status&&(t.StudentDataList=e.data.result.list,t.classDetail=e.data.result.class,t.planList=e.data.result.plan,t.planList.unshift({plan_id:"0",plan_name:"无"}),t.totalNum=Number(e.data.result.pages.total),t.pager=2,t.totalNum>0?t.pageshow=!0:t.pageshow=!1);case 5:case"end":return a.stop()}},a,t)}))()},handleCurrentChange:function(t){console.log("当前页: "+t),this.getClassList()},submitForm:function(t){this.changeStudentPlan()},changeStudentPlan:function(){var t=this;return i()(l.a.mark(function a(){var e,s,n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=t.class_id,s=t.student_id,n={plan_id:t.form.plan_id?t.form.plan_id:"0"},a.next=5,t.$http.changeStudentPlan(e,s,n);case 5:0==a.sent.data.status?(t.dialogFormVisible=!1,t.$message({type:"success",message:"修改成功!"}),t.getClassList()):t.$message.error("修改失败");case 7:case"end":return a.stop()}},a,t)}))()}},created:function(){this.getClassList()},mounted:function(){}},o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"title",rawName:"v-title"}],staticClass:"chooseplan",attrs:{"data-title":"EP课程学习数据统计"}},[e("div",{staticClass:"student-header headbar"},[e("div",{staticClass:"w_1140 p_t_36 clear "},[e("div",{staticClass:"student-head_l head_l"},[e("p",{staticClass:"white_12 stu_cou_group"},[t._v(t._s(t.classDetail.course_name))]),t._v(" "),e("p",{staticClass:"student_tit white_24"},[e("span",{staticClass:"studentName white_24"},[t._v(t._s(t.classDetail.class_name))])])])])]),t._v(" "),e("div",{staticClass:"tabmenu"},[e("div",{staticClass:"w_1140"},[e("div",{staticClass:"tabs"},[e("div",{staticClass:"tabs_nav"},[e("div",{staticClass:"tabs_item"},[e("router-link",{attrs:{to:"/customizedPlan/"+t.course_id+"/"+t.class_id}},[t._v("制定班级学习计划")])],1),t._v(" "),e("div",{staticClass:"tabs_item is-active"},[t._v("为学员选择学习计划")])])])])]),t._v(" "),e("div",{staticClass:"stulists-search"},[e("div",{staticClass:"w_1140"},[e("el-input",{staticClass:"inputsearch",attrs:{placeholder:"输入学员ID/手机号/昵称/学员姓名",icon:"search","on-icon-click":t.handleIconClick},nativeOn:{keydown:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.handleIconClick(a):null}},model:{value:t.inuptVal,callback:function(a){t.inuptVal=a},expression:"inuptVal"}})],1)]),t._v(" "),e("div",{staticClass:"stulists_mian"},[e("div",{staticClass:"w_1140"},[e("el-table",{ref:"word",staticClass:"stuTableData",attrs:{data:t.StudentDataList,border:!1}},[e("el-table-column",{attrs:{type:"index",label:"排序",width:"80"}}),t._v(" "),e("el-table-column",{attrs:{prop:"nick_name",label:"学员姓名",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"student_id",label:"学员ID",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"plan_name",label:"学习计划",width:"280","show-overflow-tooltip":"true"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"custarrow"},[t._v(t._s(a.row.plan_name))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{staticClass:"adjust",attrs:{type:"text"},on:{click:function(e){t.adjustPlan(a.$index,a.row)}}},[t._v("调整学习计划")])]}}])})],1)],1)]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.pageshow,expression:"pageshow"}],staticClass:"pagination"},[e("div",{staticClass:"w_1140"},[e("div",{staticClass:"block"},[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":20,layout:"total, prev, pager, next, jumper",total:t.totalNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(a){t.currentPage=a}}})],1)])]),t._v(" "),e("el-dialog",{attrs:{title:"学习计划",visible:t.dialogFormVisible},on:{"update:visible":function(a){t.dialogFormVisible=a},close:function(a){t.resetForm("ruleForm")}}},[e("el-form",{ref:"ruleForm",attrs:{model:t.form,rules:t.rules,"label-width":"120px"}},[e("el-form-item",{attrs:{label:"选择学习计划",prop:"plan_id"}},[e("el-select",{staticStyle:{width:"90%"},attrs:{clearable:"",placeholder:"请选择选择学习计划"},model:{value:t.form.plan_id,callback:function(a){t.$set(t.form,"plan_id",a)},expression:"form.plan_id"}},t._l(t.planList,function(t){return e("el-option",{key:t.plan_id,attrs:{label:t.plan_name,value:t.plan_id}})}))],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.submitForm("ruleForm")}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]},c=e("Z0/y")(r,o,!1,null,null,null);a.default=c.exports}});
//# sourceMappingURL=28.2cccc84a0d41dceecebc.js.map