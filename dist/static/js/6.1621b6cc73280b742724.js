webpackJsonp([6],{"0g2I":function(e,t){},G00f:function(e,t,a){"use strict";var s=a("BK/k"),l=a("NFfb"),i=a("zSLJ"),n={components:{},props:{title:{default:"批量导入"},urlTitle:{default:""},downloadUrl:{default:""},bVisible:{default:!1},uploadUrl:{required:!0,default:""},fileTypes:{default:function(){return[]}},uploadData:{default:function(){}},name:{default:"name"}},data:function(){return{apiHeader:{},centerDialogVisible:!0,fileList:[],loading:!1}},computed:{materialUpload:function(){return Object(s.c)()+"apigateway.gaodun.com/"+this.uploadUrl},dialogUploadVisible:{get:function(){return this.bVisible},set:function(){this.$emit("handleCloesDialog")}}},methods:{beforeAvatarUpload:function(e){if(0===this.fileTypes.length)return!0;var t=e.name.substring(e.name.lastIndexOf(".")+1),a=this.fileTypes.indexOf(t)>-1;return a||this.$message({message:"上传文件只能是"+this.fileTypes.join("、")+"格式!",type:"warning"}),a},handleChange:function(e,t){this.fileList=t.slice(-1)},handleRemove:function(e,t){this.fileList=t},handleProgress:function(){this.loading=!0},handleAvatarSuccess:function(e,t){var a=this;this.loading=!1,0==e.status?(this.$message({type:"success",message:"上传成功！"}),this.$emit("uploadSuccessCallback")):(this.$message({type:"error",message:"上传失败："+e.message,showClose:!0,duration:5e3}),setTimeout(function(){a.fileList=[]},0))},handleAvatarError:function(e,t,a){var s=this;this.$message({type:"error",message:"上传失败："+e,showClose:!0,duration:5e3}),this.loading=!1,setTimeout(function(){s.fileList=[]},0)}},mounted:function(){},destroyed:function(){},created:function(){var e="Basic "+Object(i.a)(l.j);this.apiHeader={Authentication:e}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"BatchFilesUpload",attrs:{title:e.title,width:"640px",center:"",visible:e.dialogUploadVisible},on:{"update:visible":function(t){e.dialogUploadVisible=t}}},[a("el-row",[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"upload-demo",attrs:{drag:"",action:e.materialUpload,"on-change":e.handleChange,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"on-progress":e.handleProgress,headers:e.apiHeader,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,data:e.uploadData,name:e.name,"element-loading-text":"正在上传中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(255, 255, 255, 0.8)"}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n                "),a("em",[e._v("点击上传")])]),e._v(" "),0!=e.fileTypes.length?a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传"+e._s(e.fileTypes.join(" / "))+"文件")]):e._e()])],1),e._v(" "),a("el-row",[e.urlTitle&&e.downloadUrl?a("a",{staticClass:"mould-download-btn",attrs:{href:e.downloadUrl,download:"download"}},[e._v(e._s(e.urlTitle))]):e._e()]),e._v(" "),a("el-row",{staticClass:"upload-tips"},[a("span",[e._v("提示：若模板Excel导入失败，请新建文件，将模板中内容复制到新文件中，再次尝试。")])])],1)},staticRenderFns:[]};var r=a("Z0/y")(n,o,!1,function(e){a("0g2I")},null,null);t.a=r.exports},YwDJ:function(e,t){},wHci:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("lC5x"),l=a.n(s),i=a("J0Oq"),n=a.n(i),o={name:"SyllabusModuleOptTemplate",components:{vUpload:a("G00f").a},data:function(){return{clonedialogVisible:!1,ruleProject:{region:""},rulesject:{region:[{required:!0,message:"选择旧大纲",trigger:"change"}]},uploaddialogVisible:!1,coursesyllid:"",modulelist:[],title:"",tag_id:""}},methods:{cloneruleProject:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.clonedialogVisible=!1})},uploadSuccessCallback:function(){this.$router.replace({path:"/syllabus/manage/edit/"+this.coursesyllid})},selectSyllabus:function(e){var t=this;return n()(l.a.mark(function a(){var s;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.selectSyllabus(t.coursesyllid,{template_id:e});case 2:0==(s=a.sent).status&&1==s.result&&t.$router.replace({path:"/syllabus/manage/edit/"+t.coursesyllid});case 4:case"end":return a.stop()}},a,t)}))()},OutlineTemplates:function(){var e=this;return n()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.CourseSyllabusTemplates();case 2:0==(a=t.sent).status&&(e.modulelist=a.result);case 4:case"end":return t.stop()}},t,e)}))()},checkSyllabus:function(){var e=this;return n()(l.a.mark(function t(){var a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.checkSyllabus(e.coursesyllid);case 2:0==(a=t.sent).status&&(e.title=a.result.title,e.tag_id=a.result.tag_id,a.result.template&&a.result.template.id&&e.$router.push({path:"/syllabus/manage/edit/"+e.coursesyllid}));case 4:case"end":return t.stop()}},t,e)}))()}},computed:{uploadUrl:function(){return"toc-service/course/syllabus/"+this.coursesyllid+"/items/batch"},uploadData:function(){return{course_syllabus_id:this.coursesyllid,tag_id:this.tag_id}}},mounted:function(){},created:function(){this.coursesyllid=this.$route.params.sid,this.OutlineTemplates(),this.checkSyllabus()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module-edu-content permission-outlineeat"},[a("div",{staticClass:"outlineeat"},[e._v("\n    课程大纲："+e._s(e.title)+"\n    "),e._v(" "),a("span",{staticClass:"tolead",on:{click:function(t){e.uploaddialogVisible=!0}}},[e._v("批量导入课程大纲")])]),e._v(" "),a("div",{staticClass:"outlinebox"},[a("div",{staticClass:"outlinetit"},[e._v("请先为该课程大纲选择合适的结构模板")]),e._v(" "),a("div",{staticClass:"outlinedrop"},e._l(e.modulelist,function(t){return a("div",{key:t.id,staticClass:"outlineitem",domProps:{innerHTML:e._s(t.description)},on:{click:function(a){e.selectSyllabus(t.id)}}})}))]),e._v(" "),a("v-upload",{attrs:{"b-visible":e.uploaddialogVisible,title:"批量导入课程大纲","url-title":"课程大纲Excel模板下载","download-url":"//simg01.gaodunwangxiao.com/%E6%89%B9%E9%87%8F%E5%AF%BC%E5%85%A5%E7%9A%84%E8%A1%A8%E6%A0%BC%E6%A8%A1%E6%9D%BF.rar","upload-url":e.uploadUrl,"upload-data":e.uploadData,name:"import_from",fileTypes:["csv","xls","xlsx"]},on:{uploadSuccessCallback:e.uploadSuccessCallback,handleCloesDialog:function(t){e.uploaddialogVisible=!1}}})],1)},staticRenderFns:[]};var u=a("Z0/y")(o,r,!1,function(e){a("YwDJ")},null,null);t.default=u.exports}});
//# sourceMappingURL=6.1621b6cc73280b742724.js.map