/*! liulibiao modified this file at 2017-12-11 14:55:17 */
webpackJsonp([7],{228:function(e,t,i){var a=i(53)(i(727),i(865),null,null,null);a.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/cluesManage/CluesModuleAssignRule.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] CluesModuleAssignRule.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},617:function(e,t,i){var a,s;a=[e,t],void 0!==(s=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["loadingMsg"]},e.exports=t.default}.apply(t,a))&&(e.exports=s)},618:function(e,t,i){function a(e){s||i(620)}var s=!1,n=i(53)(i(617),i(619),a,"data-v-25f9d916",null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/containers/loading.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] loading.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},619:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.loadingMsg.loading?i("div",{staticClass:"la-ball-elastic-dots"},[i("div"),e._v(" "),i("div"),e._v(" "),i("div"),e._v(" "),i("div")]):i("div",{staticClass:"listEmpty"},[i("p",[e._v(e._s(e.loadingMsg.title))])])},staticRenderFns:[]},e.exports.render._withStripped=!0},620:function(e,t){},636:function(e,t,i){function a(e){s||i(647)}var s=!1,n=i(53)(i(638),i(645),a,null,null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/plugins/tree/ExtendZTree.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ExtendZTree.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},638:function(e,t,i){var a,s;a=[e,t,i(639),i(35)],void 0!==(s=function(e,t,i,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function n(e){var t;if(null==e||"object"!=(void 0===e?"undefined":(0,o.default)(e)))return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var i=0,a=e.length;i<a;i++)t[i]=n(e[i]);return t}if(e instanceof Object){t={};for(var s in e)e.hasOwnProperty(s)&&(t[s]=n(e[s]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}Object.defineProperty(t,"__esModule",{value:!0});var r=s(i),o=s(a);window.zTreeIndex=window.zTreeIndex||90;var l=null,c={check:{enable:!0},data:{simpleData:{enable:!0},key:{name:"Name",title:"Name",children:"ChildrenList"}}},u="";t.default={props:{value:Array,width:String,data:Array,Id:String,onCheck:Function,placeholder:String,index:Number},data:function(){return{names:[],backData:[],showTree:!1,isEmpty:!1,options:{onCheck:function(){}}}},watch:{data:function(e){this.setCheckedNodes(this.value,this.data),this.backData=n(this.data),this.initTree()}},computed:{id:function(){return(10*Math.random()).toString().substring(2,10)},zTreeIndex:function(){return window.zTreeIndex--}},created:function(){u=this,this.setCheckedNodes(this.value,this.data),this.backData=n(this.data),this.options={onCheck:this.onCheck}},mounted:function(){c.callback={onCheck:this.test},this.initTree(),this.treeEvents(),this.$nextTick(function(){this.$on("resetTree",function(){this.clearCheckNodes()})})},methods:{test:function(){},onTreeCheck:function(){for(var e=this.getCheckedNodes(),t=[],i=[],a=e,s=Array.isArray(a),n=0,a=s?a:(0,r.default)(a);;){var o;if(s){if(n>=a.length)break;o=a[n++]}else{if(n=a.next(),n.done)break;o=n.value}var l=o,c=l.Id+"";i.indexOf(l.Id)>-1||c.indexOf("_")>-1||(t.push(l.Name),i.push(l.Id))}this.names=t,this.value=i,this.options.onCheck(i,this.index,t),this.setCheckedNodes(i,this.backData,!0)},initTree:function(){$("#"+this.id).zTree({zSetting:c,zNodes:this.data})},resetTree:function(){var e=$("#"+this.id).zTree("getZTreeObj");e.checkAllNodes(!1)},clearCheckNodes:function(){this.value=[],this.names=[],this.setCheckedNodes(this.value,this.data),this.options.onCheck(this.value,this.index,this.names),this.resetTree(),this.$el.querySelector(".g-extend-ztree-area").style.display="none"},getCheckedNodes:function(){return $("#"+this.id).zTree("getZTreeObj").getCheckedNodes()},setCheckedNodes:function(){function e(t,i){for(var n=t,o=Array.isArray(n),l=0,n=o?n:(0,r.default)(n);;){var c;if(o){if(l>=n.length)break;c=n[l++]}else{if(l=n.next(),l.done)break;c=l.value}var u=c;if(i.indexOf(u.Id)>-1){if(u.checked=!0,!a){if(s.names.indexOf(u.Name)>-1)continue;(-1==s.names.indexOf(u.Id)||/^\d/.test(u.Id))&&s.names.push(u.Name)}}else u.checked=!1;u.ChildrenList&&e(u.ChildrenList,i)}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments[1],a=arguments[2],s=this;e(i,t)},setChecked:function(e){this.value=e,this.names=[],this.setCheckedNodes(e,this.data,!1),this.initTree()},onChange:function(e){var t=this,i=this;clearTimeout(l),l=setTimeout(function(){var a=n(i.backData);t.filterData(a,e),t.isEmpty=0===a.length,$("#"+t.id).zTree({zSetting:c,zNodes:a})},300)},onFocus:function(e){e.stopPropagation(),this.showTree=!0},onClickStop:function(e){e.cancelBubble=!0,this.showTree=!0;for(var t=document.body.querySelectorAll(".g-extend-ztree-area"),i=0;i<t.length;i++)t[i].style.display="none";this.$el.querySelector(".g-extend-ztree-area").style.display="block"},filterData:function(e,t){for(var i=0;i<e.length;i++)if(e[i].ChildrenList){var a=this.childHasValue(e[i].ChildrenList,t);!0===a?this.filterData(e[i].ChildrenList,t):(e.splice(i,1),i--)}else{if(e[i].Name.indexOf(t)>-1)return!0;e.splice(i,1),i--}return!0},childHasValue:function(e,t){for(var i=0;i<e.length;i++){if(e[i].Name.indexOf(t)>-1)return!0;if(e[i].ChildrenList){return this.childHasValue(e[i].ChildrenList,t)}}},treeEvents:function(){document.body.onclick=function(){for(var e=document.body.querySelectorAll(".g-extend-ztree-area"),t=0;t<e.length;t++)e[t].style.display="none"}.bind(this)}}},e.exports=t.default}.apply(t,a))&&(e.exports=s)},639:function(e,t,i){e.exports={default:i(640),__esModule:!0}},640:function(e,t,i){i(91),i(90),e.exports=i(641)},641:function(e,t,i){var a=i(29),s=i(211);e.exports=i(3).getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},645:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"g-extend-ztree-box",style:{zIndex:e.zTreeIndex,width:e.width},on:{click:function(t){t.stopPropagation(),e.onClickStop(t)}}},[e.names.length?i("i",{staticClass:"tree-circle-close el-icon-circle-close",on:{click:function(t){t.stopPropagation(),e.clearCheckNodes(t)}}}):e._e(),e._v(" "),i("el-input",{attrs:{type:"text",title:e.names,value:e.names,readonly:"",size:"small",placeholder:e.placeholder},on:{focus:e.onFocus}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"g-extend-ztree-area",on:{click:e.onTreeCheck}},[i("ul",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"ztree",attrs:{id:e.id}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"empty"},[i("i",{staticClass:"el-icon-information"}),e._v(" 未匹配到")]),e._v(" "),i("el-input",{attrs:{type:"text",size:"small",placeholder:"输入关键字进行过滤"},on:{change:this.onChange}})],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},647:function(e,t){},727:function(e,t,i){var a,s;a=[e,t,i(5),i(41),i(804),i(131),i(8),i(21),i(87),i(803)],void 0!==(s=function(e,t,i,a,s,n,r,o,l,c){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var d=(u(i),u(s)),h=u(c);t.default={props:["self"],components:{RuleConfiguration:h.default,tree:d.default},data:function(){return{loading:!1,removeOneIcon:!0,removeTearmIcon:!0,AllocationRuleGuid:"",ruleStatus:"",rowbackColor:"",searchValue:"",searchProJectValue:"",searchRangeType:"",searchTimeStart:"",searchTimeEnd:"",searchStatu:0,searchPerson:"",pageSize:10,currentPage:1,cluesTotal:0,tableData:[],optionProject:[],TearmList:[],UserIdList:[],UserProps:{value:"Id",label:"Name",children:"ChildrenList"},OptionStatu:[],OptionPersion:[],OptionHasData:[],OptionAssignedType:[]}},methods:{StatuFormat:function(e){if(null!=e){switch(e.IsDeleted){case 1:return"停用";case 0:default:return"启用"}}},dateFormat:function(e){if(null!=e){var t=Date.parse(e.CreateTime);return(0,n.number2DateTime)(t,"yyyy-MM-dd")}return""},TypeFormat:function(e){if(null!=e){switch(e.Rtype){case 1:return"项目分配到团队";case 2:return"团队分配到个人";default:return"项目分配到团队"}}},handleCurrentChange:function(e){this.currentPage=e,this.GetDataList()},handleSizeChange:function(e){this.pageSize=e,this.GetDataList()},btnAddClick:function(){this.$store.dispatch("isRuleRight",!0),this.$refs.configuration.clearForm()},GetDataList:function(){var e=this,t="",i="";this.loading=!0,void 0!=this.searchTimeStart&&this.searchTimeStart.length>0&&(t=(0,n.format)(this.searchTimeStart[0]),i=(0,n.format)(this.searchTimeStart[1]));var a={Where:{AllocationRuleName:this.searchValue,CourseType:this.searchProJectValue,RangeType:this.searchRangeType,BeginTime:t,EndTime:i,Rtype:this.searchPerson,IsDeleted:this.searchStatu},PageIndex:this.currentPage,PageSize:this.pageSize,OrderBy:"ID ",SortCol:"1"};""!=a.Where.BeginTime&&(a.Where.BeginTime=(0,n.format)(a.Where.BeginTime)),(0,l.GetAllocationRuleList)(a).then(function(t){0===t.status?(e.loading=!1,e.cluesTotal=t.result.Count,e.tableData=t.result.Body):e.loading=!1})},onSearch:function(){var e=this,t={Where:this.searchValue,PageIndex:this.currentPage,PageSize:this.pageSize,OrderBy:"",SortCol:""};(0,l.GetQuickAllocationRuleList)(t).then(function(t){0===t.status&&(e.cluesTotal=t.result.Count,e.tableData=t.result.Body)})},onMdifyRule:function(e,t){var i=this;this.$store.dispatch("isRuleRight",!0),setTimeout(function(){i.$store.dispatch("AllocationRuleGuid",t[e].AllocationRuleGuid)},50)},onOpenRule:function(e,t){var i=this,a=0==t[e].IsDeleted?1:0;(0,l.getDisableAllocation)({guid:t[e].AllocationRuleGuid,isDeDisable:a}).then(function(e){0===e.status&&(i.GetDataList(),i.$message({message:"操作成功",type:"success"}))})},selectChange:function(){this.GetDataList()},tableRowClassName:function(e,t){return e.AllocationRuleGuid===this.$store.state.cluesManage.AllocationRuleGuid?"positive-row":""}},created:function(){var e=this;this.GetDataList(),(0,l.interestedProject)().then(function(t){0===t.status&&(e.optionProject=t.result)}),(0,l.GetRangeFieldEnumList)().then(function(t){0===t.status&&(e.OptionAssignedType=t.result)}),(0,l.GetRationTypeEnumList)().then(function(t){0===t.status&&(e.OptionPersion=t.result)}),(0,l.GetContainStateEnumList)().then(function(t){0===t.status&&(e.OptionHasData=t.result)}),(0,l.GetDataTypeEnumList)().then(function(t){0===t.status&&(e.OptionStatu=t.result)});var t="",i=localStorage.getItem("CRM_USER_INFO");if(void 0!=i&&null!=i){var a=JSON.parse(i);void 0!=a&&(t=a.UserId)}(0,l.GetUserDepartmentTree)({userId:t}).then(function(t){0===t.status&&(e.UserIdList=t.result)})}},e.exports=t.default}.apply(t,a))&&(e.exports=s)},734:function(e,t,i){var a,s;a=[e,t,i(28),i(5),i(41),i(821),i(636),i(618),i(87)],void 0!==(s=function(e,t,i,a,s,n,r,o,l){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=c(i),d=(c(a),c(n),c(r)),h=c(o);t.default={props:["onGetDataList"],components:{Gtree:d.default,loading:h.default},data:function(){return{tabIndex:0,editableTabsValue:"1",loadingMsg:{title:"",loading:!1},cityData:[],sourceData:[],Optionprovice:[],optionProject:[],OptionAssignedType:[],OptionStatu:[],UserIdList:[],TearmList:[],removeTypeOneIcon:!1,removeProprtionOneIcon:!1,removeTypeTwoIcon:!1,removeProprtionTwoIcon:!1,isTeamDisplayTree:!1,isRtype:"",UserProps:{value:"Id",label:"Name",children:"ChildrenList"},teamRuleName:"",teamCourseType:"",teamDeleted:0,addTeamRuleType:[{QueryField:"",FieldValue:[],IsContain:"1",sourceId:[]}],OptionTearmProportion:[{ObjectID:[],Weight:""}],tearmRibit:[],tearmTreeName:"",personRuleName:"",personCourseType:"",TeamID:"",personDeleted:0,addPrsonRuleType:[{QueryField:"",FieldValue:[],IsContain:"1",sourceId:[]}],OptionPersonProportion:[{ObjectID:[],Weight:"",dayLimit:"",TotalLimit:""}]}},watch:{RuleGuid:function(e){e&&e.length>1&&this.GetAllocationRuleInfoData(e)},addTeamRuleType:function(e){e.length>1?this.removeTypeOneIcon=!0:this.removeTypeOneIcon=!1},OptionTearmProportion:function(e){e.length>1?this.removeProprtionOneIcon=!0:this.removeProprtionOneIcon=!1},addPrsonRuleType:function(e){e.length>1?this.removeTypeTwoIcon=!0:this.removeTypeTwoIcon=!1},OptionPersonProportion:function(e){e.length>1?this.removeProprtionTwoIcon=!0:this.removeProprtionTwoIcon=!1}},computed:(0,u.default)({},(0,s.mapState)({isRuleRight:function(e){return e.cluesManage.isRuleRight},RuleGuid:function(e){return e.cluesManage.AllocationRuleGuid}})),methods:{getAreaTree:function(e,t,i){this.addTeamRuleType[t].FieldValue=e,this.addTeamRuleType[t].sourceId=e},getchannelsTree:function(e,t,i){this.addTeamRuleType[t].FieldValue=e,this.addTeamRuleType[t].sourceId=e},getAreaTrees:function(e,t,i){this.addPrsonRuleType[t].FieldValue=e,this.addPrsonRuleType[t].sourceId=e},getchannelsTrees:function(e,t,i){this.addPrsonRuleType[t].FieldValue=e,this.addPrsonRuleType[t].sourceId=e},GetAllocationRuleInfoData:function(e){var t=this;this.clearForm(),this.loadingMsg.loading=!0,(0,l.GetAllocationRuleInfo)({guid:e}).then(function(e){if(t.loadingMsg.loading=!1,0===e.status){var i=e.result,a=i.AllocationRuleName,s=i.CourseType,n=i.TeamID,r=i.Rtype,o=i.IsDeleted,l=(i.IsContain,i.Feeders),c=i.Ranges;if(t.editableTabsValue=r.toString(),t.isRtype=r,1===r){if(t.teamRuleName=a,t.teamCourseType=s.toString(),t.teamDeleted=o,c.length>0){var u=[],d=0,h=setInterval(function(){d<c.length?(u.push({QueryField:c[d].QueryField,FieldValue:c[d].FieldValue,sourceId:c[d].FieldValue.toString(),IsContain:c[d].IsContain.toString()}),d++):clearInterval(h)},0);t.addTeamRuleType=u}if(l.length>0){for(var p=[],m=0;m<l.length;m++){var f=t.getNodesIds(l[m].ObjectID);p.push({ObjectID:f,Weight:l[m].Weight})}t.OptionTearmProportion=p}}else{if(t.personRuleName=a,t.personCourseType=s.toString(),t.personDeleted=o,c.length>0){var v=[],g=0,y=setInterval(function(){g<c.length?(v.push({QueryField:c[g].QueryField,FieldValue:c[g].FieldValue,sourceId:c[g].FieldValue,IsContain:c[g].IsContain.toString()}),g++):clearInterval(y)},0);t.addPrsonRuleType=v}if(l.length>0){for(var T=[],b=0;b<l.length;b++){var _=t.getPersonNodeIds(l[b].ObjectID);T.push({ObjectID:_,Weight:l[b].Weight,dayLimit:l[b].DayLimit,TotalLimit:l[b].TotalLimit})}t.OptionPersonProportion=T}t.tearmRibit=n,t.$refs.treeTearm.setCheckedKeys([t.tearmRibit]);var C=t.$refs.treeTearm.getCheckedNodes();null!=C&&C.length>0&&(t.tearmTreeName=C[0].Name)}}})},submitForm:function(e){var t=this;if(0===e){var i=[];this.bntLoading=!0;for(var a=0;a<this.OptionTearmProportion.length;a++)i.push({ObjectID:this.OptionTearmProportion[a].ObjectID[this.OptionTearmProportion[a].ObjectID.length-1],Weight:this.OptionTearmProportion[a].Weight,Priority:a+1});var s={AllocationRuleGuid:this.RuleGuid,CourseType:this.teamCourseType,Rtype:1,TeamID:"",Feeders:i,Ranges:this.addTeamRuleType,AllocationRuleName:this.teamRuleName,IsDeleted:this.teamDeleted};void 0!=this.RuleGuid&&""!=this.RuleGuid&&this.isRtype===Number(this.editableTabsValue)?(s.AllocationRuleGuid=this.RuleGuid,this.loading=!0,(0,l.EditAllocation)(s).then(function(e){t.loading=!1,0===e.status&&(t.$message({message:"修改成功",type:"success"}),t.$store.dispatch("isRuleRight",!1),t.onGetDataList(),t.$store.dispatch("AllocationRuleGuid",null))}).catch(function(){t.loading=!1})):(this.loading=!0,(0,l.AddAllocation)(s).then(function(e){t.loading=!1,0===e.status&&1==e.result&&(t.$message({message:"新增成功",type:"success"}),t.onGetDataList(),t.$store.dispatch("isRuleRight",!1),t.$store.dispatch("AllocationRuleGuid",null))}).catch(function(){t.loading=!1}))}else{this.bntLoading=!0;for(var n=[],r=0;r<this.OptionPersonProportion.length;r++)n.push({dayLimit:this.OptionPersonProportion[r].dayLimit,TotalLimit:this.OptionPersonProportion[r].TotalLimit,ObjectID:this.OptionPersonProportion[r].ObjectID[this.OptionPersonProportion[r].ObjectID.length-1],Weight:this.OptionPersonProportion[r].Weight,Priority:r+1});var o={AllocationRuleGuid:this.RuleGuid,CourseType:this.personCourseType,Rtype:2,TeamID:this.tearmRibit[this.tearmRibit.length-1]||this.tearmRibit,Feeders:n,Ranges:this.addPrsonRuleType,AllocationRuleName:this.personRuleName,IsDeleted:this.personDeleted};void 0!=this.RuleGuid&&""!=this.RuleGuid&&this.isRtype===Number(this.editableTabsValue)?(o.AllocationRuleGuid=this.RuleGuid,this.loading=!0,(0,l.EditAllocation)(o).then(function(e){t.loading=!1,0===e.status&&1==e.result&&(t.$message({message:"修改成功",type:"success"}),t.onGetDataList(),t.$store.dispatch("isRuleRight",!1),t.$store.dispatch("AllocationRuleGuid",null))}).catch(function(){t.loading=!1})):(this.loading=!0,(0,l.AddAllocation)(o).then(function(e){t.loading=!1,0===e.status&&1==e.result&&(t.$message({message:"新增成功",type:"success"}),t.onGetDataList(),t.$store.dispatch("isRuleRight",!1),t.$store.dispatch("AllocationRuleGuid",null))}).catch(function(){t.loading=!1}))}},onCloseRule:function(){this.$store.dispatch("isRuleRight",!1)},clearForm:function(){this.teamRuleName="",this.teamCourseType="",this.teamDeleted=0,this.addTeamRuleType=[{QueryField:"",FieldValue:[],IsContain:"1",sourceId:[]}],this.OptionTearmProportion=[{ObjectID:[],Weight:""}],this.personRuleName="",this.personCourseType="",this.TeamID="",this.tearmRibit=[],this.tearmTreeName="",this.personDeleted=0,this.addPrsonRuleType=[{QueryField:"",FieldValue:[],IsContain:"1",sourceId:[]}],this.OptionPersonProportion=[{ObjectID:[],Weight:"",dayLimit:"",TotalLimit:""}]},onAddRuleType:function(e){0==e?this.addTeamRuleType.push({QueryField:"",FieldValue:[],IsContain:"1",sourceId:[]}):this.addPrsonRuleType.push({QueryField:"",FieldValue:[],IsContain:"1",sourceId:[]})},onAddProportion:function(e){0==e?this.OptionTearmProportion.push({ObjectID:[],Weight:""}):this.OptionPersonProportion.push({ObjectID:[],Weight:"",dayLimit:"",TotalLimit:""})},onRemovRuleType:function(e,t){var i=this;if(0==t){var a=[].concat(this.addTeamRuleType);this.addTeamRuleType=[],setTimeout(function(){i.addTeamRuleType=a,i.addTeamRuleType.length>1&&i.addTeamRuleType.splice(e,1)},0)}else{var s=[].concat(this.addPrsonRuleType);this.addPrsonRuleType=[],setTimeout(function(){i.addPrsonRuleType=s,i.addPrsonRuleType.length>1&&i.addPrsonRuleType.splice(e,1)},0)}},onRemoveProportion:function(e,t){0==t?this.OptionTearmProportion.length>1&&this.OptionTearmProportion.splice(e,1):this.OptionPersonProportion.length>1&&this.OptionPersonProportion.splice(e,1)},onRuleRightHide:function(){this.$store.dispatch("isRuleRight",!1),this.$store.dispatch("AllocationRuleGuid",null)},onRuleTab:function(e){this.tabIndex=e.index},getPersonNodeIds:function(e){var t=this.getCasNode(e,this.UserIdList),i=[];if(t&&t.NodeList)for(var a=0;a<t.NodeList.length;a++)i.push(t.NodeList[a]);return i},getNodesIds:function(e){var t=this.getCasNode(e,this.TearmList),i=[];if(t&&t.NodeList)for(var a=0;a<t.NodeList.length;a++)i.push(t.NodeList[a]);return i},getCasNode:function(e,t){if(!t)return null;for(var i=0;i<t.length;i++){var a=t[i];if(e==a.Id)return a;if(a.ChildrenList){var s=this.getCasNode(e,a.ChildrenList);if(s)return s}}return null},DisplayTearmTree:function(){this.isTeamDisplayTree=!0},treeTearmChange:function(e,t,i){null!=t&&(this.tearmRibit=[e.Id],this.tearmTreeName=e.Name)},HideAll:function(){this.isTeamDisplayTree=!1}},created:function(){var e=this,t={areaId:"00000000-0000-0000-0000-000000000000"};(0,l.getProviceOrCity)(t).then(function(t){0===t.status&&(e.Optionprovice=t.result)}),(0,l.interestedProject)().then(function(t){0===t.status&&(e.optionProject=t.result)}),(0,l.GetRangeFieldEnumList)().then(function(t){0===t.status&&(e.OptionAssignedType=t.result)}),(0,l.GetDataTypeEnumList)().then(function(t){0===t.status&&(e.OptionStatu=t.result)}),(0,l.GetCustomerSourceTree)().then(function(t){if(0===t.status){for(var i=t.result,a=0;a<i.length;a++)i[a].Id=i[a].Id+"";e.sourceData=i}}),(0,l.GetArea)().then(function(t){0===t.status&&(e.cityData=t.result)});var i="",a=localStorage.getItem("CRM_USER_INFO");if(void 0!=a&&null!=a){var s=JSON.parse(a);void 0!=s&&(i=s.UserId)}(0,l.GetUserDepartmentTree)({}).then(function(t){0===t.status&&(e.UserIdList=t.result)}),(0,l.GetPublicPoolUser)({userId:i}).then(function(t){0===t.status&&(e.TearmList=t.result)})}},e.exports=t.default}.apply(t,a))&&(e.exports=s)},735:function(e,t,i){var a,s;a=[e,t,i(5),i(21)],void 0!==(s=function(e,t,i,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(i);t.default={props:{width:String,treeType:String,callback:Function,reset:Function,placeholder:String,allSelected:Function,setTreeId:Array,getTreeData:Array,controlId:String},data:function(){return{width:"100%",showTree:!1,currentValue:"",userInfo:"",treeUserName:"",treeUserId:this.setTreeId,isRemove:!1,hasChange:!1,getUserData:this.getTreeData,defaultProps:{label:"Name",children:"ChildrenList"},zTreeSetting:{check:{enable:!0},data:{simpleData:{enable:!0},key:{name:"Name",title:"Name",children:"ChildrenList"}},callback:{onCheck:this.getCheckedNodes}}}},watch:{currentValue:function(e){this.filterTreeNodes(e)}},methods:{valClick:function(e){e.cancelBubble=!0,this.showTree=!0},handleInput:function(e){this.currentValue=e},filterTreeNodes:function(e){var t=$.fn.zTree.getZTreeObj(this.controlId),i=this.getUserData,a=[];if(!e)return t.expandAll(!1),void $.fn.zTree.init($("#"+this.controlId),this.zTreeSetting,i);for(var s=0;s<i.length;s++){var n=this.treeFilter(e,i[s]);if(n&&n.length>0){var r={Id:i[s].Id,Name:i[s].Name,ParentId:i[s].ParentId,LeaderId:i[s].LeaderId,NodeType:i[s].NodeType,ChildrenList:n};a.push(r)}}$.fn.zTree.init($("#"+this.controlId),this.zTreeSetting,a),t.expandAll(!0)},treeFilter:function(e,t){if(!t&&!t.ChildrenList)return null;var i=[];if(t.ChildrenList)for(var a=0;a<t.ChildrenList.length;a++){var s={Id:t.ChildrenList[a].Id,Name:t.ChildrenList[a].Name,ParentId:t.ChildrenList[a].ParentId,LeaderId:t.ChildrenList[a].LeaderId,NodeType:t.ChildrenList[a].NodeType,ChildrenList:null};if(isNaN(s.Id)){if(t.ChildrenList[a].ChildrenList){var n=this.treeFilter(e,t.ChildrenList[a]);n&&n.length>0&&(s.ChildrenList=n,i.push(s))}}else s.Name.indexOf(e)>-1&&i.push(s)}return i},getCheckedNodes:function(e,t,i){var a=$.fn.zTree.getZTreeObj(this.controlId),s=a.getCheckedNodes(!0);if(s){var n=[],r=[];$(s).each(function(e,t){isNaN(t.Id)||(n.push(t.Id),r.push(t.Name))}),r.length>0?$(".users-clear").show():$(".users-clear").hide(),this.treeUserName=r.join(","),this.treeUserId=n,this.$emit("getTreeId",this.treeUserId)}},resetChecked:function(){$.fn.zTree.getZTreeObj(this.controlId).checkAllNodes(!1),this.treeUserName=""},setDefaultNode:function(){if(this.treeUserId&&this.treeUserId.length>0)for(var e=this.getUserData,t=this.treeUserId.slice(0),i=0;i<e.length;i++)this.setDefaultChild(e[i],t)},setDefaultChild:function(e,t){if(t&&0!=t.length&&e){for(var i=0;i<t.length;i++)if(e.Id==t[i]){e.checked=!0,t.splice(i,1),this.treeUserName=this.treeUserName+e.Name+",";break}if(e.ChildrenList&&e.ChildrenList.length)for(var i=0;i<e.ChildrenList.length;i++)this.setDefaultChild(e.ChildrenList[i],t)}}},updated:function(){this.treeUserName.length?this.isRemove=!0:this.isRemove=!1},created:function(){this.userInfo=JSON.parse(localStorage.getItem(a.CRM_USER_INFO));this.curre},mounted:function(){this.setDefaultNode(),$.fn.zTree.init($("#"+this.controlId),this.zTreeSetting,this.getUserData),document.body.onclick=function(){this.showTree=!1}.bind(this)}},e.exports=t.default}.apply(t,a))&&(e.exports=s)},793:function(e,t,i){var a,s;a=[e,t,i(43),i(42),i(87),i(21)],void 0!==(s=function(e,t,i,a,s,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(i),l=r(a);t.default={props:{treeType:String,callback:Function,reset:Function,placeholder:String,defaultTreeData:Array,index:Number},data:function(){return{showTree:!1,currentValue:"",treeUserName:"",treeUserId:[],isRemove:!1,hasChange:!1,getUserData:[],defaultProps:{label:"Name",children:"ChildrenList"},getTreeData:[]}},watch:{currentValue:function(e){this.$refs.tree.filter(e)},placeholder:function(e){this.treeUserName=e}},methods:{handleInput:function(e){var t=e.target.value;this.$emit("input",t),this.$emit("change",t),this.currentValue=t},onGetCustomerSourceTree:function(){var e=this;return(0,l.default)(o.default.mark(function t(){var i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.GetCustomerSourceTree)();case 2:i=t.sent,0===i.status&&(e.getUserData=i.result);case 4:case"end":return t.stop()}},t,e)}))()},onGetArea:function(){var e=this;return(0,l.default)(o.default.mark(function t(){var i;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.GetArea)();case 2:i=t.sent,0===i.status&&(e.getUserData=i.result);case 4:case"end":return t.stop()}},t,e)}))()},onTriggerTree:function(e){e.cancelBubble=!0,this.showTree=!1;for(var t=document.body.querySelectorAll(".tree-box"),i=0;i<t.length;i++)t[i].style.display="none";switch(this.setCheckedNodes(),this.$el.querySelector(".tree-box").style.display="block",this.treeType){case"getArea":0==this.getUserData.length&&this.onGetArea();break;case"channels":0==this.getUserData.length&&this.onGetCustomerSourceTree();break;default:0==this.getUserData.length&&this.onGetArea()}this.setCheckedKeys()},setCheckedNodes:function(){this.getTreeData&&this.$refs.tree.setCheckedNodes(this.getTreeData)},checkChangeTree:function(){this.getTreeData=this.$refs.tree.getCheckedNodes(),this.treeUserId=this.$refs.tree.getCheckedKeys();var e=[];this.getTreeData.forEach(function(t){void 0===t.tagSubList&&e.push(t.Name)}),this.treeUserName=e.join(","),this.callback(this.treeUserId,this.index),this.hasChange=!0},filterNode:function(e,t){return!e||-1!==t.Name.indexOf(e)},setCheckedKeys:function(){this.defaultTreeData&&this.$refs.tree.setCheckedKeys(this.defaultTreeData)},resetChecked:function(e){var t=this;e.stopPropagation(),this.callback(null),this.$el.querySelector(".tree-box").style.display="none",setTimeout(function(){t.showTree=!0},10),setTimeout(function(){t.showTree=!1},20),this.treeUserName="",this.treeUserId=[],this.getTreeData=[],this.currentValue="","function"==typeof this.allSelected&&this.allSelected()}},updated:function(){this.treeUserName.length?this.isRemove=!0:this.isRemove=!1},created:function(){this.treeUserName=this.placeholder},mounted:function(){this.$nextTick(function(){var e=this;this.$on("resetTree",function(){var e=this;this.callback(null),setTimeout(function(){e.showTree=!0},10),setTimeout(function(){e.showTree=!1},20),this.treeUserName="",this.treeUserId=[],this.currentValue="",this.getTreeData=[]}),this.$on("setShowTree",function(){setTimeout(function(){e.showTree=!0},10),setTimeout(function(){e.showTree=!1},20)})}),document.body.onclick=function(){for(var e=document.body.querySelectorAll(".tree-box"),t=0;t<e.length;t++)e[t].style.display="none"}.bind(this)}},e.exports=t.default}.apply(t,a))&&(e.exports=s)},803:function(e,t,i){function a(e){s||i(959)}var s=!1,n=i(53)(i(734),i(878),a,null,null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/cluesManage/RuleConfiguration.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] RuleConfiguration.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},804:function(e,t,i){function a(e){s||(i(988),i(989))}var s=!1,n=i(53)(i(735),i(911),a,"data-v-e145f15c",null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/controls/ZTree.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ZTree.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},821:function(e,t,i){function a(e){s||(i(971),i(970))}var s=!1,n=i(53)(i(793),i(891),a,"data-v-8022c65e",null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/containers/ruleTree.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ruleTree.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},865:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"module-clues-content moduleAssign"},[i("el-form",{attrs:{"label-width":"120px"}},[i("div",[i("el-row",[i("el-col",{attrs:{span:18}},[i("div",[i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{clearable:"",filterable:"",size:"small",placeholder:"按项目"},on:{change:e.selectChange},model:{value:e.searchProJectValue,callback:function(t){e.searchProJectValue=t},expression:"searchProJectValue"}},e._l(e.optionProject,function(e){return i("el-option",{key:e.Id,attrs:{clearable:"",filterable:"",label:e.Name,value:e.Id}})})),e._v(" "),i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{placeholder:"按类型",clearable:"",filterable:"",size:"small"},on:{change:e.selectChange},model:{value:e.searchRangeType,callback:function(t){e.searchRangeType=t},expression:"searchRangeType"}},e._l(e.OptionAssignedType,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),e._v(" "),i("el-select",{staticStyle:{width:"140px","margin-right":"5px"},attrs:{clearable:"",filterable:"",size:"small",placeholder:"规则类型"},on:{change:e.selectChange},model:{value:e.searchPerson,callback:function(t){e.searchPerson=t},expression:"searchPerson"}},e._l(e.OptionPersion,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),e._v(" "),i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{clearable:"",filterable:"",placeholder:"按状态",size:"small"},on:{change:e.selectChange},model:{value:e.searchStatu,callback:function(t){e.searchStatu=t},expression:"searchStatu"}},e._l(e.OptionStatu,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),e._v(" "),i("el-date-picker",{staticStyle:{width:"193px"},attrs:{type:"daterange",clearable:"",placeholder:"起始时间",size:"small"},on:{change:e.selectChange},model:{value:e.searchTimeStart,callback:function(t){e.searchTimeStart=t},expression:"searchTimeStart"}})],1)]),e._v(" "),i("el-col",{attrs:{span:6}},[i("div",{staticClass:"clues-search"},[i("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"根据规则名称模糊查询",size:"small"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}},[i("el-button",{attrs:{icon:"search",size:"small"},on:{click:e.onSearch},slot:"append"})],1)],1)])],1),e._v(" "),i("el-row",[i("el-col",{staticStyle:{padding:"15px 0 10px 0"}},[e.unlocking("Distribution_Rule_Add")?i("el-button",{staticStyle:{width:"70px",border:"1px solid #1d90e6","margin-right":"15px"},attrs:{type:"text",size:"small"},on:{click:function(t){t.stopPropagation(),e.btnAddClick(t)}}},[e._v("新增\n                    ")]):e._e()],1)],1),e._v(" "),i("el-row",[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tbRules",staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-class-name":e.tableRowClassName,border:""}},[i("el-table-column",{attrs:{prop:"AllocationRuleName",label:"分配器名称"}}),e._v(" "),i("el-table-column",{attrs:{prop:"CourseType_Str",label:"所属项目 "}}),e._v(" "),i("el-table-column",{attrs:{prop:"Rtype",label:"分配大类 ",formatter:e.TypeFormat}}),e._v(" "),i("el-table-column",{attrs:{prop:"CreateTime",label:"创建时间",formatter:e.dateFormat}}),e._v(" "),i("el-table-column",{attrs:{prop:"CreateBy_Str",label:"创建人"}}),e._v(" "),i("el-table-column",{attrs:{prop:"IsDeleted",label:"有效状态",formatter:e.StatuFormat}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.onMdifyRule(t.$index,e.tableData)}}},[e._v("修改")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){e.onOpenRule(t.$index,e.tableData)}}},[e._v(e._s(0==t.row.IsDeleted?"停用":"启用"))])]}}])})],1),e._v(" "),i("div",{staticClass:"clues-pagination"},[i("el-pagination",{attrs:{"page-sizes":[10,20,50,100,200,300,400],"page-size":e.pageSize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:e.cluesTotal,"page-count":10/e.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),i("transition",[i("rule-configuration",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.cluesManage.isRuleRight,expression:"$store.state.cluesManage.isRuleRight"}],ref:"configuration",class:e.$store.state.cluesManage.isRuleRight?"slideInRight":"slideOutRight",attrs:{onGetDataList:e.GetDataList}})],1)],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},878:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"animated rule-configuration"},[i("loading",{attrs:{loadingMsg:e.loadingMsg}}),e._v(" "),i("div",{staticClass:"clues-tracking-hide",on:{click:function(t){t.stopPropagation(),e.onRuleRightHide(t)}}},[i("a",{attrs:{href:"javascript:void(0)"}},[e._v(">>")])]),e._v(" "),i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onRuleTab},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},[i("el-tab-pane",{attrs:{label:"团队",name:"1"}},[i("div",[i("el-row",[i("el-form-item",{attrs:{label:"分配器名称"}},[i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"tigRed"},[e._v("*")]),e._v(" "),i("el-input",{attrs:{size:"small"},model:{value:e.teamRuleName,callback:function(t){e.teamRuleName=t},expression:"teamRuleName"}})],1)])],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"适用项目"}},[i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"tigRed"},[e._v("*")]),e._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",size:"small",placeholder:"请选择"},model:{value:e.teamCourseType,callback:function(t){e.teamCourseType=t},expression:"teamCourseType"}},e._l(e.optionProject,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}))],1)])],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"状态"}},[i("el-radio-group",{model:{value:e.teamDeleted,callback:function(t){e.teamDeleted=t},expression:"teamDeleted"}},e._l(e.OptionStatu,function(t){return i("el-radio",{key:t.Id,attrs:{label:t.Id}},[e._v("\n                                "+e._s(t.Name)+"\n                            ")])}))],1)],1),e._v(" "),i("el-row",[i("div",{staticStyle:{margin:"15px 0 25px"}},[i("table",{staticClass:"ProportionTable",attrs:{cellspacing:"0",cellpadding:"0"}},[i("thead",[i("tr",{staticClass:"rule-configuration-thead"},[i("td",{staticStyle:{width:"24%","border-top-left-radius":"3px"}},[e._v("分配类型")]),e._v(" "),i("td",{staticStyle:{width:"28%"}},[e._v("内容")]),e._v(" "),i("td",{staticStyle:{width:"28%"}},[e._v("是否包含")]),e._v(" "),i("td",{staticStyle:{width:"20%"}},[e._v("操作")])])]),e._v(" "),i("tbody",e._l(e.addTeamRuleType,function(t,a){return e.addTeamRuleType.length?i("tr",{key:t.ruleType,staticStyle:{"text-align":"center"}},[i("td",[i("el-select",{attrs:{clearable:"",filterable:"",size:"small",placeholder:"请选择"},on:{change:e.changeAssignedType},model:{value:t.QueryField,callback:function(e){t.QueryField=e},expression:"item.QueryField"}},e._l(e.OptionAssignedType,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}))],1),e._v(" "),i("td",[1===t.QueryField?i("el-select",{staticClass:"tracking-text-font",staticStyle:{width:"80%"},attrs:{filterable:"",multiple:"",size:"small",placeholder:"请选择"},model:{value:t.FieldValue,callback:function(e){t.FieldValue=e},expression:"item.FieldValue"}},e._l(e.Optionprovice,function(e){return i("el-option",{key:e.IdentityGuid,attrs:{label:e.Name,value:e.IdentityGuid}})})):e._e(),e._v(" "),2===t.QueryField?i("Gtree",{ref:"gtree",refInFor:!0,attrs:{data:e.cityData,index:a,value:t.sourceId,onCheck:e.getAreaTree,placeholder:"请选择城市"}}):e._e(),e._v(" "),5===t.QueryField?i("Gtree",{ref:"gtree",refInFor:!0,attrs:{data:e.sourceData,index:a,value:t.sourceId,onCheck:e.getchannelsTree,placeholder:"请选择客户来源"}}):e._e(),e._v(" "),3===t.QueryField?i("span",[e._v("————")]):e._e()],1),e._v(" "),i("td",[i("el-radio-group",{model:{value:t.IsContain,callback:function(e){t.IsContain=e},expression:"item.IsContain"}},[i("el-radio",{staticClass:"radio",attrs:{label:"1"}},[e._v("包含")]),e._v(" "),i("el-radio",{staticClass:"radio",attrs:{label:"2"}},[e._v("排除")])],1)],1),e._v(" "),i("td",{staticClass:"clues-newusers-table",staticStyle:{"text-align":"center",width:"80px"}},[i("a",{staticClass:"newuser-add",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onAddRuleType(0)}}}),e._v(" "),e.removeTypeOneIcon?i("a",{staticClass:"newuser-remove",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onRemovRuleType(a,0)}}}):e._e()])]):e._e()}))])]),e._v(" "),i("div",[i("table",{staticClass:"ProportionTable",attrs:{cellspacing:"0",cellpadding:"0"}},[i("thead",[i("tr",{staticClass:"rule-configuration-thead"},[i("td",{staticStyle:{width:"45%","border-top-left-radius":"3px"}},[e._v("分配给")]),e._v(" "),i("td",{staticStyle:{width:"35%"}},[e._v("占比 (%)")]),e._v(" "),i("td",{staticStyle:{width:"20%"}},[e._v("操作")])])]),e._v(" "),i("tbody",e._l(e.OptionTearmProportion,function(t,a){return i("tr",{key:t.AccountName,staticStyle:{"text-align":"center"}},[i("td",[i("el-cascader",{attrs:{filterable:"",size:"small",filterable:"",clearable:"",options:e.TearmList,"show-all-levels":!1,props:e.UserProps},model:{value:t.ObjectID,callback:function(e){t.ObjectID=e},expression:"parentItem.ObjectID"}})],1),e._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.Weight,callback:function(e){t.Weight=e},expression:"parentItem.Weight"}})],1),e._v(" "),i("td",{staticClass:"clues-newusers-table",staticStyle:{"text-align":"center",width:"80px"}},[i("a",{staticClass:"newuser-add",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onAddProportion(0)}}}),e._v(" "),e.removeProprtionOneIcon?i("a",{staticClass:"newuser-remove",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onRemoveProportion(a,0)}}}):e._e()])])}))])]),e._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[e.unlocking("Distribution_TeamRule_Save")?i("el-button",{staticStyle:{width:"70px"},attrs:{size:"small",type:"primary"},on:{click:function(t){t.stopPropagation(),e.submitForm(0)}}},[e._v("保存\n                        ")]):e._e(),e._v(" "),e.unlocking("Distribution_TeamRule_Delete")?i("el-button",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{click:e.onCloseRule}},[e._v("关闭\n                        ")]):e._e()],1)])],1)]),e._v(" "),i("el-tab-pane",{attrs:{label:"个人",name:"2"}},[i("div",[i("el-row",[i("el-form-item",{attrs:{label:"分配器名称"}},[i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"tigRed"},[e._v("*")]),e._v(" "),i("el-input",{attrs:{size:"small"},model:{value:e.personRuleName,callback:function(t){e.personRuleName=t},expression:"personRuleName"}})],1)])],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"适用项目"}},[i("div",{staticStyle:{display:"flex"}},[i("span",{staticClass:"tigRed"},[e._v("*")]),e._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",size:"small",placeholder:"请选择"},model:{value:e.personCourseType,callback:function(t){e.personCourseType=t},expression:"personCourseType"}},e._l(e.optionProject,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}))],1)])],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"适用团队",prop:"CourseType"}},[i("span",{staticClass:"tigRed"},[e._v("*")]),e._v(" "),i("div",{staticStyle:{position:"relative",width:"80%",display:"inline-block"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.tearmTreeName,expression:"tearmTreeName"}],staticClass:"el-input__inner",staticStyle:{height:"30px","line-height":"30px"},attrs:{size:"small"},domProps:{value:e.tearmTreeName},on:{click:e.DisplayTearmTree,input:function(t){t.target.composing||(e.tearmTreeName=t.target.value)}}}),e._v(" "),i("div",{staticStyle:{width:"260px",position:"absolute",height:"auto","z-index":"999"},on:{mouseleave:e.HideAll}},[i("el-tree",{directives:[{name:"show",rawName:"v-show",value:e.isTeamDisplayTree,expression:"isTeamDisplayTree"}],ref:"treeTearm",staticClass:"TearmTree",staticStyle:{position:"relative",bottom:"4px",width:"260px","max-height":"200px",overflow:"auto"},attrs:{"check-strictly":!0,"show-checkbox":!1,data:e.TearmList,"default-checked-keys":e.tearmRibit,"node-key":"Id",props:e.UserProps,"highlight-current":!0},on:{"node-click":e.treeTearmChange}})],1)])])],1),e._v(" "),i("el-row",[i("el-form-item",{attrs:{label:"状态"}},[i("el-radio-group",{model:{value:e.personDeleted,callback:function(t){e.personDeleted=t},expression:"personDeleted"}},e._l(e.OptionStatu,function(t){return i("el-radio",{key:t.Id,attrs:{label:t.Id}},[e._v("\n                                "+e._s(t.Name)+"\n                            ")])}))],1)],1),e._v(" "),i("el-row",[i("div",{staticStyle:{margin:"15px 0 25px"}},[i("table",{staticClass:"ProportionTable",attrs:{cellspacing:"0",cellpadding:"0"}},[i("thead",[i("tr",{staticClass:"rule-configuration-thead"},[i("td",{staticStyle:{width:"24%","border-top-left-radius":"3px"}},[e._v("分配类型")]),e._v(" "),i("td",{staticStyle:{width:"28%"}},[e._v("内容")]),e._v(" "),i("td",{staticStyle:{width:"28%"}},[e._v("是否包含")]),e._v(" "),i("td",{staticStyle:{width:"20%"}},[e._v("操作")])])]),e._v(" "),i("tbody",e._l(e.addPrsonRuleType,function(t,a){return i("tr",{key:t.ruleType,staticStyle:{"text-align":"center"}},[i("td",[i("el-select",{attrs:{clearable:"",filterable:"",size:"small",placeholder:"请选择"},on:{change:e.changeAssignedType},model:{value:t.QueryField,callback:function(e){t.QueryField=e},expression:"item.QueryField"}},e._l(e.OptionAssignedType,function(e){return i("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})}))],1),e._v(" "),i("td",[1===t.QueryField?i("el-select",{staticClass:"tracking-text-font",staticStyle:{width:"80%"},attrs:{filterable:"",multiple:"",size:"small",placeholder:"请选择"},model:{value:t.FieldValue,callback:function(e){t.FieldValue=e},expression:"item.FieldValue"}},e._l(e.Optionprovice,function(e){return i("el-option",{key:e.IdentityGuid,attrs:{label:e.Name,value:e.IdentityGuid}})})):e._e(),e._v(" "),2===t.QueryField?i("Gtree",{ref:"gtree",refInFor:!0,attrs:{data:e.cityData,index:a,value:t.sourceId,onCheck:e.getAreaTrees,placeholder:"请选择城市"}}):e._e(),e._v(" "),5===t.QueryField?i("Gtree",{ref:"gtree",refInFor:!0,attrs:{data:e.sourceData,index:a,value:t.sourceId,onCheck:e.getchannelsTrees,placeholder:"请选择客户来源"}}):e._e(),e._v(" "),3===t.QueryField?i("span",[e._v("————")]):e._e()],1),e._v(" "),i("td",[i("el-radio-group",{model:{value:t.IsContain,callback:function(e){t.IsContain=e},expression:"item.IsContain"}},[i("el-radio",{staticClass:"radio",attrs:{label:"1"}},[e._v("包含")]),e._v(" "),i("el-radio",{staticClass:"radio",attrs:{label:"2"}},[e._v("排除")])],1)],1),e._v(" "),i("td",{staticClass:"clues-newusers-table",staticStyle:{"text-align":"center",width:"80px"}},[i("a",{staticClass:"newuser-add",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onAddRuleType(1)}}}),e._v(" "),e.removeTypeTwoIcon?i("a",{staticClass:"newuser-remove",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onRemovRuleType(a,1)}}}):e._e()])])}))])]),e._v(" "),i("div",[i("table",{staticClass:"ProportionTable",attrs:{cellspacing:"0",cellpadding:"0"}},[i("thead",[i("tr",{staticStyle:{"text-align":"center","font-size":"14px"}},[i("td",{staticStyle:{width:"30%"}},[e._v("分配给")]),e._v(" "),i("td",{staticStyle:{width:"18%"}},[e._v("占比 (%)")]),e._v(" "),i("td",{staticStyle:{width:"18%"}},[e._v("当日上限")]),e._v(" "),i("td",{staticStyle:{width:"18%"}},[e._v("当日总上限")]),e._v(" "),i("td",{staticStyle:{width:"16%"}},[e._v("操作")])])]),e._v(" "),i("tbody",e._l(e.OptionPersonProportion,function(t,a){return i("tr",{key:t.ObjectID,staticStyle:{"text-align":"center"}},[i("td",[i("el-cascader",{attrs:{size:"small",filterable:"",options:e.UserIdList,"show-all-levels":!1,props:e.UserProps},model:{value:t.ObjectID,callback:function(e){t.ObjectID=e},expression:"parentItem.ObjectID"}})],1),e._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.Weight,callback:function(e){t.Weight=e},expression:"parentItem.Weight"}})],1),e._v(" "),i("td",{staticStyle:{"text-align":"center"}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small"},model:{value:t.dayLimit,callback:function(e){t.dayLimit=e},expression:"parentItem.dayLimit"}})],1),e._v(" "),i("td",{staticStyle:{"text-align":"center",width:"20%"}},[i("el-input",{staticStyle:{width:"80%"},attrs:{size:"small"},model:{value:t.TotalLimit,callback:function(e){t.TotalLimit=e},expression:"parentItem.TotalLimit"}})],1),e._v(" "),i("td",{staticClass:"clues-newusers-table",staticStyle:{"text-align":"center",width:"80px"}},[i("a",{staticClass:"newuser-add",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onAddProportion(1)}}}),e._v(" "),e.removeProprtionTwoIcon?i("a",{staticClass:"newuser-remove",attrs:{href:"javascript:void(0)"},on:{click:function(t){e.onRemoveProportion(a,1)}}}):e._e()])])}))])]),e._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[e.unlocking("Distribution_TeamRule_Save")?i("el-button",{staticStyle:{width:"70px"},attrs:{size:"small",type:"primary"},on:{click:function(t){t.stopPropagation(),e.submitForm(1)}}},[e._v("保存\n                        ")]):e._e(),e._v(" "),e.unlocking("Distribution_TeamRule_Delete")?i("el-button",{staticStyle:{width:"70px"},attrs:{size:"small"},on:{click:e.onCloseRule}},[e._v("关闭\n                        ")]):e._e()],1)])],1)])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},891:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clues-search-tree"},[i("div",{staticClass:"tree-wrapper",on:{click:function(t){t.stopPropagation(),e.onTriggerTree(t)}}},[i("div",{staticStyle:{position:"relative"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.isRemove,expression:"isRemove"}],staticClass:"tree-circle-close el-icon-circle-close",on:{click:function(t){t.stopPropagation(),e.resetChecked(t)}}}),e._v(" "),i("el-input",{staticClass:"tree-input-disabled",attrs:{placeholder:"请选择",disabled:!0,title:e.treeUserName},model:{value:e.treeUserName,callback:function(t){e.treeUserName=t},expression:"treeUserName"}})],1),e._v(" "),e.showTree?e._e():i("div",{staticClass:"tree-box"},[i("div",{staticStyle:{width:"100%",position:"relative"}},[i("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:e.getUserData,"empty-text":"加载中...",props:e.defaultProps,"node-key":"id","show-checkbox":"",accordion:"","filter-node-method":e.filterNode,"highlight-current":!0},on:{"check-change":e.checkChangeTree}}),e._v(" "),i("input",{staticClass:"search-text",attrs:{size:"small",placeholder:"输入关键字进行过滤"},domProps:{value:e.currentValue},on:{input:e.handleInput}})],1)])])])},staticRenderFns:[]},e.exports.render._withStripped=!0},911:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clues-user-tree tree-wrapper",on:{click:function(t){t.stopPropagation(),e.valClick(t)}}},[i("div",{staticStyle:{position:"relative"}},[i("i",{directives:[{name:"show",rawName:"v-show",value:e.isRemove,expression:"isRemove"}],staticClass:"tree-circle-close el-icon-circle-close",on:{click:function(t){t.stopPropagation(),e.resetChecked(t)}}}),e._v(" "),i("el-input",{staticClass:"tree-input-disabled",style:{width:e.width},attrs:{type:"text",size:"small",placeholder:e.placeholder?e.placeholder:"请选择",title:e.treeUserName,disabled:!0},model:{value:e.treeUserName,callback:function(t){e.treeUserName=t},expression:"treeUserName"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"ztree-control",style:{minWidth:e.width}},[i("div",{staticClass:"z-tree-body"},[i("ul",{staticClass:"ztree",attrs:{id:e.controlId}})]),e._v(" "),i("div",[i("el-input",{staticClass:"form-control txt-user-filter search-text",staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"输入关键字进行过滤",type:"text",value:e.currentValue},on:{input:e.handleInput}})],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},959:function(e,t){},970:function(e,t){},971:function(e,t){},988:function(e,t){},989:function(e,t){}});