/*! Gaodun modified this file at 2018-3-27 17:54:14 */
webpackJsonp([16],{257:function(e,t,n){function r(e){o||(n(692),n(693))}var o=!1,a=n(39)(n(622),n(657),r,null,null);a.options.__file="C:\\www\\resource-common\\zeus-console.gaodun.com\\src\\js\\containers\\Home.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] Home.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},622:function(e,t,n){var r,o;r=[e,t,n(51),n(130),n(129),n(50),n(133),n(230),n(16),n(40),n(134),n(62),n(232)],void 0!==(o=function(e,t,n,r,o,a,s,i,u,c,l,d,f){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var m=p(n),h=p(r),v=p(o),_=(0,c.getEnv)();t.default={data:function(){return{dialogFormVisible:!1,isRest:!1,ruleForm:{Account:"",Password:"",checked:""},loading:!1,loginFlag:!0,checkTokenTimer:""}},created:function(){var e=this;return(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.userInfo=JSON.parse(localStorage.getItem(u.SAAS_USER_INFO)),e.getCurrentUserMenuTree(),n=6e4,r=30,e.checkTokenTimer=setInterval(function(){e.checkToken(r)&&e.Refeshtoken2Accesstoken()},n);case 5:case"end":return t.stop()}},t,e)}))()},computed:{menu:function(){return JSON.parse(localStorage.getItem("SAAS_MENU"))},TrueName:function(){return this.userInfo&&this.userInfo.TrueName},CardImgUrl:function(){return this.userInfo&&this.userInfo.CardImgUrl}},methods:{Refeshtoken2Accesstoken:function(){var e=this;return(0,v.default)(h.default.mark(function t(){var n,r,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,a.getCookie)(u.SAAS_REFRESH_TOKEN)){e.next=3;break}return e.abrupt("return");case 3:return r={refreshtoken:n,appid:l.appid},e.next=6,(0,s.getAccessToken)(r);case 6:o=e.sent,0==o.status&&(0,a.setCookie)(u.SAAS_TOKEN,o.result);case 8:case"end":return e.stop()}},t,e)}))()},checkToken:function(e){var t=(0,a.getCookie)(u.SAAS_TOKEN),n=t.split(".")[1],r=JSON.parse(f.Base64.decode(n)),o=r.exp,s=(new Date).getTime();return parseInt(o)-parseInt(s/1e3)<=60*e},clickRouter:function(e){if(!e.isAuth)return void this.stopHalt();for(var t in this.menu)if(e.NavigationId==this.menu[t].NavigationId){if(180302==this.menu[t].Path)switch(this.menu[t].Url){case"tiku":this.openTiku();break;default:console.log(this.menu[t].Url),window.open(this.menu[t].Url)}else this.updateCurrentMenu(this.menu[t]);return}},openTiku:function(){var e=(0,a.getCookie)(u.SAAS_TOKEN),t=(0,a.getCookie)(_+"GDSID"),n=localStorage.getItem(u.SAAS_USER_NAME);n=JSON.parse(n);var r={session_id:t,username:n};$.ajax({url:(0,c.getBaseUrl)()+"apigateway.gaodun.com/saas-service/tiku",type:"POST",async:!1,data:r,headers:{Authentication:"Basic "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",beforeSend:function(e){},success:function(e,t,n){if(e&&e.status>553649e3&&e.status<563649999)return localStorage.clear(),location.href="/#/login",void location.reload();0==e.status&&window.open(e.result)},error:function(e,t){},complete:function(){}})},checkRouterPath:function(e){for(var t in e)if(e[t].isAuth){if(!e[t].ChildNavigations)return e[t].Url;if(e[t].ChildNavigations)return this.checkRouterPath(e[t].ChildNavigations)}},updateCurrentMenu:function(e){var t=this;if(e.ChildNavigations){var n=e.ChildNavigations,r=this.checkRouterPath(n),o=r;this.$router.push({path:r}),setTimeout(function(){t.$store.dispatch("updateCurrentTabId",o)},0)}else this.afterFunction()},afterFunction:function(){this.$message({message:"后续功能正在开发中~~"})},stopHalt:function(){this.$message({message:"您暂未开通权限！"})},handleCommands:function(e){var t=this;return(0,v.default)(h.default.mark(function n(){var r,o,i,d;return h.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=(0,c.getEnv)(),"logout"!=e){n.next=9;break}return o={appid:l.appid,token:(0,a.getCookie)(u.SAAS_TOKEN)},n.next=5,(0,s.userLogout)(o);case 5:i=n.sent,0==i.status&&(d=new Date,d.setTime(d.getTime()-1),(0,a.setCookie)(u.SAAS_TOKEN,void 0,{expires:d}),(0,a.setCookie)(u.SAAS_REFRESH_TOKEN,void 0,{expires:d}),(0,a.setCookie)(r+"GDSID",void 0,{expires:d}),localStorage.clear(),t.$store.state.navigation.currentLevelOneId=9,t.$router.push({path:"/login"})),n.next=10;break;case 9:case 10:case"end":return n.stop()}},n,t)}))()},getCurrentUserMenuTree:function(){var e=this;return(0,v.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=(0,a.getCookie)(_+"GDSID"),t.next=3,(0,s.getCurrentUserMenuTree)({appId:l.appid,GDSID:n});case 3:r=t.sent,0===r.status&&(e.reWriteEmptyUrl(r.result.Tpo_Sys_Navigations),localStorage.setItem(u.SAAS_MENU,(0,m.default)(r.result.Tpo_Sys_Navigations)),localStorage.setItem(u.SAAS_USER_FUNCTIONS,(0,m.default)(r.result.Tpo_sys_Functions)));case 5:case"end":return t.stop()}},t,e)}))()},reWriteEmptyUrl:function(e){for(var t in e)""===e[t].Url&&(e[t].Url=Math.random().toString()),e[t].Url.indexOf("Report")>-1&&(e[t].Url=e[t].Url.replace(/http.*key=/,"/Report/")),e[t].ChildNavigations&&this.reWriteEmptyUrl(e[t].ChildNavigations)}},mounted:function(){localStorage.removeItem(u.FORMAT_MENU),localStorage.removeItem(u.SAAS_CURRENT_MENU),localStorage.removeItem(u.SAAS_CURRENT_SUBMENU),localStorage.removeItem(u.SAAS_CURRENT_LEVEL_ONE_MENU),localStorage.removeItem(u.SAAS_CURRENT_LEVEL_TOP_MENU)},beforeDestroy:function(){clearInterval(this.checkTokenTimer)}},e.exports=t.default}.apply(t,r))&&(e.exports=o)},657:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"header"},[n("div",{staticClass:"w_1200 clear",staticStyle:{"max-width":"1200px",width:"100%"}},[n("a",{staticClass:"logo left",attrs:{href:"javascript:;"}}),e._v(" "),n("div",{staticClass:"user right"},[n("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommands}},[n("span",{staticClass:"el-dropdown-link-2"},[e.CardImgUrl?n("img",{staticClass:"user_icon",attrs:{src:e.CardImgUrl,alt:"头像"}}):e._e(),e._v(" "),n("span",{staticClass:"user_name"},[e._v(e._s(e.TrueName))]),e._v(" "),n("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1)])]),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"contentHome"},[n("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[n("ul",{staticClass:"console-menu clear"},e._l(e.menu,function(t,r){return n("li",{key:t.NavigationId,staticClass:"console-menu-items",on:{click:function(n){e.clickRouter(t)}}},[n("span",{staticClass:"item-icon",attrs:{id:t.Iconurl}}),e._v(" "),n("span",{staticClass:"item-title"},[e._v(e._s(t.Title))])])}))])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"banner"},[n("div",{staticClass:"w_1200"},[n("h3",{staticClass:"banner_titt"},[e._v("高顿教育-财经云")]),e._v(" "),n("h4",{staticClass:"banner_titb"},[e._v("提供教学活动和教育资源管理、分析的一体化解决方案")])])])}]},e.exports.render._withStripped=!0},692:function(e,t){},693:function(e,t){}});