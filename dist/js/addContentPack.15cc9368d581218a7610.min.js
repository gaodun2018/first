/*! liulibiao modified this file at 2017-12-11 14:55:17 */
webpackJsonp([69],{665:function(e,t,a){function o(e){r||a(688)}var r=!1,s=a(53)(a(672),a(685),o,null,null);s.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/product/AddContentPack.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] AddContentPack.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},672:function(e,t,a){var o,r;o=[e,t,a(5),a(8),a(210),a(131),a(21),a(41)],void 0!==(r=function(e,t,a,o,r,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(a);t.default={props:["postProductPackageID","self","modal","showsubimt","searchprm","isShowSearch","selectRow"],name:"addContentPack",data:function(){return{form:{ProductPackageID:"",ProductPackageName:"",ProductPackageNo:"",ProductPackageModule:"",PPStartDate:"",PPEndDate:"",TeachingType:"",TeachingPlace:"",TeachingPalceCode:"",CourseType:"",CourseSubType:"",Period:"",SellPrise:"",OnlySell:"",ProductStatus:"",CreatBy:"",UserAgreementID:1,term:"",erpClassNo:""},Datafrom:{getProductTypeList:[],getProductModuleList:[],getProductCourseSubType:[],getProductCourseType:[],getTeachingPlace:[],GetTree:[],CourseProps:{value:"ProductID",label:"ProductName",children:"ChildrenList"}},propList:{},rules:{ProductPackageName:[{required:!0,message:"课程产品包名称不能为空",trigger:"blur"}],TeachingType:[{required:!0,message:"产品包类型不能为空",trigger:"change"}],PPStartDate:[{required:!0,message:"",trigger:"change"}],PPEndDate:[{required:!0,message:"",trigger:"change"}],ProductPackageModule:[{required:!0,message:"所属模块不能为空",trigger:"change"}],CourseType:[{required:!0,message:"所属项目不能为空",trigger:"change"}],SellPrise:[{required:!0,message:"价格不能为空",trigger:"blur"}],TeachingPlace:[{required:!0,message:"课程性质不能为空",trigger:"change"}]},formLabelWidth:"120px",ishowProduct:!1}},computed:{},methods:{onsubmit:function(){this.subitProduct(!0)},oncancel:function(){this.modal.close()},onsave:function(e){this.subitProduct(!1)},subitProduct:function(e){var t=this;if(!this.formValite())return!1;var a=this.form,o=Date.parse(a.PPStartDate),i=Date.parse(a.PPEndDate);a.PPStartDate=(0,s.number2DateTime)(o,"yyyy-MM-dd HH:mm:ss"),a.PPEndDate=(0,s.number2DateTime)(i,"yyyy-MM-dd HH:mm:ss"),1==e?a.ProductStatus=1000281:""!=this.postProductPackageID&&void 0!=this.postProductPackageID||(a.ProductStatus=1000280),void 0!=this.postProductPackageID&&""!=this.postProductPackageID?(a.ProductPackageID=this.postProductPackageID,(0,r.UpdateProductPackage)(a).then(function(e){0===e.status&&(t.MssageBox("修改产品包成功","success"),t.InitDataList(),t.oncancel())})):(a.OnlySell=1,a.UserAgreementID=1,(0,r.AddProductPackage)(a).then(function(e){0===e.status&&(t.MssageBox("添加产品包成功","success"),t.InitDataList(),t.oncancel())}))},formValite:function(){var e=this.form,t=/(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/,a=/^\+?[1-9][0-9]*$/;return""==e.ProductPackageName?(this.MssageBox("课程产品包名称不能为空","warning"),!1):""==e.TeachingType?(this.MssageBox("产品包类型不能为空","warning"),!1):void 0==e.PPStartDate||""==e.PPStartDate?(this.MssageBox("开始时间不能为空","warning"),!1):void 0==e.PPEndDate||""==e.PPEndDate?(this.MssageBox("结束时间不能为空","warning"),!1):""==e.ProductPackageModule?(this.MssageBox("所属模块不能为空","warning"),!1):""==e.CourseType?(this.MssageBox("所属项目不能为空","warning"),!1):""==e.Period||a.test(e.Period)?""==e.SellPrise||"0"==e.SellPrise?(this.MssageBox("价格不能为空","warning"),!1):t.test(e.SellPrise)?""==e.term||a.test(e.term)?""!=e.TeachingPlace||(this.MssageBox("课程性质不能为空","warning"),!1):(this.MssageBox("周期必须为大于0的正整数","warning"),!1):(this.MssageBox("价格不能出现非法字符","warning"),!1):(this.MssageBox("课时必须为大于0的正整数","warning"),!1)},CourseTypeChange:function(){var e=this;this.form.CourseSubType="",(0,r.GetDictionaryByParentId)({parentId:this.form.CourseType}).then(function(t){0===t.status&&(e.Datafrom.getProductCourseSubType=t.result)})},InitDataList:function(){var e=this;this.isShowSearch||(this.searchprm.Where.ProductStatus=""),(0,r.getProductPackageList)(this.searchprm).then(function(t){0===t.status&&(e.self.$store.state.product.productPackageList=t.result.Body)})},resetForm:function(){this.$refs.ruleFormProduct.resetFields()},showTree:function(){return void 0!=this.postProductPackageID&&""!=this.postProductPackageID},MssageBox:function(e,t){(0,o.Message)({message:e,type:t})},visibleIcon:function(){var e=document.getElementById("product-addPack"),t=e.getElementsByClassName("el-input__icon");if(void 0!=t&&t.length>0)for(var a=0;a<t.length;a++)0==this.showsubimt?t[a].style.display="none":t[a].style.display="block"},renderContent:function(e,t){var a=this,o=t.node,r=t.data,s=t.store;if(null!=o&&null!=o.data){var i=o.data;return this.showsubimt&&1==o.level?e("span",null,[e("span",null,[e("span",null,[i.ProductName])]),e("span",{style:"padding: 0 10px;"},[e("el-button",{attrs:{size:"mini",className:"btndetaiDelete"},on:{click:function(){return a.removeItem(s,r)}}},[e("i",{attrs:{className:"el-icon-delete"}},[]),"删除"])])]):e("span",null,[e("span",null,[e("span",null,[i.ProductName])])])}},removeItem:function(e,t){var a=this;void 0!=this.postProductPackageID&&""!=this.postProductPackageID&&(null!=this.selectRow&&1000281!=this.selectRow.ProductStatus?null!=t&&void 0!=t.PPID&&""!=t.PPID&&(0,r.DeleteProductPackageDetial)({PPDIDList:[t.PPID]}).then(function(e){0===e.status&&(a.MssageBox("删除成功","success"),a.refinsh())}):this.MssageBox("该课程包已启用!不能删除","warning"))},refinsh:function(){var e=this;(0,r.GetProductPackageByID)({ProductPackageID:this.postProductPackageID}).then(function(t){if(0===t.status){e.Datafrom.GetTree=[];for(var a=0;a<t.result.ChildrenList.length;a++)null!=t.result.ChildrenList[a]&&e.Datafrom.GetTree.push(t.result.ChildrenList[a])}})}},mounted:function(){var e=this;this.visibleIcon(),(0,r.GetDictionaryByTypeId)({dicType:10032}).then(function(t){0===t.status&&(e.Datafrom.getProductTypeList=t.result)}),(0,r.GetDictionaryByTypeId)({dicType:10033}).then(function(t){0===t.status&&(e.Datafrom.getProductModuleList=t.result)}),(0,r.GetDictionaryByTypeId)({dicType:10034}).then(function(t){0===t.status&&(e.Datafrom.getTeachingPlace=t.result)}),(0,r.GetDictionaryByTypeId)({dicType:1602}).then(function(t){0===t.status&&(e.Datafrom.getProductCourseType=t.result)}),void 0!=this.postProductPackageID&&null!=this.postProductPackageID&&""!=this.postProductPackageID?(0,r.GetProductPackageByID)({ProductPackageID:this.postProductPackageID}).then(function(t){if(0===t.status){var a=t.result;e.form.ProductPackageName=a.ProductPackageName,e.form.ProductPackageNo=a.ProductPackageNo,e.form.TeachingType=a.TeachingType.toString(),e.form.PPStartDate=a.PPStartDate,e.form.PPEndDate=a.PPEndDate,e.form.ProductPackageModule=a.ProductPackageModule.toString(),e.form.CourseType=a.CourseType.toString(),setTimeout(function(){e.CourseTypeChange(),e.form.CourseSubType=a.CourseSubType.toString()},100),e.form.Period=a.Period,e.form.SellPrise=a.SellPrise,e.form.TeachingPlace=a.TeachingPlace.toString(),e.form.term=a.term,e.form.ProductStatus=a.ProductStatus,e.Datafrom.GetTree=[];for(var o=0;o<a.ChildrenList.length;o++)null!=a.ChildrenList[o]&&e.Datafrom.GetTree.push(a.ChildrenList[o]);e.ishowProduct=!0,e.form.erpClassNo=a.erpClassNo}}):this.ishowProduct=!1}},e.exports=t.default}.apply(t,o))&&(e.exports=r)},685:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"addContent addPack",staticStyle:{position:"relative",bottom:"3px"},attrs:{id:"product-addPack"}},[this.ishowProduct?a("div",{staticStyle:{"text-align":"right","padding-bottom":"10px"}},[a("label",[e._v(" 产品包明细")])]):e._e(),e._v(" "),a("el-row",[a("el-col",{attrs:{span:this.ishowProduct&&"12"}},[a("el-form",{ref:"form",staticStyle:{position:"relative",height:"420px",overflow:"auto"},attrs:{model:e.form,rules:e.rules}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!this.showsubimt,expression:"this.showsubimt?false:true"}],staticStyle:{position:"absolute",width:"100%","z-index":"100",height:"100%"}}),e._v(" "),a("el-form-item",{attrs:{label:"产品包名称","label-width":e.formLabelWidth,prop:"ProductPackageName"}},[a("el-input",{attrs:{"auto-complete":"off",size:"mini"},model:{value:e.form.ProductPackageName,callback:function(t){e.form.ProductPackageName=t},expression:"form.ProductPackageName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"产品包类型","label-width":e.formLabelWidth,prop:"TeachingType"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","auto-complete":"off",size:"mini"},model:{value:e.form.TeachingType,callback:function(t){e.form.TeachingType=t},expression:"form.TeachingType"}},e._l(e.Datafrom.getProductTypeList,function(e){return a("el-option",{key:e.Id,attrs:{value:e.Id,label:e.Name}})}))],1),e._v(" "),a("el-form-item",{staticClass:"Norequired table-11",attrs:{label:"开始日期","label-width":e.formLabelWidth,prop:"PPStartDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","auto-complete":"off",placeholder:"开始日期"},model:{value:e.form.PPStartDate,callback:function(t){e.form.PPStartDate=t},expression:"form.PPStartDate"}})],1),e._v(" "),a("el-form-item",{staticClass:"Norequired table-11",attrs:{label:" 结束日期","label-width":e.formLabelWidth,prop:"PPEndDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","auto-complete":"off",placeholder:"结束时间"},model:{value:e.form.PPEndDate,callback:function(t){e.form.PPEndDate=t},expression:"form.PPEndDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属模块(职业)","label-width":e.formLabelWidth,prop:"ProductPackageModule"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","auto-complete":"off",size:"mini"},model:{value:e.form.ProductPackageModule,callback:function(t){e.form.ProductPackageModule=t},expression:"form.ProductPackageModule"}},e._l(this.Datafrom.getProductModuleList,function(e){return a("el-option",{key:e.Id,attrs:{value:e.Id,label:e.Name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"所属项目","label-width":e.formLabelWidth,prop:"CourseType"}},[a("el-select",{attrs:{placeholder:"请选择",filterable:"","auto-complete":"off",size:"mini"},on:{change:e.CourseTypeChange},model:{value:e.form.CourseType,callback:function(t){e.form.CourseType=t},expression:"form.CourseType"}},e._l(e.Datafrom.getProductCourseType,function(e){return a("el-option",{key:e.Id,attrs:{value:e.Id,label:e.Name}})}))],1),e._v(" "),a("el-form-item",{staticClass:"Norequired",attrs:{label:"所属科目","label-width":e.formLabelWidth,prop:"CourseSubType"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","auto-complete":"off",size:"mini"},model:{value:e.form.CourseSubType,callback:function(t){e.form.CourseSubType=t},expression:"form.CourseSubType"}},e._l(e.Datafrom.getProductCourseSubType,function(e){return a("el-option",{key:e.Id,attrs:{value:e.Id,label:e.Name}})}))],1),e._v(" "),a("el-form-item",{staticClass:"Norequired",attrs:{label:"课时","label-width":e.formLabelWidth,prop:"Period"}},[a("el-input",{attrs:{"auto-complete":"off",size:"mini"},model:{value:e.form.Period,callback:function(t){e.form.Period=t},expression:"form.Period"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"价格","label-width":e.formLabelWidth,prop:"SellPrise"}},[a("el-input",{attrs:{"auto-complete":"off",size:"mini"},model:{value:e.form.SellPrise,callback:function(t){e.form.SellPrise=t},expression:"form.SellPrise"}})],1),e._v(" "),a("el-form-item",{staticClass:"Norequired",attrs:{label:"周期 (月)","label-width":e.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off",size:"mini"},model:{value:e.form.term,callback:function(t){e.form.term=t},expression:"form.term"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"课程性质","label-width":e.formLabelWidth,prop:"TeachingPlace"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择",size:"mini"},model:{value:e.form.TeachingPlace,callback:function(t){e.form.TeachingPlace=t},expression:"form.TeachingPlace"}},e._l(e.Datafrom.getTeachingPlace,function(e){return a("el-option",{key:e.Id,attrs:{value:e.Id,label:e.Name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"ERP课程码","label-width":e.formLabelWidth,prop:"erpClassNo"}},[a("el-input",{attrs:{"auto-complete":"off",size:"mini"},model:{value:e.form.erpClassNo,callback:function(t){e.form.erpClassNo=t},expression:"form.erpClassNo"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",staticStyle:{"margin-top":"15px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.showsubimt,expression:"this.showsubimt"}],attrs:{type:"primary",size:"small"},on:{click:e.onsave}},[e._v("保存")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.showsubimt,expression:"this.showsubimt"}],attrs:{type:"primary",size:"small"},on:{click:e.onsubmit}},[e._v("保存并启用")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.showsubimt,expression:"this.showsubimt"}],staticStyle:{background:"#FAFAFA","border-color":"#8C9AAE",color:"#96A2AF"},attrs:{type:"primary",size:"small"},on:{click:e.oncancel}},[e._v("关闭")])],1)],1),e._v(" "),this.ishowProduct?a("el-col",{attrs:{span:12}},[a("el-tree",{ref:"treeCourse",staticStyle:{position:"relative",width:"auto","max-height":"365px",overflow:"auto"},attrs:{"check-strictly":!0,"show-checkbox":!1,data:this.Datafrom.GetTree,"node-key":"ProductID",props:this.Datafrom.CourseProps,"render-content":e.renderContent}})],1):e._e()],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},688:function(e,t){}});