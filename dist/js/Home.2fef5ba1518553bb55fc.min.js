/*! Gaodun modified this file at 2018-3-23 09:28:23 */
webpackJsonp([16],{253:function(e,t,r){function n(e){a||(r(683),r(684))}var a=!1,s=r(38)(r(613),r(648),n,null,null);s.options.__file="C:\\www\\resource-common\\zeus-console.gaodun.com\\src\\js\\containers\\Home.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] Home.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},613:function(e,t,r){var n,a;n=[e,t,r(51),r(129),r(128),r(50),r(132),r(226),r(16),r(39),r(133),r(62),r(228)],void 0!==(a=function(e,t,r,n,a,s,o,i,u,c,l,d,f){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var m=p(r),h=p(n),v=p(a),_=(0,c.getEnv)();t.default={data:function(){return{dialogFormVisible:!1,isRest:!1,ruleForm:{Account:"",Password:"",checked:""},loading:!1,loginFlag:!0,checkTokenTimer:""}},created:function(){var e=this;return(0,v.default)(h.default.mark(function t(){var r,n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.userInfo=JSON.parse(localStorage.getItem(u.SAAS_USER_INFO)),e.getCurrentUserMenuTree(),r=6e4,n=30,e.checkTokenTimer=setInterval(function(){e.checkToken(n)&&e.Refeshtoken2Accesstoken()},r);case 5:case"end":return t.stop()}},t,e)}))()},computed:{menu:function(){return JSON.parse(localStorage.getItem("SAAS_MENU"))},TrueName:function(){return this.userInfo&&this.userInfo.TrueName},CardImgUrl:function(){return this.userInfo&&this.userInfo.CardImgUrl}},methods:{Refeshtoken2Accesstoken:function(){var e=this;return(0,v.default)(h.default.mark(function t(){var r,n,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(0,s.getCookie)(u.SAAS_REFRESH_TOKEN)){e.next=3;break}return e.abrupt("return");case 3:return n={refreshtoken:r,appid:l.appid},e.next=6,(0,o.getAccessToken)(n);case 6:a=e.sent,0==a.status&&(0,s.setCookie)(u.SAAS_TOKEN,a.result);case 8:case"end":return e.stop()}},t,e)}))()},checkToken:function(e){var t=(0,s.getCookie)(u.SAAS_TOKEN),r=t.split(".")[1],n=JSON.parse(f.Base64.decode(r)),a=n.exp,o=(new Date).getTime();return parseInt(a)-parseInt(o/1e3)<=60*e},clickRouter:function(e){if(!e.isAuth)return void this.stopHalt();for(var t in this.menu)if(e.NavigationId==this.menu[t].NavigationId){if(180302==this.menu[t].Path)switch(this.menu[t].Url){case"tiku":this.openTiku();break;default:window.open(this.menu[t].Url)}else this.updateCurrentMenu(this.menu[t]);return}},openTiku:function(){var e=(0,s.getCookie)(u.SAAS_TOKEN),t=(0,s.getCookie)(_+"GDSID"),r=localStorage.getItem(u.SAAS_USER_NAME);r=JSON.parse(r);var n={session_id:t,username:r};$.ajax({url:(0,c.getBaseUrl)()+"apigateway.gaodun.com/saas-service/tiku",type:"POST",async:!1,data:n,headers:{Authentication:"Basic "+e,"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",beforeSend:function(e){},success:function(e,t,r){if(e&&553649409==e.status||553650183==e.status||553649952==e.status||553649434==e.status)return localStorage.clear(),location.href="/#/login",void location.reload();0==e.status&&window.open(e.result)},error:function(e,t){},complete:function(){}})},checkRouterPath:function(e){for(var t in e)if(e[t].isAuth){if(!e[t].ChildNavigations)return e[t].Url;if(e[t].ChildNavigations)return this.checkRouterPath(e[t].ChildNavigations)}},updateCurrentMenu:function(e){var t=this;if(e.ChildNavigations){var r=e.ChildNavigations,n=this.checkRouterPath(r),a=n;this.$router.push({path:n}),setTimeout(function(){t.$store.dispatch("updateCurrentTabId",a)},0)}else this.afterFunction()},afterFunction:function(){this.$message({message:"后续功能正在开发中~~"})},stopHalt:function(){this.$message({message:"您暂未开通权限！"})},handleCommands:function(e){var t=this;return(0,v.default)(h.default.mark(function r(){var n,a,i,d;return h.default.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=(0,c.getEnv)(),"logout"!=e){r.next=9;break}return a={appid:l.appid,token:(0,s.getCookie)(u.SAAS_TOKEN)},r.next=5,(0,o.userLogout)(a);case 5:i=r.sent,0==i.status&&(d=new Date,d.setTime(d.getTime()-1),(0,s.setCookie)(u.SAAS_TOKEN,void 0,{expires:d}),(0,s.setCookie)(u.SAAS_REFRESH_TOKEN,void 0,{expires:d}),(0,s.setCookie)(n+"GDSID",void 0,{expires:d}),localStorage.clear(),t.$store.state.navigation.currentLevelOneId=9,t.$router.push({path:"/login"})),r.next=10;break;case 9:case 10:case"end":return r.stop()}},r,t)}))()},getCurrentUserMenuTree:function(){var e=this;return(0,v.default)(h.default.mark(function t(){var r,n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,s.getCookie)(_+"GDSID"),t.next=3,(0,o.getCurrentUserMenuTree)({appId:l.appid,GDSID:r});case 3:n=t.sent,0===n.status&&(e.reWriteEmptyUrl(n.result.Tpo_Sys_Navigations),localStorage.setItem(u.SAAS_MENU,(0,m.default)(n.result.Tpo_Sys_Navigations)),localStorage.setItem(u.SAAS_USER_FUNCTIONS,(0,m.default)(n.result.Tpo_sys_Functions)));case 5:case"end":return t.stop()}},t,e)}))()},reWriteEmptyUrl:function(e){for(var t in e)""===e[t].Url&&(e[t].Url=Math.random().toString()),e[t].Url.indexOf("Report")>-1&&(e[t].Url=e[t].Url.replace(/http.*key=/,"/Report/")),e[t].ChildNavigations&&this.reWriteEmptyUrl(e[t].ChildNavigations)}},mounted:function(){localStorage.removeItem(u.FORMAT_MENU),localStorage.removeItem(u.SAAS_CURRENT_MENU),localStorage.removeItem(u.SAAS_CURRENT_SUBMENU),localStorage.removeItem(u.SAAS_CURRENT_LEVEL_ONE_MENU),localStorage.removeItem(u.SAAS_CURRENT_LEVEL_TOP_MENU)},beforeDestroy:function(){clearInterval(this.checkTokenTimer)}},e.exports=t.default}.apply(t,n))&&(e.exports=a)},648:function(e,t,r){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"home"},[r("div",{staticClass:"header"},[r("div",{staticClass:"w_1200 clear",staticStyle:{"max-width":"1200px",width:"100%"}},[r("a",{staticClass:"logo left",attrs:{href:"javascript:;"}}),e._v(" "),r("div",{staticClass:"user right"},[r("el-dropdown",{attrs:{trigger:"hover"},on:{command:e.handleCommands}},[r("span",{staticClass:"el-dropdown-link-2"},[e.CardImgUrl?r("img",{staticClass:"user_icon",attrs:{src:e.CardImgUrl,alt:"头像"}}):e._e(),e._v(" "),r("span",{staticClass:"user_name"},[e._v(e._s(e.TrueName))]),e._v(" "),r("i",{staticClass:"el-icon-caret-bottom el-icon--right"})]),e._v(" "),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1)])]),e._v(" "),e._m(0),e._v(" "),r("div",{staticClass:"contentHome"},[r("transition",{attrs:{name:"fade",mode:"out-in",appear:""}},[r("ul",{staticClass:"console-menu clear"},e._l(e.menu,function(t,n){return r("li",{key:t.NavigationId,staticClass:"console-menu-items",on:{click:function(r){e.clickRouter(t)}}},[r("span",{staticClass:"item-icon",attrs:{id:t.Iconurl}}),e._v(" "),r("span",{staticClass:"item-title"},[e._v(e._s(t.Title))])])}))])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"banner"},[r("div",{staticClass:"w_1200"},[r("h3",{staticClass:"banner_titt"},[e._v("高顿教育-财经云")]),e._v(" "),r("h4",{staticClass:"banner_titb"},[e._v("提供教学活动和教育资源管理、分析的一体化解决方案")])])])}]},e.exports.render._withStripped=!0},683:function(e,t){},684:function(e,t){}});