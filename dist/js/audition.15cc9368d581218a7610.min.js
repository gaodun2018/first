/*! liulibiao modified this file at 2017-12-11 14:55:17 */
webpackJsonp([72],{215:function(e,t,a){function s(e){i||a(689)}var i=!1,n=a(53)(a(670),a(686),s,null,null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/cluesManage/CluesInvitationAudition.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] CluesInvitationAudition.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},670:function(e,t,a){var s,i;s=[e,t,a(5),a(41),a(131),a(634),a(87),a(88),a(132),a(21),a(8),a(613)],void 0!==(i=function(e,t,s,i,n,o,r,l,c,h,u,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var v=(p(s),p(c)),m=p(d);t.default={name:"vitationIndex",components:{Tree:m.default},data:function(){return{currIndex:-1,phoneDisabled:!1,showPhone:"号码读取中",SearchKey:"",searchStatus:"",searchUid:[],searchType:"",searchTime:[new Date,new Date],searchisAll:"All",useName:"",checkTimevalue:"today",isShowTree:!1,isCollapse:!1,UserName:"",isSelect:!1,pageSize:10,currentPage:1,quickSearchType:1,listenSeachType:[{type:"学生姓名",name:"OrderNo"},{type:"试听单号",name:"StudentName"},{type:"手机",name:"ClueNo"}],AppointmentCount:0,CancelCount:0,ArrivedCount:0,NotArrivedCount:0,DepartUseProps:{value:"Id",label:"Name",children:"ChildrenList"}}},methods:{handleCurrentChange:function(e){this.currentPage=e,this.GetDataList()},handleSizeChange:function(e){this.pageSize=e,this.GetDataList()},userAllSelected:function(){this.onSearch()},listenTree:function(e){this.searchUid=e},callTooltip:function(e){e!=this.currIndex&&(this.currIndex=e,this.phoneDisabled=!1)},showCallTip:function(e,t){var a=this;t[e].stuPhone.indexOf("*")>-1&&this.unlocking("Show_Customer_Phone_ Clear")&&(0,l.GetContactByUid)({phoneType:0,Uid:t[e].Uid,mobile:t[e].stuPhone}).then(function(e){0===e.status&&(a.phoneDisabled=!0,a.showPhone=e.result||"号码有误")})},callUp:function(e,t){(0,n.getCallUp)(this,t[e].Uid,t[e].stuPhone,0)},listenType:function(e){this.quickSearchType=e+1},datePickChange:function(){var e=(0,n.format)(this.searchTime[0]),t=(0,n.format)(this.searchTime[1]),a=t.split(" ");t&&1==a.length&&(t+=" 23:59:59"),this.searchTime=[e,t],this.onSearch()},GetDataList:function(){var e="",t="";void 0!=this.searchTime&&this.searchTime.length>0&&(e=(0,n.format)(this.searchTime[0]),t=(0,n.format)(this.searchTime[1]),this.searchisAll="");var a={Where:{LIStatus:this.searchStatus,uidList:this.searchUid,LItype:this.searchType,startTime:e,endTime:t,isAll:this.searchisAll,SearchKey:this.SearchKey},PageIndex:this.currentPage,PageSize:this.pageSize,OrderBy:"",SortCol:""};this.$store.dispatch("GetListenListData",a)},getDatePart:function(e){return e?((0,n.format)(e)+"").split(" ")[0]:""},UidNodeChange:function(e,t,a){null!=t&&0==t.childNodes.length&&(this.searchUid=[e.Id],this.useName=e.Name,this.onSearch())},onSearch:function(){this.GetDataList(),this.SearchCount()},onFocusType:function(){this.isSelect=!0},onBlurType:function(){var e=this;setTimeout(function(){e.isSelect=!1},500)},UpdateVitation:function(e,t){var s=this,i="",o="";void 0!=this.searchTime&&this.searchTime.length>0&&(i=(0,n.format)(this.searchTime[0]),o=(0,n.format)(this.searchTime[1]),this.searchisAll="");var r={Where:{LIStatus:this.searchStatus,uidList:this.searchUid,LItype:this.searchType,startTime:i,endTime:o,isAll:this.searchisAll,SearchKey:this.SearchKey},PageIndex:this.currentPage,PageSize:this.pageSize,OrderBy:"",SortCol:""};a.e(55).then(function(e){var i=a(694);v.default.openComponent(i,{title:"重新邀约",showCancelButton:!1,showConfirmButton:!1,width:"500px",self:s,selectRow:t,searchPrm:r,callback:function(e,t){s.GetDataList()}})}.bind(null,a)).catch(a.oe)},SearchKeyList:function(){var e={Where:{ListenInvitationNo:2==this.quickSearchType?this.SearchKey:"",StuName:1==this.quickSearchType?this.SearchKey:"",StuPhone:3==this.quickSearchType?this.SearchKey:"",ClueNo:4==this.quickSearchType?this.SearchKey:""},PageIndex:this.currentPage,PageSize:this.pageSize,OrderBy:"",SortCol:""};this.$store.dispatch("GetListenVagueSeach",e)},SetLiveAdress:function(e,t){var s=this;a.e(71).then(function(e){var i=a(692);v.default.openComponent(i,{title:"直播地址",showCancelButton:!1,width:"500px",showConfirmButton:!1,self:s,selectRow:t})}.bind(null,a)).catch(a.oe)},SendAccount:function(e,t){var s=this;a.e(70).then(function(e){var i=a(693);v.default.openComponent(i,{title:"试听账号",showCancelButton:!1,showConfirmButton:!1,width:"350px",self:s,selectRow:t})}.bind(null,a)).catch(a.oe)},changeTime:function(){var e="",t="",a=new Date,s=a.getDay(),i=a.getDate(),o=a.getMonth(),r=a.getYear();r+=r<2e3?1900:0;var l=new Date(r,o,i-s),c=new Date(r,o,i+(6-s)),h=new Date(r,o,1),u=new Date(r,o,this.getMonthDays(o,r));switch(this.checkTimevalue){case"today":t=(0,n.format)(a)+" 00:00:00",e=(0,n.format)(a)+" 23:59:59";break;case"tswk":t=(0,n.format)(l)+" 00:00:00",e=(0,n.format)(c)+" 23:59:59";break;case"thisMonth":t=(0,n.format)(h)+" 00:00:00",e=(0,n.format)(u)+" 23:59:59"}this.searchTime=[t,e]},getMonthDays:function(e,t){var a=new Date(t,e,1);return(new Date(t,e+1,1)-a)/864e5},showAddress:function(e,t){return null!=t&&"1000470"==t.LItype},MssageBox:function(e,t){(0,u.Message)({message:e,type:t})},CancelListen:function(e,t){var a=this;void 0!=t&&null!=t&&""!=t.ListenInvitationNo&&u.MessageBox.confirm("确定取消当前邀约吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(0,r.ListenCancel)({STno:t.ListenInvitationNo}).then(function(e){0===e.status&&1==e.result&&(a.MssageBox("取消邀约成功","success"),a.GetDataList(),a.SearchCount())})})},SearchCount:function(){var e=this,t="",a="";void 0!=this.searchTime&&this.searchTime.length>0&&(t=(0,n.format)(this.searchTime[0]),a=(0,n.format)(this.searchTime[1]),this.searchisAll="");var s={LIStatus:this.searchStatus,uidList:this.searchUid,LItype:this.searchType,startTime:t,endTime:a,isAll:this.searchisAll,SearchKey:this.SearchKey};(0,r.ListenStatisticsInfo)(s).then(function(t){0===t.status&&(e.AppointmentCount=t.result.AppointmentCount,e.CancelCount=t.result.CancelCount,e.ArrivedCount=t.result.ArrivedCount,e.NotArrivedCount=t.result.NotArrivedCount)})}},computed:{},mounted:function(){var e="",t=localStorage.getItem("CRM_USER_INFO");if(void 0!=t&&null!=t){var a=JSON.parse(t);void 0!=a&&(e=a.UserId),this.UserName=a.TrueName}this.$store.dispatch("GetUidTree",{userId:e}),this.$store.dispatch("GetListeStatuOrType",{dicType:10039}),this.$store.dispatch("GetListeStatuOrType",{dicType:10040}),this.SearchCount(),this.GetDataList()},created:function(){this.userInfo=JSON.parse(localStorage.getItem(h.CRM_USER_INFO))}},e.exports=t.default}.apply(t,s))&&(e.exports=i)},686:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module-clues-content"},[a("el-form",{ref:"form",attrs:{model:e.form}},[a("div",{staticClass:"module-clues-content",staticStyle:{"font-size":"0"}},[a("div",{staticStyle:{float:"left"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"试听状态",clearable:"",size:"small"},on:{change:this.onSearch},model:{value:e.searchStatus,callback:function(t){e.searchStatus=t},expression:"searchStatus"}},e._l(this.$store.state.listen.getListenStatuList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),e._v(" "),a("Tree",{ref:"listenUserTree",staticStyle:{"margin-left":"10px"},attrs:{width:"193px",allSelected:e.userAllSelected,callback:e.listenTree,placeholder:"邀约人"}}),e._v(" "),a("el-select",{staticStyle:{width:"130px","margin-left":"10px"},attrs:{placeholder:"试听类型",clearable:"",size:"small"},on:{change:this.onSearch},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},e._l(this.$store.state.listen.getListenTypeList,function(e){return a("el-option",{key:e.Id,attrs:{label:e.Name,value:e.Id}})})),e._v(" "),a("el-date-picker",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{type:"daterange",clearable:"",placeholder:"邀约日期",size:"small"},on:{change:e.datePickChange},model:{value:e.searchTime,callback:function(t){e.searchTime=t},expression:"searchTime"}})],1),e._v(" "),a("div",{staticClass:"clues-search"},[a("el-input",{staticStyle:{width:"240px",position:"relative","z-index":"100"},attrs:{placeholder:"学生姓名、试听单号、手机",size:"small"},on:{focus:e.onFocusType,blur:e.onBlurType},model:{value:e.SearchKey,callback:function(t){e.SearchKey=t},expression:"SearchKey"}},[a("el-button",{attrs:{icon:"search"},on:{click:e.SearchKeyList},slot:"append"})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isSelect,expression:"isSelect"}],staticClass:"clues-search-select",staticStyle:{width:"240px"}},[a("ul",e._l(e.listenSeachType,function(t,s){return a("li",{key:s,class:{"f-active":e.quickSearchType==s+1},on:{click:function(t){e.listenType(s)}}},[a("span",{staticClass:"search-type-name"},[e._v(e._s(t.type)+" ")]),e._v(" "),a("span",{staticClass:"search-type-text"},[e._v(" "+e._s(e.SearchKey))])])}))])],1)]),e._v(" "),a("div",{staticStyle:{"font-size":"12px",height:"40px","line-height":"45px"}},[a("div",{staticStyle:{width:"45%",float:"left"}},[a("el-radio-group",{on:{change:e.changeTime},model:{value:e.checkTimevalue,callback:function(t){e.checkTimevalue=t},expression:"checkTimevalue"}},[a("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{label:"today"}},[e._v("今日")]),e._v(" "),a("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{label:"tswk"}},[e._v("本周")]),e._v(" "),a("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{label:"thisMonth"}},[e._v("本月")]),e._v(" "),a("el-radio",{attrs:{label:"alltime"}},[e._v("全部时间")])],1)],1),e._v(" "),a("div",{staticStyle:{width:"45%",float:"right","text-align":"right"}},[a("span",[e._v(e._s(this.UserName))]),e._v(" "),a("span",{staticStyle:{color:"#8f9aac"}},[e._v(": "+e._s(this.getDatePart(this.searchTime[0]))+"~"+e._s(this.getDatePart(this.searchTime[1]))+" , ")]),e._v(" "),a("span",[e._v(" 已邀约\n                    "),a("span",{staticStyle:{color:"#f09862"}},[e._v(e._s(this.AppointmentCount))]),e._v(" "),a("span",{staticStyle:{color:"#8f9aac"}},[e._v("人，")])]),e._v(" "),a("span",[e._v("应约\n                    "),a("spna",{staticStyle:{color:"#f09862"}},[e._v(e._s(this.ArrivedCount))]),e._v(" "),a("span",{staticStyle:{color:"#8f9aac"}},[e._v("人，")])],1),e._v(" "),a("span",[e._v(" 未应约\n                    "),a("span",{staticStyle:{color:"#f09862"}},[e._v(e._s(this.NotArrivedCount))]),e._v(" "),a("span",{staticStyle:{color:"#8f9aac"}},[e._v("人，")])]),e._v(" "),a("span",[e._v(" 取消\n                    "),a("span",{staticStyle:{color:"#f09862"}},[e._v(e._s(this.CancelCount))]),e._v(" "),a("span",{staticStyle:{color:"#8f9aac"}},[e._v("次")])])])]),e._v(" "),a("div",{staticClass:"clues-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:this.$store.state.listen.loading,expression:"this.$store.state.listen.loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{border:"",data:this.$store.state.listen.tabledata}},[a("el-table-column",{attrs:{prop:"ListenInvitationNo",label:"试听单号","min-width":"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stuName",label:"学生姓名",fixed:"left","min-width":"125"}}),e._v(" "),a("el-table-column",{attrs:{label:"手机","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{on:{mouseover:function(a){e.callTooltip(t.$index)}}},[a("el-tooltip",{attrs:{disabled:!e.phoneDisabled,content:e.showPhone,placement:"bottom",effect:"light"}},[a("span",{on:{click:function(a){a.stopPropagation(),e.showCallTip(t.$index,e.$store.state.listen.tabledata)}}},[e._v(e._s(t.row.stuPhone))])]),e._v(" "),t.row.stuPhone?a("a",{staticStyle:{"margin-left":"-4px"},attrs:{href:"javascript:void(0)"},on:{click:function(a){e.callUp(t.$index,e.$store.state.listen.tabledata)}}},[a("i",{staticClass:"tracking-phone-icon"})]):a("span",[e._v("--")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"LIStatusName",label:"试听状态","min-width":"115"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",sortable:"",label:"创建时间","min-width":"115"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",sortable:"",label:"开始时间","min-width":"115"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",sortable:"",label:"结束时间","min-width":"115"}}),e._v(" "),a("el-table-column",{attrs:{prop:"LItypeName",sortable:"",label:"邀约类型","min-width":"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"邀约内容","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s("1000470"==t.row.LItype?t.row.LiveRoomTitle:t.row.courseName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createUserName",label:"邀约人","min-width":"125"}}),e._v(" "),e.unlocking(["STList_ReInvite","STList_CancelInvite","STList_LiveAdress","STList_OpenLive","STList_ListenAccount"])?a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作","min-width":"272"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.unlocking("STList_ReInvite")?a("el-button",{attrs:{type:"text",size:"small",disabled:1000481==t.row.LIStatus||!t.row.CanReInvite},on:{click:function(a){e.UpdateVitation(t.$index,t.row)}}},[e._v("重新邀约")]):e._e(),e._v(" "),e.unlocking("STList_CancelInvite")?a("el-button",{attrs:{type:"text",size:"small",disabled:1000481==t.row.LIStatus||!t.row.CanReInvite},on:{click:function(a){e.CancelListen(t.$index,t.row)}}},[e._v("取消邀约")]):e._e(),e._v(" "),e.unlocking("STList_LiveAdress")?a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showAddress(t.$index,t.row),expression:"showAddress(scope.$index, scope.row)"}],staticStyle:{"margin-right":"5px"},attrs:{type:"text",size:"small"},on:{click:function(a){e.SetLiveAdress(t.$index,t.row)}}},[e._v("直播地址")]):e._e(),e._v(" "),e.unlocking("STList_OpenLive")&&"1000470"==t.row.LItype?a("span",{staticClass:"href-right"},[a("a",{style:1000481!==t.row.LIStatus?"color: #20a0ff;font-size: 12px":"color:#bfcbd9;cursor: not-allowed;font-size: 12px",attrs:{target:"_blank",href:1000481!==t.row.LIStatus?[""+t.row.teacherUrl]:"javaScript:void(0)"}},[e._v("开启直播")])]):e._e(),e._v(" "),e.unlocking("STList_ListenAccount")&&"1000471"==t.row.LItype?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.SendAccount(t.$index,t.row)}}},[e._v("试听账号")]):e._e()]}}])}):e._e()],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[10,15,30,50],"page-size":e.pageSize,"current-page":e.currentPage,layout:"total, sizes, prev, pager, next, jumper",total:this.$store.state.listen.totalLength,"page-count":10/e.pageSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},689:function(e,t){}});