webpackJsonp([2],{"2+My":function(e,t){},"9wcH":function(e,t){},Aq6l:function(e,t){},M5jh:function(e,t){},"NW/T":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Xxa5"),n=a.n(s),r=a("exGp"),i=a.n(r),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"240px","label-position":"left",inline:!0}},[a("div",{staticClass:"fromtitle"},[a("i",{staticClass:"titicon"}),e._v(" "),a("span",{staticClass:"tittxt"},[e._v("特殊前导阶段")])]),e._v(" "),a("el-form-item",{staticClass:"first-form-item",attrs:{label:"是否启用特殊前导阶段？"}},[a("el-radio-group",{model:{value:e.ruleForm.bEnabled,callback:function(t){e.$set(e.ruleForm,"bEnabled",t)},expression:"ruleForm.bEnabled"}},[a("el-radio",{attrs:{label:"0"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("不启用")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bShow,expression:"bShow"}],attrs:{label:"",prop:"id"}},[a("el-input",{attrs:{placeholder:"请输入学前测试试卷ID"},model:{value:e.ruleForm.id,callback:function(t){e.$set(e.ruleForm,"id",t)},expression:"ruleForm.id"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bShow,expression:"bShow"}],staticClass:"w_350",attrs:{label:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入前导阶段的名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.bShow,expression:"bShow"}],staticClass:"w_350",attrs:{label:"",prop:"outline"}},[a("el-select",{attrs:{clearable:"",placeholder:"选择该前导阶段的课程大纲"},model:{value:e.ruleForm.outline,callback:function(t){e.$set(e.ruleForm,"outline",t)},expression:"ruleForm.outline"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.bShow,expression:"bShow"}],attrs:{type:"primary"}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var o=a("VU/8")({data:function(){return{ruleForm:{bEnabled:"1",id:"",name:"",outline:""}}},methods:{},computed:{bShow:function(){return"0"==this.ruleForm.bEnabled}},mounted:function(){},created:function(){}},l,!1,function(e){a("M5jh")},null,null).exports,c=a("Dd8w"),u=a.n(c),d=a("mvHQ"),m=a.n(d),p=a("BO1k"),f=a.n(p),b=a("DAYN"),h=a.n(b),g=a("PMEp"),v={components:{draggable:h.a},data:function(){return{tableConfig:g.d,beforeAttr:"",placehoderText:"请选择学前测试的试卷名称",ruleForm:{bEnabled:"1"},stageForm:{name:"",description:"",syllabus_id:"",title:"",season_id:"",paper_id:""},attribute:[],dialogVisible:!1,currentTemplate:"",tableData:[],uAction:"",gradation_id:"",chooseOutlineRadio:"2",btnLoading:!1,options4:[],list:[],loading:!1,searchResourceTimer:null,searchType:1,paperList:[]}},methods:{dragEnd:function(e){var t=this;return i()(n.a.mark(function a(){var s,r,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.getSortData(e),r=s.cids,i={course_id:t.course_id,sort:r.join(",")},a.next=4,t.$http.courseStageSort(i);case 4:0==a.sent.status?t.$message({message:"设置排序成功",type:"success"}):t.$message({message:"阶段排序设置失败",type:"warning"});case 6:case"end":return a.stop()}},a,t)}))()},getSortData:function(e){var t=[],a=!0,s=!1,n=void 0;try{for(var r,i=f()(e);!(a=(r=i.next()).done);a=!0){var l=r.value;t.push(l.id)}}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}return{cids:t}},judgeStatus:function(){var e=0;return this.tableData=null==this.tableData?[]:this.tableData,this.tableData.forEach(function(t){"1"===t.attribute&&e++}),e>0},changePlacehoderText:function(e){this.placehoderText=1==e?"请选择学前测试的试卷名称":"请选择学前测试的试卷ID"},searchResource:function(e){var t=this;clearTimeout(this.searchResourceTimer),this.resLoading=!0,this.searchResourceTimer=setTimeout(i()(n.a.mark(function a(){var s,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return clearTimeout(t.searchResourceTimer),s={discriminator:"paper",page_size:50,page:1,"order_by[]":"desc","order_by_field[]":"id",project_id:t.project_id},1===t.searchType?s.keywords=e:2===t.searchType&&(s.paper_id=e),a.next=5,t.$http.getResource(s);case 5:r=a.sent,t.loading=!1,0===r.status?t.paperList=r.result.resources:t.paperList=[];case 8:case"end":return a.stop()}},a,t)})),500)},remoteMethod:function(e){""!==e?(this.loading=!0,this.searchResource(e)):this.paperList=[]},addTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.AddCourseStage()})},handleChange:function(e){var t=this;this.outlineList.forEach(function(a){a.id==e&&(t.currentTemplate=a.template)})},openSyllabusPage:function(){var e=this.stageForm.syllabus_id;e?this.currentTemplate?window.open("/#/syllabus/manage/edit/"+e):window.open("/#/syllabus/manage/template/"+e):window.open("/#/syllabus/manage/list")},handleCheck:function(e){var t=this;return i()(n.a.mark(function a(){var s,r,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(s=e.syllabus_id,r=void 0,t.outlineList.forEach(function(e){e.id==s&&(r=e.template)}),!s){a.next=18;break}if(!r){a.next=8;break}12==t.course_type?window.open("/#/syllabus/glive/edit/"+s+"?glive=1"):window.open("/#/syllabus/manage/edit/"+s),a.next=16;break;case 8:if(12!=t.course_type){a.next=15;break}return a.next=11,t.$http.selectSyllabus(s,{template_id:6});case 11:0==(i=a.sent).status&&1==i.result&&window.open("/#/syllabus/glive/edit/"+s+"?glive=1"),a.next=16;break;case 15:window.open("/#/syllabus/manage/template/"+s);case 16:a.next=19;break;case 18:window.open("/#/syllabus/manage/list");case 19:case"end":return a.stop()}},a,t)}))()},handleCheckboxChange:function(e){e.length>1&&(this.attribute=e.splice(-1))},AddCourseStage:function(){var e=this;return i()(n.a.mark(function t(){var a,s,r,i,l,o;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={},s=void 0,r=void 0,i=void 0,l=void 0,0!==e.attribute.length){t.next=11;break}r=0,i=0,l=0,t.next=26;break;case 11:if(1!==(r=e.attribute[0])||!e.judgeStatus()){t.next=15;break}return e.$message({type:"warning",message:"前导阶段只能存在一个"}),t.abrupt("return",!1);case 15:t.t0=r,t.next=0===t.t0?18:1===t.t0?20:2===t.t0?23:3===t.t0?23:26;break;case 18:i=0,l=0;case 20:return i=e.stageForm.paper_id,l=0,t.abrupt("break",26);case 23:return i=0,l=e.stageForm.season_id,t.abrupt("break",26);case 26:if("1"!=e.chooseOutlineRadio){t.next=37;break}return e.btnLoading=!0,t.next=30,e.createSyllabus();case 30:if(s=t.sent){t.next=35;break}return e.btnLoading=!1,e.$message.error("添加失败"),t.abrupt("return");case 35:t.next=42;break;case 37:if("2"!=e.chooseOutlineRadio){t.next=41;break}s=e.stageForm.syllabus_id,t.next=42;break;case 41:return t.abrupt("return");case 42:return a={name:e.stageForm.name,syllabus_id:s,description:e.stageForm.description,course_id:e.course_id,attribute:r,paper_id:i,season_id:l},e.btnLoading=!0,t.next=46,e.$http.AddCourseStage(a);case 46:o=t.sent,e.btnLoading=!1,0==o.status?(e.$message({type:"success",message:o.message}),e.dialogVisible=!1,e.getStageAndOutline()):o.status>0&&(!o.message||o.message,e.$message.error(o.message));case 49:case"end":return t.stop()}},t,e)}))()},createSyllabus:function(){var e=this;return i()(n.a.mark(function t(){var a,s,r,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.course_type),{},a={title:e.stageForm.title,project_id:e.project_id,subject_id:e.subject_id,status:"0"},12==e.course_type?a.type=1:a.type=0,t.next=6,e.$http.CourseSyllabus(a);case 6:if(0!=(s=t.sent).status){t.next=16;break}return(r=JSON.parse(m()(e.outlineList)))instanceof Array||(r=[]),r.unshift(s.result),e.$store.dispatch("saveCourseSyllabuses",r),i=s.result.id,t.abrupt("return",i);case 16:return t.abrupt("return");case 17:case"end":return t.stop()}},t,e)}))()},updateTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.changeStage()})},changeStage:function(){var e=this;return i()(n.a.mark(function t(){var a,s,r,i,l,o,c;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.gradation_id,s={},r=void 0,i=void 0,l=void 0,o=void 0,0!==e.attribute.length){t.next=12;break}i=0,l=0,o=0,t.next=28;break;case 12:if(i=e.attribute[0],1===e.beforeAttr[0]||!e.judgeStatus()||1!==i){t.next=16;break}return e.$message({type:"warning",message:"前导阶段只能存在一个"}),t.abrupt("return",!1);case 16:t.t0=i,t.next=0===t.t0?19:1===t.t0?22:2===t.t0?25:3===t.t0?25:28;break;case 19:return l=0,o=0,t.abrupt("break",28);case 22:return l=e.stageForm.paper_id,o=0,t.abrupt("break",28);case 25:return l=0,o=e.stageForm.season_id,t.abrupt("break",28);case 28:if("1"!=e.chooseOutlineRadio){t.next=37;break}return t.next=31,e.createSyllabus();case 31:if(r=t.sent){t.next=35;break}return e.$message.error("编辑失败!"),t.abrupt("return");case 35:t.next=42;break;case 37:if("2"!=e.chooseOutlineRadio){t.next=41;break}r=e.stageForm.syllabus_id,t.next=42;break;case 41:return t.abrupt("return");case 42:return s={name:e.stageForm.name,syllabus_id:r,description:e.stageForm.description,course_id:e.course_id,attribute:i,paper_id:l,season_id:o},t.next=45,e.$http.changeStage(a,s);case 45:0==(c=t.sent).status?(e.$message({type:"success",message:c.message}),e.dialogVisible=!1,e.getStageAndOutline()):c.status>0&&(!c.message||c.message,e.$message.error(c.message));case 47:case"end":return t.stop()}},t,e)}))()},handleDelete:function(e,t){var a=this;this.gradation_id=t.id,this.$confirm("此操作将删除该阶段, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.DeleteStage()}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},DeleteStage:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.gradation_id,t.next=3,e.$http.DeleteStage(a);case 3:0==(s=t.sent).status?(e.$message({type:"success",message:"删除成功!"}),e.getStageAndOutline()):s.status>0&&(!s.message||s.message,e.$message.error(s.message));case 5:case"end":return t.stop()}},t,e)}))()},addTableData:function(){this.stageForm={name:"",description:"",syllabus_id:"",title:""},this.attribute=[],this.chooseOutlineRadio="2",this.uAction="addDate",this.dialogVisible=!0},handleEdit:function(e,t){var a=this;return i()(n.a.mark(function s(){var r,i;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if("1"!==t.attribute){s.next=5;break}return s.next=3,a.$http.getPapers(t.paper_id);case 3:0===(r=s.sent).status&&(r.result.paper_id=r.result.paper_id.toString(),a.paperList=[r.result]);case 5:a.searchType=1,a.beforeAttr=[parseInt(t.attribute)],a.uAction="update",a.gradation_id=t.id,i=t.syllabus_id,a.chooseOutlineRadio="2",a.attribute=[parseInt(t.attribute)],a.stageForm=u()({},a.tableData[e]),a.stageForm.paper_id="0"===a.stageForm.paper_id?"":a.stageForm.paper_id,a.stageForm.season_id="0"===a.stageForm.season_id?"":a.stageForm.season_id,0!==a.attribute.length&&1===a.attribute[0]?a.stageForm.season_id="":0===a.attribute.length||2!==a.attribute[0]&&3!==a.attribute[0]||(a.stageForm.paper_id=""),a.dialogVisible=!0,a.handleChange(i);case 18:case"end":return s.stop()}},s,a)}))()},cancel:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1},getStageAndOutline:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.getStageAndOutline(a);case 3:0==(s=t.sent).status&&(e.tableData=s.result.gradation_list,e.$store.dispatch("getDradationList",s.result.gradation_list));case 5:case"end":return t.stop()}},t,e)}))()},getCourseSeasonList:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.getSeasonList(a);case 3:0===(s=t.sent).status&&e.$store.dispatch("getSeasonList",s.result.list);case 5:case"end":return t.stop()}},t,e)}))()},handleVisibleChange:function(e){}},computed:{course_id:function(){return this.$route.params.cid},outlineList:function(){return this.$store.state.course.course_Syllabuses},project_id:function(){if(this.$store.state.course.course_info)return this.$store.state.course.course_info.project_id},subject_id:function(){if(this.$store.state.course.course_info)return this.$store.state.course.course_info.subject_id},seaconList:function(){return this.$store.state.course.seaconList},course_type:function(){return this.$store.state.course.course_info.course_type}},created:function(){this.getStageAndOutline(),this.getCourseSeasonList()}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modlue-stage"},[a("el-row",{staticStyle:{"margin-bottom":"22px"}},[a("div",{staticClass:"fromtitle"},[a("i",{staticClass:"titicon"}),e._v(" "),a("span",{staticClass:"tittxt"},[e._v("阶段")])]),e._v(" "),a("div",{staticClass:"scroll-table"},[a("div",{staticClass:"table"},[a("div",{staticClass:"table-line-title"},e._l(e.tableConfig,function(t,s){return a("span",{key:s,staticClass:"table-item center",style:t.flex},[e._v(e._s(t.text))])})),e._v(" "),a("draggable",{attrs:{options:{group:"people",animation:200,draggable:".table-move"},element:"div"},on:{end:function(t){e.dragEnd(e.tableData)}},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}},e._l(e.tableData,function(t,s){return a("div",{key:s,staticClass:"table-line table-line-bg table-move"},e._l(e.tableConfig,function(n,r){return a("span",{key:r,staticClass:"table-item center",style:n.flex},["index"===n.key?a("span",{staticClass:"table-item-text beyond-hidden-2"},[e._v(e._s(s+1))]):"done"===n.key?[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){e.handleDelete(s,t)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){e.handleEdit(s,t)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){e.handleCheck(t)}}},[e._v("查看大纲")])]:"name"===n.key?a("span",{staticClass:"table-item-text beyond-hidden-2",staticStyle:{"text-align":"left"}},[e._v("\n                "+e._s(t[n.key])+"\n                "),"1"==t.attribute&&"11"==e.course_type?a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v("前导阶段")]):e._e(),e._v(" "),"2"==t.attribute&&"11"==e.course_type?a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v("翻转阶段")]):e._e(),e._v(" "),"3"==t.attribute&&"11"==e.course_type?a("el-tag",{attrs:{type:"danger",size:"small"}},[e._v("复习阶段")]):e._e()],1):"syllabus"===n.key?a("span",{staticClass:"table-item-text beyond-hidden-2",staticStyle:{"text-align":"left"}},[e._v("\n                "+e._s(t.syllabus_id)+" - "+e._s(t.syllabus_name)+"\n              ")]):a("span",{staticClass:"table-item-text beyond-hidden-2"},[e._v(e._s(t[n.key]))])],2)}))}))],1)]),e._v(" "),a("div",{staticClass:"addBox"},[a("div",{staticStyle:{cursor:"pointer",display:"inline-block",padding:"0 30px"},on:{click:e.addTableData}},[a("i",{staticClass:"additem"}),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"text"}},[e._v("新增一个阶段")])],1)])]),e._v(" "),a("el-dialog",{staticClass:"addContent tabplane",attrs:{width:"660px",top:"8%",title:"addDate"==e.uAction?"新增一个阶段":"编辑课程阶段",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.cancel("stageForm")}}},[a("el-form",{ref:"stageForm",attrs:{model:e.stageForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"阶段名称",prop:"name",rules:e.filter_rules({required:!0,type:"isAllSpace",max:10})}},[a("el-input",{staticClass:"coursetxt",model:{value:e.stageForm.name,callback:function(t){e.$set(e.stageForm,"name",t)},expression:"stageForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"阶段介绍",prop:"description",rules:e.filter_rules({required:!0,type:"isAllSpace",max:20})}},[a("el-input",{staticClass:"coursetxt",model:{value:e.stageForm.description,callback:function(t){e.$set(e.stageForm,"description",t)},expression:"stageForm.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"阶段课程大纲"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.chooseOutlineRadio,callback:function(t){e.chooseOutlineRadio=t},expression:"chooseOutlineRadio"}},[e._v("新建课程大纲")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.chooseOutlineRadio,callback:function(t){e.chooseOutlineRadio=t},expression:"chooseOutlineRadio"}},[e._v("从已有的课程大纲中选择")])],1),e._v(" "),2==e.chooseOutlineRadio?a("el-form-item",{attrs:{label:"",prop:"syllabus_id",rules:[{required:!0,message:"选择该阶段的课程大纲",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择该阶段的课程大纲"},on:{change:e.handleChange},model:{value:e.stageForm.syllabus_id,callback:function(t){e.$set(e.stageForm,"syllabus_id",t)},expression:"stageForm.syllabus_id"}},e._l(e.outlineList,function(e){return a("el-option",{key:e.id,staticStyle:{"max-width":"450px"},attrs:{label:e.id+" - "+e.title,value:String(e.id)}})})),e._v(" "),a("el-button",{staticClass:"checkOutlineBtn",attrs:{type:"primary"},on:{click:e.openSyllabusPage}},[e._v("查看大纲")])],1):e._e(),e._v(" "),1==e.chooseOutlineRadio?a("el-form-item",{attrs:{label:"",prop:"title",rules:e.filter_rules({required:!0,type:"isAllSpace",max:50})}},[a("el-input",{staticClass:"coursetxt",attrs:{placeholder:"请输入课程大纲名称（限50字内）"},model:{value:e.stageForm.title,callback:function(t){e.$set(e.stageForm,"title",t)},expression:"stageForm.title"}})],1):e._e(),e._v(" "),"11"==e.course_type?a("el-form-item",{attrs:{label:"阶段特殊属性（选填）"}},[a("el-checkbox-group",{on:{change:e.handleCheckboxChange},model:{value:e.attribute,callback:function(t){e.attribute=t},expression:"attribute"}},[a("el-checkbox",{attrs:{label:1}},[e._v("前导阶段")]),e._v(" "),a("el-checkbox",{attrs:{label:2}},[e._v("翻转阶段")]),e._v(" "),a("el-checkbox",{attrs:{label:3}},[e._v("复习阶段")])],1)],1):e._e(),e._v(" "),a("el-row",{staticClass:"attribute-box"},[1===e.attribute[0]?a("el-col",{staticClass:"attribute-type-select",attrs:{span:5}},[a("el-select",{on:{change:e.changePlacehoderText},model:{value:e.searchType,callback:function(t){e.searchType=t},expression:"searchType"}},[a("el-option",{attrs:{label:"试卷名称搜索",value:1}}),e._v(" "),a("el-option",{attrs:{label:"试卷ID搜索",value:2}})],1)],1):e._e(),e._v(" "),a("el-col",{staticClass:"attribute-paper-select",attrs:{span:19}},[1===e.attribute[0]?a("el-form-item",{attrs:{label:"",prop:"paper_id",rules:[{required:!0,message:"该选项为必填项！",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:e.placehoderText,filterable:"",clearable:"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.stageForm.paper_id,callback:function(t){e.$set(e.stageForm,"paper_id",t)},expression:"stageForm.paper_id"}},e._l(e.paperList,function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.paper_id}})}))],1):e._e()],1)],1),e._v(" "),2===e.attribute[0]||3===e.attribute[0]?a("el-form-item",{attrs:{label:"",prop:"season_id",rules:[{required:!0,message:"该选项为必填项！",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"",placeholder:2===e.attribute[0]?"请选择该翻转阶段适用的考季":"请选择该复习阶段适用的考季"},model:{value:e.stageForm.season_id,callback:function(t){e.$set(e.stageForm,"season_id",t)},expression:"stageForm.season_id"}},e._l(e.seaconList,function(e){return a("el-option",{key:e.season_id,attrs:{label:e.time,value:e.season_id}})}))],1):e._e(),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{on:{click:function(t){e.cancel("stageForm")}}},[e._v("取 消")]),e._v(" "),"update"===e.uAction?a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.updateTable("stageForm")}}},[e._v("保 存\n        ")]):e._e(),e._v(" "),"addDate"===e.uAction?a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.addTable("stageForm")}}},[e._v("确 定")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]};var y={components:{},data:function(){return{dialogVisible:!1,ruleForm:{bEnabled:"1",id:"",name:"",outline:""},NewTableForm:{name:"",testid:"",liveid:"",knowledgeid:""},tableData:[{name:"模考一",testid:1233,liveid:12312,knowledgeid:12312},{name:"模考一",testid:1233,liveid:12312,knowledgeid:12312},{name:"模考一",testid:1233,liveid:12312,knowledgeid:12312}],rules:{name:[{required:!0,message:"请输入模考的名称",trigger:"blur"}],testid:[{required:!0,type:"number",message:"请输入模考的试卷ID",trigger:"blur"}]},currentIndex:"",Doing:"addDate"}},methods:{addTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableData.push(t.NewTableForm),t.dialogVisible=!1})},updateTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;for(var a in t.NewTableForm)t.tableData[t.currentIndex][a]=t.NewTableForm[a];t.dialogVisible=!1})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableData.splice(e,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addTableData:function(){this.NewTableForm={name:"",testid:"",liveid:"",knowledgeid:""},this.Doing="addDate",this.dialogVisible=!0},handleEdit:function(e,t){this.Doing="update",this.NewTableForm=u()({},this.tableData[e]),this.currentIndex=e,this.dialogVisible=!0},cancel:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1}},computed:{},mounted:function(){},created:function(){}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"firstForm",attrs:{model:e.ruleForm,"label-width":"240px","label-position":"left",inline:!0}},[a("div",{staticClass:"fromtitle"},[a("i",{staticClass:"titicon"}),e._v(" "),a("span",{staticClass:"tittxt"},[e._v("模考+直播阶段")])]),e._v(" "),a("el-form-item",{staticClass:"first-form-item",attrs:{label:"是否启用模考阶段？"}},[a("el-radio-group",{model:{value:e.ruleForm.bEnabled,callback:function(t){e.$set(e.ruleForm,"bEnabled",t)},expression:"ruleForm.bEnabled"}},[a("el-radio",{attrs:{label:"0"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("不启用")])],1)],1),e._v(" "),"0"==e.ruleForm.bEnabled?[a("el-table",{staticStyle:{width:"90%","margin-top":"16px"},attrs:{data:e.tableData,border:"","show-header":!1}},[a("el-table-column",{attrs:{width:"240",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("试卷ID："+e._s(t.row.testid))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("直播ID："+e._s(t.row.liveid))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("知识点ID："+e._s(t.row.knowledgeid))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"addBox"},[a("div",{staticStyle:{cursor:"pointer",display:"inline-block",padding:"0 30px"},on:{click:e.addTableData}},[a("i",{staticClass:"additem"}),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"text"}},[e._v("新增模考")])],1)])]:e._e()],2),e._v(" "),a("el-dialog",{staticClass:"addContent tabplane",attrs:{title:"新增模考",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.cancel("NewTableForm")}}},[a("el-form",{ref:"NewTableForm",attrs:{model:e.NewTableForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"模考的名称",prop:"name"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"请输入模考的名称"},model:{value:e.NewTableForm.name,callback:function(t){e.$set(e.NewTableForm,"name",t)},expression:"NewTableForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模考的试卷ID",prop:"testid"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"请输入模考的试卷ID"},model:{value:e.NewTableForm.testid,callback:function(t){e.$set(e.NewTableForm,"testid",e._n(t))},expression:"NewTableForm.testid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"模考后直播ID(选填)",prop:"liveid"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"请输入模考后的直播ID(选填)"},model:{value:e.NewTableForm.liveid,callback:function(t){e.$set(e.NewTableForm,"liveid",e._n(t))},expression:"NewTableForm.liveid"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"需掌握的知识点ID",prop:"knowledgeid"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"解锁需掌握的知识点ID(可填多个，用英文逗号隔开)"},model:{value:e.NewTableForm.knowledgeid,callback:function(t){e.$set(e.NewTableForm,"knowledgeid",t)},expression:"NewTableForm.knowledgeid"}})],1),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{on:{click:function(t){e.cancel("NewTableForm")}}},[e._v("取 消")]),e._v(" "),"update"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateTable("NewTableForm")}}},[e._v("保 存")]):e._e(),e._v(" "),"addDate"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTable("NewTableForm")}}},[e._v("确 定")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]},x={components:{Guide:o,Stage:a("VU/8")(v,_,!1,function(e){a("pvVS")},null,null).exports,MockExam:a("VU/8")(y,w,!1,null,null,null).exports},data:function(){return{}},methods:{},computed:{},mounted:function(){},created:function(){}},F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Stage")],1)},staticRenderFns:[]},k=a("VU/8")(x,F,!1,null,null,null).exports,C=a("yt7g"),T={components:{},data:function(){return{dialogVisible:!1,ruleForm:{bEnabled:"1"},NewTableForm:{},tableData:[{name:"CMA 2018年12月考季翻转课堂",outline:"CMA 2018年12月考季",starttime:"2018-09-01",lasttime:"2018-10-01",people:"班级名称"},{name:"CMA 2018年12月考季翻转课堂",outline:"CMA 2018年12月考季",starttime:"2018-09-01",lasttime:"2018-10-01",people:"班级名称"},{name:"CMA 2018年12月考季翻转课堂",outline:"CMA 2018年12月考季",starttime:"2018-09-01",lasttime:"2018-10-01",people:"班级名称"}],rules:{name:[{required:!0,message:"请输入翻转课堂的名称",trigger:"blur"}],outline:[{required:!0,message:"选择该翻转课堂的课程大纲",trigger:"change"}],starttime:[{type:"date",required:!0,message:"选择启用时间",trigger:"change"}],lasttime:[{type:"date",required:!0,message:"选择结束时间",trigger:"change"}],people:[{type:"string",required:!0,message:"选择该翻转课堂的启用人群",trigger:"blur"}]},currentIndex:"",Doing:"addDate"}},methods:{addTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.NewTableForm.starttime=Object(C.a)(t.NewTableForm.starttime),t.NewTableForm.lasttime=Object(C.a)(t.NewTableForm.lasttime),t.tableData.push(t.NewTableForm),t.dialogVisible=!1})},updateTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableData[t.currentIndex].name=t.NewTableForm.name,t.tableData[t.currentIndex].outline=t.NewTableForm.outline,t.tableData[t.currentIndex].starttime=Object(C.a)(t.NewTableForm.starttime),t.tableData[t.currentIndex].lasttime=Object(C.a)(t.NewTableForm.lasttime),t.tableData[t.currentIndex].people=t.NewTableForm.people,t.dialogVisible=!1})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableData.splice(e,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addTableData:function(){this.NewTableForm={name:"",outline:"",starttime:"",lasttime:"",people:""},this.Doing="addDate",this.dialogVisible=!0},handleEdit:function(e,t){this.Doing="update",this.NewTableForm=u()({},this.tableData[e]),this.currentIndex=e,this.dialogVisible=!0},cancel:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1}},computed:{},mounted:function(){},created:function(){}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"firstForm",attrs:{model:e.ruleForm,"label-width":"240px","label-position":"left",inline:!0}},[a("div",{staticClass:"fromtitle"},[a("i",{staticClass:"titicon"}),e._v(" "),a("span",{staticClass:"tittxt"},[e._v("翻转课堂")])]),e._v(" "),a("el-form-item",{staticClass:"first-form-item",attrs:{label:"是否启用翻转课堂？"}},[a("el-radio-group",{model:{value:e.ruleForm.bEnabled,callback:function(t){e.$set(e.ruleForm,"bEnabled",t)},expression:"ruleForm.bEnabled"}},[a("el-radio",{attrs:{label:"0"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("不启用")])],1)],1)],1),e._v(" "),"0"==e.ruleForm.bEnabled?[a("el-table",{staticStyle:{width:"90%","margin-top":"16px"},attrs:{data:e.tableData,border:"","show-header":!1}},[a("el-table-column",{attrs:{width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outline))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.starttime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lasttime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.people))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"addBox"},[a("div",{staticStyle:{cursor:"pointer",display:"inline-block",padding:"0 30px"},on:{click:e.addTableData}},[a("i",{staticClass:"additem"}),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"text"}},[e._v("新增翻转课堂")])],1)])]:e._e(),e._v(" "),a("el-dialog",{staticClass:"addContent tabplane",attrs:{title:"新增翻转课堂",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.cancel("NewTableForm")}}},[a("el-form",{ref:"NewTableForm",attrs:{model:e.NewTableForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"翻转课堂的名称",prop:"name"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"请输入复习阶段的名称"},model:{value:e.NewTableForm.name,callback:function(t){e.$set(e.NewTableForm,"name",t)},expression:"NewTableForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"翻转课堂的课程大纲",prop:"outline"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"选择该翻转课堂的课程大纲"},model:{value:e.NewTableForm.outline,callback:function(t){e.$set(e.NewTableForm,"outline",t)},expression:"NewTableForm.outline"}},[a("el-option",{attrs:{label:"21321",value:"课程大纲课程大纲"}}),e._v(" "),a("el-option",{attrs:{label:"21323",value:"课程大纲课程大纲"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"启用时间",prop:"starttime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择启用时间"},model:{value:e.NewTableForm.starttime,callback:function(t){e.$set(e.NewTableForm,"starttime",t)},expression:"NewTableForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"lasttime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择结束时间"},model:{value:e.NewTableForm.lasttime,callback:function(t){e.$set(e.NewTableForm,"lasttime",t)},expression:"NewTableForm.lasttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"翻转课堂的启用人群",prop:"people"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"选择该翻转课堂的启用人群"},model:{value:e.NewTableForm.people,callback:function(t){e.$set(e.NewTableForm,"people",t)},expression:"NewTableForm.people"}})],1),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{on:{click:function(t){e.cancel("NewTableForm")}}},[e._v("取 消")]),e._v(" "),"update"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateTable("NewTableForm")}}},[e._v("保 存")]):e._e(),e._v(" "),"addDate"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTable("NewTableForm")}}},[e._v("确 定")]):e._e()],1)],1)],1)],2)},staticRenderFns:[]},S={components:{},data:function(){return{dialogVisible:!1,ruleForm:{bEnabled:"1"},NewTableForm:{},tableData:[{name:"CMA 2018年12月考季翻转课堂",outline:"CMA 2018年12月考季",starttime:"2018-09-01",lasttime:"2018-10-01",people:"班级名称"},{name:"CMA 2018年12月考季翻转课堂",outline:"CMA 2018年12月考季",starttime:"2018-09-01",lasttime:"2018-10-01",people:"班级名称"},{name:"CMA 2018年12月考季翻转课堂",outline:"CMA 2018年12月考季",starttime:"2018-09-01",lasttime:"2018-10-01",people:"班级名称"}],rules:{name:[{required:!0,message:"请输入翻转课堂的名称",trigger:"blur"}],outline:[{required:!0,message:"选择该翻转课堂的课程大纲",trigger:"change"}],starttime:[{type:"date",required:!0,message:"选择启用时间",trigger:"change"}],lasttime:[{type:"date",required:!0,message:"选择结束时间",trigger:"change"}],people:[{type:"string",required:!0,message:"选择该翻转课堂的启用人群",trigger:"blur"}]},currentIndex:"",Doing:""}},methods:{addTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.NewTableForm.starttime=Object(C.a)(t.NewTableForm.starttime),t.NewTableForm.lasttime=Object(C.a)(t.NewTableForm.lasttime),t.tableData.push(t.NewTableForm),t.dialogVisible=!1})},updateTable:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.tableData[t.currentIndex].name=t.NewTableForm.name,t.tableData[t.currentIndex].outline=t.NewTableForm.outline,t.tableData[t.currentIndex].starttime=Object(C.a)(t.NewTableForm.starttime),t.tableData[t.currentIndex].lasttime=Object(C.a)(t.NewTableForm.lasttime),t.tableData[t.currentIndex].people=t.NewTableForm.people,t.dialogVisible=!1})},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.tableData.splice(e,1),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},addTableData:function(){this.NewTableForm={name:"",outline:"",starttime:"",lasttime:"",people:""},this.Doing="addDate",this.dialogVisible=!0},handleEdit:function(e,t){this.operation="update",this.StageFrom=u()({},this.tableData[e]),this.currentIndex=e,this.dialogVisible=!0},cancel:function(e){this.$refs[e].resetFields(),this.dialogVisible=!1}},computed:{},mounted:function(){},created:function(){}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"firstForm",staticStyle:{"margin-top":"22px"},attrs:{model:e.ruleForm,"label-width":"240px","label-position":"left",inline:!0}},[a("div",{staticClass:"fromtitle"},[a("i",{staticClass:"titicon"}),e._v(" "),a("span",{staticClass:"tittxt"},[e._v("特殊复习阶段")])]),e._v(" "),a("el-form-item",{staticClass:"first-form-item",attrs:{label:"是否启用特殊复习阶段？"}},[a("el-radio-group",{model:{value:e.ruleForm.bEnabled,callback:function(t){e.$set(e.ruleForm,"bEnabled",t)},expression:"ruleForm.bEnabled"}},[a("el-radio",{attrs:{label:"0"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("不启用")])],1)],1),e._v(" "),"0"==e.ruleForm.bEnabled?[a("el-table",{staticStyle:{width:"90%","margin-top":"16px"},attrs:{data:e.tableData,border:"","show-header":!1}},[a("el-table-column",{attrs:{width:"260",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.outline))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.starttime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.lasttime))])]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.people))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1),e._v(" "),a("div",{staticClass:"addBox"},[a("div",{staticStyle:{cursor:"pointer",display:"inline-block",padding:"0 30px"},on:{click:e.addTableData}},[a("i",{staticClass:"additem"}),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"text"}},[e._v("新增特殊的复习阶段")])],1)])]:e._e()],2),e._v(" "),a("el-dialog",{staticClass:"addContent tabplane",attrs:{title:"新增特殊的复习阶段",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.cancel("NewTableForm")}}},[a("el-form",{ref:"NewTableForm",attrs:{model:e.NewTableForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"复习阶段的名称",prop:"name"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"请输入复习阶段的名称"},model:{value:e.NewTableForm.name,callback:function(t){e.$set(e.NewTableForm,"name",t)},expression:"NewTableForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"复习阶段的课程大纲",prop:"outline"}},[a("el-select",{attrs:{placeholder:"选择该复习阶段的课程大纲"},model:{value:e.NewTableForm.outline,callback:function(t){e.$set(e.NewTableForm,"outline",t)},expression:"NewTableForm.outline"}},[a("el-option",{attrs:{label:"21321",value:"课程大纲课程大纲"}}),e._v(" "),a("el-option",{attrs:{label:"21323",value:"课程大纲课程大纲"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"启用时间",prop:"starttime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择启用时间"},model:{value:e.NewTableForm.starttime,callback:function(t){e.$set(e.NewTableForm,"starttime",t)},expression:"NewTableForm.starttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间",prop:"lasttime"}},[a("el-date-picker",{attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"选择结束时间"},model:{value:e.NewTableForm.lasttime,callback:function(t){e.$set(e.NewTableForm,"lasttime",t)},expression:"NewTableForm.lasttime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"复习阶段的启用人群",prop:"people"}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"选择该复习阶段的启用人群"},model:{value:e.NewTableForm.people,callback:function(t){e.$set(e.NewTableForm,"people",t)},expression:"NewTableForm.people"}})],1),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{on:{click:function(t){e.cancel("NewTableForm")}}},[e._v("取 消")]),e._v(" "),"update"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateTable("NewTableForm")}}},[e._v("保 存")]):e._e(),e._v(" "),"addDate"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTable("NewTableForm")}}},[e._v("确 定")]):e._e()],1)],1)],1)],1)},staticRenderFns:[]},N={components:{Flipped:a("VU/8")(T,$,!1,null,null,null).exports,SpecialReview:a("VU/8")(S,D,!1,null,null,null).exports},data:function(){return{}},methods:{},computed:{},mounted:function(){},created:function(){}},A={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("Flipped"),this._v(" "),t("SpecialReview")],1)},staticRenderFns:[]},E=a("VU/8")(N,A,!1,null,null,null).exports,V=a("bOdI"),L=a.n(V),I=a("BK/k"),M=a("lRwf"),O=(new(a.n(M).a),a("NFfb")),R=a("zSLJ"),z={components:{},props:["file"],data:function(){return{imageUrl:"",apiHeader:{}}},computed:{fileList:function(){return null==this.file||"null"==this.file?[]:this.file},isShowDownload:function(){return null!=this.file&&"null"!=this.file},materialUpload:function(){return Object(I.c)()+"course-api.gaodun.com/upload/handout"}},methods:{isShow:function(){return!this.file||0==this.file.length},beforeAvatarUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a="zip"===t,s="rar"===t,n=e.size/1024/1024<90;return a||s||this.$message({message:"上传文件只能是 zip、rar格式!",type:"warning"}),n||this.$message({message:"上传文件大小不能超过 90MB!",type:"warning"}),a&&n||s&&n},handleChange:function(e,t){},handleRemove:function(e,t){0==t.length?this.$emit("updateFlies","remove",[]):this.$emit("updateFlies","",t)},handleAvatarSuccess:function(e,t){0==e.status?(this.$emit("updateFlies",e,t),this.$message({type:"success",message:"上传成功！"})):(this.$message.error("上传失败！"),this.$emit("updateFlies","",[]))},handleAvatarError:function(e,t,a){var s=this;this.$message.error("上传失败！"),setTimeout(function(){s.$emit("updateFlies","",[])},0)},progressUpload:function(e,t,a){}},mounted:function(){},destroyed:function(){},created:function(){var e="Basic "+Object(R.a)(O.j);this.apiHeader={Authentication:e}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FilesUpload"},[a("el-row",{staticStyle:{position:"relative"}},[a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"handout-upload",attrs:{action:e.materialUpload,"on-change":e.handleChange,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,headers:e.apiHeader,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,"on-progress":e.progressUpload}},[e.isShow()?a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传文件")]):e._e(),e._v(" "),e.isShow()?e._e():a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("重新上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传zip/rar文件")])],1)],1)],1)],1)},staticRenderFns:[]};var j,H=a("VU/8")(z,B,!1,function(e){a("Aq6l"),a("9wcH")},"data-v-21f874f4",null).exports,q=(a("DIUF"),{components:{FilesUpload:H,draggable:h.a},props:[],data:function(){return{dialogVisible:!1,NewTableForm:{},tableData:[],file:[],currentIndex:"",Doing:"addDate",handout:[],tableConfig:g.b,classifyList:[],addinput:""}},methods:(j={getTypeList:function(){var e=this;return i()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getHandoutTypeList(e.course_id);case 2:a=t.sent,console.log(a),0===a.status?e.classifyList=a.result.list:e.$message.error("获取课程讲义列表失败");case 5:case"end":return t.stop()}},t,e)}))()},addType:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.addinput.length>15)){t.next=3;break}return e.$message.warning("分类请控制在15个字符以内"),t.abrupt("return");case 3:return a={course_id:e.course_id,name:e.addinput},t.next=6,e.$http.addHandoutType(a);case 6:0===(s=t.sent).status?(e.$message({message:"新增课程讲义分类成功",type:"success"}),e.addinput="",e.getTypeList()):e.$message({message:s.message,type:"warning"});case 8:case"end":return t.stop()}},t,e)}))()},deleteType:function(e){var t=this;return i()(n.a.mark(function a(){var s,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={course_id:t.course_id},a.next=3,t.$http.deleteHandoutType(e,s);case 3:0===(r=a.sent).status?(t.$message.success("删除课程讲义分类成功"),t.getTypeList()):t.$message.error(r.message);case 5:case"end":return a.stop()}},a,t)}))()},updateType:function(e,t){var a=this;return i()(n.a.mark(function s(){var r;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(t.length>15)){s.next=3;break}return a.$message.warning("请将分类控制在15个字符以内"),s.abrupt("return");case 3:r=0;case 4:if(!(r<a.classifyList.length)){s.next=12;break}if(a.classifyList[r].id==e){s.next=9;break}if(a.classifyList[r].cate_name!=t){s.next=9;break}return a.$message.warning("当前课程下已存在相同名称，请重新命名"),s.abrupt("return");case 9:r++,s.next=4;break;case 12:return s.next=14,a.$http.updateHandoutType(e,{name:t});case 14:0===s.sent.status?a.$message({message:"修改讲义分类成功",type:"success"}):a.$message.error("修改讲义分类错误");case 16:case"end":return s.stop()}},s,a)}))()},changeType:function(e){var t=this;return i()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s={content:e.content,course_id:t.course_id,file_name:e.file_name,name:e.name,path:e.path,size:e.size,upload_size:"",category_id:e.cate_id},a.next=3,t.$http.updateCourseHandout(e.id,s);case 3:0===a.sent.status?t.$message.success("修改分类成功"):t.$message.warning("修改分类失败");case 5:case"end":return a.stop()}},a,t)}))()},getCourseHandout:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.getCourseHandout(a);case 3:0==(s=t.sent).status&&(e.handout=s.result.list);case 5:case"end":return t.stop()}},t,e)}))()},handleChange:function(e){this.SetCourseDisable(e)},SetCourseDisable:function(e){var t=this;return i()(n.a.mark(function a(){var s,r,i,l;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=void 0,r=void 0,"handout_download_open"===e?(s=1===t.isEnabled?"已启用批量下载讲义":"已关闭批量下载讲义",r=t.isEnabled):(s=1===t.isClassify?"已启用课程讲义分类展示":"已关闭课程讲义分类展示",r=t.isClassify),i=t.$route.params.cid,l={setting_value:r,setting_key:e},a.next=7,t.$http.SetCourseDisable(i,l);case 7:0===a.sent.status?t.$message({message:s,type:"success"}):(t.$message({message:"启用批量讲义或讲义分类失败！",type:"error"}),"handout_download_open"==e?t.isEnabled=1===t.isEnabled?0:1:t.isClassify=1===t.isClassify?0:1);case 9:case"end":return a.stop()}},a,t)}))()},handleChangeClassify:function(e){this.SetCourseDisable(e)}},L()(j,"getCourseHandout",function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.getCourseHandout(a);case 3:0==(s=t.sent).status&&(e.handout=s.result.list);case 5:case"end":return t.stop()}},t,e)}))()}),L()(j,"handleDelete",function(e,t){var a=this;this.$confirm("此操作将永久删除该信息, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.DeleteStage(t.id)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}),L()(j,"DeleteStage",function(e){var t=this;return i()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.deleteCourseHandout(e);case 2:0==(s=a.sent).status?(t.$message({type:"success",message:"删除成功!"}),t.getCourseHandout()):s.status>0&&(!s.message||s.message,t.$message.error(s.message));case 4:case"end":return a.stop()}},a,t)}))()}),L()(j,"addTableData",function(){this.NewTableForm={name:"",content:"",file_name:"",size:"",path:"",category_id:""},this.Doing="addDate",this.file=[],this.dialogVisible=!0}),L()(j,"addTable",function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.AddCourseHandout()})}),L()(j,"AddCourseHandout",function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.NewTableForm.path){t.next=3;break}return e.$message({showClose:!0,message:"你必须要上传一个讲义！",type:"warning"}),t.abrupt("return");case 3:return a=u()({},e.NewTableForm,{course_id:e.course_id}),t.next=6,e.$http.AddCourseHandout(a);case 6:0==(s=t.sent).status?(e.$message({type:"success",message:s.message?s.message:"添加成功！"}),e.dialogVisible=!1,e.NewTableForm={name:"",content:"",file_name:"",size:"",path:""},e.file=[],e.getCourseHandout()):s.status>0&&e.$message.error("添加失败！");case 8:case"end":return t.stop()}},t,e)}))()}),L()(j,"handleEdit",function(e,t){console.log(this.handout),this.Doing="update",this.NewTableForm=u()({},this.handout[e]),this.NewTableForm.category_id=this.NewTableForm.cate_id,console.log(this.NewTableForm),this.currentIndex=e,this.file=[{name:this.NewTableForm.file_name,response:{filePath:this.NewTableForm.path}}],this.dialogVisible=!0}),L()(j,"updateTable",function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.updateCourseHandout()})}),L()(j,"updateCourseHandout",function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!=e.NewTableForm.path){t.next=3;break}return e.$message({showClose:!0,message:"你必须要上传一个讲义！",type:"warning"}),t.abrupt("return");case 3:return a=u()({},e.NewTableForm,{course_id:e.course_id}),t.next=6,e.$http.updateCourseHandout(a.id,a);case 6:0==(s=t.sent).status?(e.$message({type:"success",message:s.message?s.message:"编辑成功！"}),e.dialogVisible=!1,e.NewTableForm={name:"",content:"",file_name:"",size:"",path:""},e.file=[],e.getCourseHandout()):s.status>0&&(!s.message||s.message,e.$message.error(s.message));case 8:case"end":return t.stop()}},t,e)}))()}),L()(j,"cancel",function(e){this.$refs[e].resetFields(),this.dialogVisible=!1,this.file=[]}),L()(j,"updateFlies",function(e,t){if(e&&"remove"!=e)this.NewTableForm.path=e.filePath?e.filePath:"",this.NewTableForm.upload_size=e.result&&e.result.file.size?e.result.file.size:"",this.NewTableForm.file_name=e.result&&e.result.file.name?e.result.file.name:"";else if("remove"==e)return this.NewTableForm.path="",this.NewTableForm.upload_size="",this.NewTableForm.file_name="",void(this.file=[]);this.file=this.file.concat(t).slice(-1)}),L()(j,"dragEnd",function(e){var t=this;return i()(n.a.mark(function a(){var s,r,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=t.getSortData(e),r=s.cids,i={course_id:t.course_id,handout_sort:r.join(",")},a.next=4,t.$http.handoutSort(i);case 4:0==a.sent.status?(t.message({type:"success",message:"排序成功！"}),t.getCourseHandout()):t.message({type:"warning",message:"排序失败！"});case 6:case"end":return a.stop()}},a,t)}))()}),L()(j,"getSortData",function(e){var t=[],a=!0,s=!1,n=void 0;try{for(var r,i=f()(e);!(a=(r=i.next()).done);a=!0){var l=r.value;t.push(l.id)}}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}return{cids:t}}),j),computed:{course_id:function(){return this.$route.params.cid},isEnabled:{get:function(){return this.$store.state.course.course_disable.handout_download_open},set:function(e){var t={};t.handout_download_open=e,this.$store.dispatch("courseDisable",t)}},isClassify:{get:function(){return this.$store.state.course.course_disable.handout_category_open},set:function(e){var t={};t.handout_category_open=e,this.$store.dispatch("courseDisable",t)}}},mounted:function(){},created:function(){console.log(this.$store.state),this.getTypeList(),this.getCourseHandout()}}),P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"set-tab-wrapper"},[a("el-row",{staticClass:"tab-title"},[e._v("\n      本课程是否启用批量下载讲义模块\n    ")]),e._v(" "),a("el-row",{staticClass:"tab-radio"},[a("el-radio-group",{on:{change:function(t){e.handleChange("handout_download_open")}},model:{value:e.isEnabled,callback:function(t){e.isEnabled=t},expression:"isEnabled"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不启用")])],1)],1),e._v(" "),1===e.isEnabled?a("el-row",{staticClass:"tab-title"},[e._v("\n      本课程的讲义是否需要分类展示\n    ")]):e._e(),e._v(" "),1===e.isEnabled?a("el-row",{staticClass:"tab-radio"},[a("el-radio-group",{on:{change:function(t){e.handleChangeClassify("handout_category_open")}},model:{value:e.isClassify,callback:function(t){e.isClassify=t},expression:"isClassify"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不启用")])],1)],1):e._e(),e._v(" "),1===e.isClassify&&1===e.isEnabled?a("el-row",[e._l(e.classifyList,function(t,s){return a("div",{key:s,staticClass:"classify"},[a("span",{staticClass:"classify-item"},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini"},model:{value:t.cate_name,callback:function(a){e.$set(t,"cate_name",a)},expression:"item.cate_name"}}),e._v(" "),a("span",{on:{click:function(a){e.updateType(t.id,t.cate_name)}}},[e._v("修改")]),e._v(" "),a("span",{on:{click:function(a){e.deleteType(t.id)}}},[e._v("删除")])],1)])}),e._v(" "),e.classifyList.length<5?a("div",{staticClass:"classify"},[a("span",{staticClass:"classify-item"},[a("el-input",{staticStyle:{width:"150px"},attrs:{size:"mini",placeholder:"请输入新增讲义名称"},model:{value:e.addinput,callback:function(t){e.addinput=t},expression:"addinput"}}),e._v(" "),a("span",{on:{click:e.addType}},[e._v("新增一个讲义分类（最多5个哦）")])],1)]):e._e()],2):e._e()],1),e._v(" "),1==e.isEnabled?[a("div",{staticClass:"scroll-table"},[a("div",{staticClass:"table"},[a("div",{staticClass:"table-line-title"},e._l(e.tableConfig,function(t,s){return"type"!=t.key||0!=e.isClassify?a("span",{key:s,staticClass:"table-item center",style:t.flex},[e._v(e._s(t.text))]):e._e()})),e._v(" "),a("draggable",{attrs:{options:{group:"people",animation:200,draggable:".table-move"},element:"div"},on:{end:function(t){e.dragEnd(e.handout)}},model:{value:e.handout,callback:function(t){e.handout=t},expression:"handout"}},e._l(e.handout,function(t,s){return a("div",{key:s,staticClass:"table-line table-line-bg table-move"},e._l(e.tableConfig,function(n,r){return"type"!=n.key||0!=e.isClassify?a("span",{key:r,staticClass:"table-item center",style:n.flex},["index"===n.key?a("span",{staticClass:"table-item-text beyond-hidden-2"},[e._v(e._s(s+1))]):"type"===n.key?[a("el-select",{attrs:{placeholder:"请选择分类",size:"mini"},on:{change:function(a){e.changeType(t,s)}},model:{value:t.cate_id,callback:function(a){e.$set(t,"cate_id",a)},expression:"ele.cate_id"}},e._l(e.classifyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.cate_name,value:e.id}})}))]:"done"===n.key?[a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleDelete(s,t)}}},[e._v("删除\n                ")]),e._v(" "),a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleEdit(s,t)}}},[e._v("编辑\n                ")])]:a("span",{staticClass:"table-item-text beyond-hidden-2"},[e._v(e._s(t[n.key]))])],2):e._e()}))}))],1)]),e._v(" "),a("div",{staticClass:"addBox"},[a("div",{staticStyle:{cursor:"pointer",display:"inline-block",padding:"0 30px"},on:{click:e.addTableData}},[a("i",{staticClass:"additem"}),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"text"}},[e._v("新增一个讲义")])],1)])]:e._e(),e._v(" "),a("el-dialog",{staticClass:"addContent tabplane handoutsDialog",attrs:{title:"update"==e.Doing?"编辑讲义":"新增讲义",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:function(t){e.cancel("NewTableForm")}}},[a("el-form",{ref:"NewTableForm",attrs:{model:e.NewTableForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"显示名称",prop:"name",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:60})}},[a("el-input",{staticClass:"coursetxt",attrs:{"auto-complete":"off",placeholder:"请输入显示名称"},model:{value:e.NewTableForm.name,callback:function(t){e.$set(e.NewTableForm,"name",t)},expression:"NewTableForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"content",rules:e.filter_rules({type:"isAllSpace",max:50})}},[a("el-input",{staticClass:"coursetxt",attrs:{type:"textarea","auto-complete":"off",placeholder:"请输入备注"},model:{value:e.NewTableForm.content,callback:function(t){e.$set(e.NewTableForm,"content",t)},expression:"NewTableForm.content"}})],1),e._v(" "),1===e.isClassify?a("el-form-item",{attrs:{label:"选择展示分类",prop:"category_id",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:60})}},[a("el-select",{model:{value:e.NewTableForm.category_id,callback:function(t){e.$set(e.NewTableForm,"category_id",t)},expression:"NewTableForm.category_id"}},e._l(e.classifyList,function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.cate_name}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"上传文件",prop:"file_name"}},[a("FilesUpload",{attrs:{file:e.file},on:{updateFlies:e.updateFlies}})],1),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{on:{click:function(t){e.cancel("NewTableForm")}}},[e._v("取 消")]),e._v(" "),"update"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.updateTable("NewTableForm")}}},[e._v("保 存\n        ")]):e._e(),e._v(" "),"addDate"==e.Doing?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTable("NewTableForm")}}},[e._v("确 定")]):e._e()],1)],1)],1)],2)},staticRenderFns:[]};var U={components:{},props:[],data:function(){return{options:[],selectValue:[],loading:!1,seachTimeOut:null,isHandle:!1,teacherList:[]}},methods:{handleVisibleChange:function(e){this.isHandle=e},addTeacher:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null==e.teacherList){t.next=15;break}if(4!=e.teacherList.length){t.next=5;break}return e.$message({message:"最多可添加四个老师",type:"warning"}),e.selectValue="",t.abrupt("return",!1);case 5:if(0==e.teacherList.length){t.next=15;break}a=0;case 7:if(!(a<e.teacherList.length)){t.next=15;break}if(e.teacherList[a].user_id!=e.selectValue){t.next=12;break}return e.$message({message:"此老师已选择，请勿重复添加",type:"warning"}),e.selectValue="",t.abrupt("return",!1);case 12:a++,t.next=7;break;case 15:return s={course_id:e.course_id,teacher_id:e.selectValue},t.next=18,e.$http.addTeacher(s);case 18:0===t.sent.status?(e.$message({message:"添加老师成功！",type:"success"}),e.selectValue="",e.getTeacherList()):e.$message({message:"添加老师失败！",type:"error"});case 20:case"end":return t.stop()}},t,e)}))()},removeTeacher:function(e){var t=this;return i()(n.a.mark(function a(){var s,r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return s=e.user_id,r={course_id:t.course_id,teacher_id:s},a.next=4,t.$http.removeTeacher(r);case 4:0===a.sent.status?(t.$message({message:"删除成功！",type:"success"}),t.getTeacherList()):t.$message({message:"删除失败！",type:"error"});case 6:case"end":return a.stop()}},a,t)}))()},handleRemoveTag:function(e){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,t)}))()},remoteMethod:function(e){var t=this;""!==e?(clearTimeout(this.seachTimeOut),this.seachTimeOut=setTimeout(function(){t.loading=!0;var a={name:e};t.$http.searchTeacher(a).then(function(e){t.loading=!1,0===e.status&&(t.options=e.result)}).catch(function(e){t.loading=!1})},500)):this.options=[]},handleChange:function(e){this.SetCourseDisable()},SetCourseDisable:function(){var e=this;return i()(n.a.mark(function t(){var a,s,r,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=0===e.isEnabled?"您确定要关闭该功能吗？如果已开放给学员学习，则会影响学员的使用。 请谨慎使用":"您确定要开启该功能吗？",s=1===e.isEnabled?"启用选择老师成功":"已关闭选择老师",r=e.$route.params.cid,i={setting_value:e.isEnabled,setting_key:"course_teacher_open"},e.$confirm(a,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.SetCourseDisable(r,i).then(function(t){0===t.status?(e.$message({message:s,type:"success"}),e.getTeacherList()):e.$message({message:"启用选择老师失败",type:"warning"})})}).catch(function(){e.isEnabled=0===e.isEnabled?1:0,e.$message({type:"info",message:"已取消操作"})});case 5:case"end":return t.stop()}},t,e)}))()},getTeacherList:function(){var e=this;return i()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getTeacherList(e.course_id);case 2:0===(a=t.sent).status&&(e.teacherList=a.result);case 4:case"end":return t.stop()}},t,e)}))()}},computed:{course_id:function(){return this.$route.params.cid},isEnabled:{get:function(){return this.$store.state.course.course_disable.course_teacher_open},set:function(e){var t={};t.course_teacher_open=e,this.$store.dispatch("courseDisable",t)}}},mounted:function(){},created:function(){this.getTeacherList()}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",{staticClass:"set-tab-wrapper"},[a("el-row",{staticClass:"tab-title"},[e._v("\n      本课程是否启用选老师的功能\n    ")]),e._v(" "),a("el-row",{staticClass:"tab-radio"},[a("el-radio-group",{on:{change:e.handleChange},model:{value:e.isEnabled,callback:function(t){e.isEnabled=t},expression:"isEnabled"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不启用")])],1)],1)],1),e._v(" "),1==e.isEnabled?[a("el-row",e._l(e.teacherList,function(t){return a("el-tag",{key:t.user_id,staticClass:"teacher-tag",attrs:{closable:""},on:{close:function(a){e.removeTeacher(t)}}},[e._v("\n        "+e._s(t.name)+"（老师ID："+e._s(t.user_id)+"）\n      ")])})),e._v(" "),a("el-row",[a("el-col",{attrs:{span:20}},[a("el-select",{staticStyle:{width:"90%"},attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择一个老师（可输入老师姓名搜索）",clearable:"","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.options,function(e){return a("el-option",{key:e.user_id,attrs:{label:e.name+"-ID:"+e.user_id,value:e.user_id}})}))],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{disabled:void 0==e.selectValue||null==e.selectValue||""==e.selectValue,type:"primary"},on:{click:e.addTeacher}},[e._v("增加一位老师\n        ")])],1)],1)]:e._e()],2)},staticRenderFns:[]};var X={data:function(){return{newPlanlist:[],planlist:[],dialogVisible:!1,innerVisible:!1,tableData:[],file:[],currentIndex:"",seasonList:[],active:0,progressText:g.a,firstAddForm:{dateFormat:1,date:""},secondAddForm:{date1:"",date2:""},planForm:{content:[],date:"",target:""},isAddSeason:!0,isAddPlan:!0,btnLoading:!1,palnBtnLoading:!1,currentPlanIndex:"",seasonId:"",daration_list:[]}},methods:{toClose:function(){var e=this;this.isAddPlan||this.newPlanlist.forEach(function(t){e.daration_list.forEach(function(a,s){a.id==t.id&&e.daration_list.splice(s,1)})}),this.newPlanlist=[],this.innerVisible=!1,this.$refs.planForm.clearValidate()},compare:function(e){return function(t,a){try{var s=new Date(t[e]).getTime(),n=new Date(a[e]).getTime()}catch(e){}return s-n}},handleSavePlan:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.planForm,s=a.content,n=a.target,r=a.date,i=[];s.forEach(function(e){t.daration_list.forEach(function(a,s){a.id==e&&(i.push(a),t.daration_list.splice(s,1))})}),t.isAddPlan?t.planlist.push({gradation:i,target:n,start_time:r[0],end_time:r[1]}):t.planlist[t.currentPlanIndex]={gradation:i,target:n,start_time:r[0],end_time:r[1]},t.planlist.sort(t.compare("start_time")),t.resetForm("planForm"),t.innerVisible=!1})},delplan:function(e,t){var a=this;null!=e.gradation&&void 0!=e.gradation&&e.gradation.forEach(function(e){a.daration_list.push(e)}),this.planlist.splice(t,1)},handleCloseSeasonDialog:function(){this.getCourseSeasonList()},eidtplan:function(e,t){var a=this;this.newPlanlist=[],null!=e.gradation&&void 0!=e.gradation&&e.gradation.forEach(function(e){a.daration_list.push(e),a.newPlanlist.push(e)}),this.currentPlanIndex=t,this.isAddPlan=!1;var s=e.gradation,n=(e.plan_id,e.target),r=e.start_time,i=e.end_time,l=new Array(2),o=new Array;l[0]=r,l[1]=i,s.forEach(function(e,t){o.push(e.id)}),this.planForm={content:o,date:l,target:n},this.innerVisible=!0},checkSeasonTime:function(e){var t=new Date(e.date1[0]).getTime(),a=new Date(e.date1[1]).getTime(),s=new Date(e.date2[0]).getTime(),n=new Date(e.date2[1]).getTime();if(t>a||s>n)return{bool:!1,message:"问卷开始时间不可大于结束时间！"};return s-t>0?s-a>0?{bool:!0}:{bool:!1,message:"考季问卷时间设置有重叠！"}:{bool:!1,message:"问卷确认时间第二次不可大于第三次！"}},handleOpenPlanDialog:function(){this.planForm={content:[],date:"",target:""},this.isAddPlan=!0,this.innerVisible=!0},handleCreateSeason:function(){var e=this;return i()(n.a.mark(function t(){var a,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a={course_id:e.course_id,enable:e.isEnabled,time:e.firstAddForm.date,time_type:e.firstAddForm.dateFormat,"confirm[second][start_time]":e.secondAddForm.date1[0],"confirm[second][end_time]":e.secondAddForm.date1[1],"confirm[third][start_time]":e.secondAddForm.date2[0],"confirm[third][end_time]":e.secondAddForm.date2[1]},null!=e.planlist&&void 0!=e.planlist&&""!=e.planlist&&0!==e.planlist.length){t.next=4;break}return e.$message({message:"请新增一段学习计划！",type:"warning"}),t.abrupt("return");case 4:if(e.planlist.forEach(function(e,t){var s=[];e.gradation.forEach(function(e){s.push(e.id)}),a["plan["+t+"][content][]"]=s,a["plan["+t+"][start_time]"]=e.start_time,a["plan["+t+"][end_time]"]=e.end_time,a["plan["+t+"][target]"]=e.target}),s=void 0,!e.isAddSeason){t.next=13;break}return e.btnLoading=!0,t.next=10,e.$http.createSeason(a);case 10:s=t.sent,t.next=18;break;case 13:return r=e.seasonId,e.btnLoading=!0,t.next=17,e.$http.updateSeason(r,a);case 17:s=t.sent;case 18:e.btnLoading=!1,0===s.status?(e.$message({message:e.isAddSeason?"新增考季成功！":"修改考季成功！",type:"success"}),e.dialogVisible=!1):e.$message({message:e.isAddSeason?"新增考季失败:"+s.message:"修改考季失败:"+s.message,type:"error"});case 20:case"end":return t.stop()}},t,e)}))()},handleRaidoChange:function(e){this.firstAddForm.date=""},firstNextSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.active>=t.progressText.length-1||t.active++})},secondSubmit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.checkSeasonTime(t.secondAddForm);if(!a.bool)return t.$message({message:a.message,type:"error"});t.active>=t.progressText.length-1||t.active++})},prev:function(){this.active<=0||this.active--},handleChange:function(e){this.SetCourseDisable()},SetCourseDisable:function(){var e=this,t=this.course_id,a={setting_value:this.isEnabled,setting_key:"season_manage_open"},s=0===this.isEnabled?"您确定要关闭该功能吗？如果已开放给学员学习，则会影响学员的使用。 请谨慎使用":"您确定要开启该功能吗？";this.$confirm(s,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.SetCourseDisable(t,a).then(function(t){0===t.status?e.$message({message:0===e.isEnabled?"关闭考季成功":"启用考季成功！",type:"success"}):(e.$message({message:0===e.isEnabled?"关闭考季失败":"启用考季失败！",type:"error"}),e.isEnabled=1===e.isEnabled?0:1)})}).catch(function(){e.isEnabled=0===e.isEnabled?1:0,e.$message({type:"info",message:"已取消该操作"})})},getCourseSeasonList:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.getSeasonList(a);case 3:0===(s=t.sent).status&&(e.seasonList=s.result.list,e.$store.dispatch("getSeasonList",s.result.list));case 5:case"end":return t.stop()}},t,e)}))()},handleDelete:function(e,t){var a=this;this.$confirm("此操作将删除该考季, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.DeleteSeason(t.season_id)}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},DeleteSeason:function(e){var t=this;return i()(n.a.mark(function a(){var s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.$http.deleteSeason(e);case 2:0===(s=a.sent).status?t.$message({type:"success",message:"删除成功!"}):(!s.message||s.message,t.$message.error(s.message));case 4:case"end":return a.stop()}},a,t)}))()},addTableData:function(){var e=this;return i()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getNewSeason(e.$route.params.cid);case 2:if(0!==(a=t.sent).status){t.next=7;break}e.daration_list=a.result,t.next=9;break;case 7:return e.$message({message:"获取考季信息失败",type:"warning"}),t.abrupt("return");case 9:e.firstAddForm={dateFormat:1,date:""},e.secondAddForm={date1:"",date2:""},e.planlist=[],e.isAddSeason=!0,e.active=0,e.dialogVisible=!0;case 15:case"end":return t.stop()}},t,e)}))()},handleEdit:function(e,t){var a=this;return i()(n.a.mark(function s(){var r,i,l,o;return n.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return r={season_id:t.season_id},s.next=3,a.$http.getNewSeason(a.$route.params.cid,r);case 3:if(0!==(i=s.sent).status){s.next=8;break}a.daration_list=i.result,s.next=10;break;case 8:return a.$message({message:"获取考季信息失败",type:"warning"}),s.abrupt("return");case 10:l=t,a.active=0,a.seasonId=t.season_id,a.isAddSeason=!1,a.firstAddForm.dateFormat=parseInt(l.time_type),a.firstAddForm.date=l.time;try{a.secondAddForm={date1:[l.confirm[0].cycle.start_time,l.confirm[0].cycle.end_time],date2:[l.confirm[1].cycle.start_time,l.confirm[1].cycle.end_time]}}catch(e){a.secondAddForm={date1:"",date2:""}}null!==l.plan&&void 0!==l.plan||(l.plan=[]),a.planlist=l.plan,o=[],null!=a.planlist&&void 0!=a.planlist&&a.planlist.forEach(function(e){null!=e.gradation&&void 0!=e.gradation&&e.gradation.forEach(function(e){o.push(e)})}),o.forEach(function(e){null!=a.daration_list&&void 0!=a.daration_list&&a.daration_list.forEach(function(t,s){t.id==e.id&&a.daration_list.splice(s,1)})}),a.currentIndex=e,a.dialogVisible=!0;case 24:case"end":return s.stop()}},s,a)}))()},resetForm:function(e){this.planForm.content=[],this.planForm.date=[],this.planForm.target="",this.$refs[e].clearValidate()}},computed:{course_id:function(){return this.$route.params.cid},isEnabled:{get:function(){return this.$store.state.course.course_disable.season_manage_open},set:function(e){var t={};t.season_manage_open=e,this.$store.dispatch("courseDisable",t)}}},mounted:function(){},created:function(){this.getCourseSeasonList()}},J={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"exam-time"},[a("el-row",{staticClass:"set-tab-wrapper"},[a("el-row",{staticClass:"tab-title"},[e._v("\n      本课程是否启用考季管理的功能\n    ")]),e._v(" "),a("el-row",{staticClass:"tab-radio"},[a("el-radio-group",{on:{change:e.handleChange},model:{value:e.isEnabled,callback:function(t){e.isEnabled=t},expression:"isEnabled"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不启用")])],1)],1)],1),e._v(" "),1===e.isEnabled?[a("el-table",{staticStyle:{width:"90%","margin-top":"16px"},attrs:{data:e.seasonList,border:""}},[a("el-table-column",{attrs:{label:"序号",align:"center",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.$index+1))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"考季ID",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.season_id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"考季时间",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.time))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{margin:"0 10px"},attrs:{size:"small",type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n          ")])]}}])})],1),e._v(" "),a("div",{staticClass:"addBox"},[a("div",{staticStyle:{cursor:"pointer",display:"inline-block",padding:"0 30px"},on:{click:e.addTableData}},[a("i",{staticClass:"additem"}),e._v(" "),a("el-button",{staticClass:"addBtn",attrs:{type:"text"}},[e._v("增加一个考季及学习规划设置")])],1)])]:e._e(),e._v(" "),a("el-dialog",{staticClass:"tabplane",attrs:{title:e.isAddSeason?"增加一个考季及学习规划设置":"修改一个考季及学习规划设置",width:"60%",center:"",top:"8%",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t},close:e.handleCloseSeasonDialog}},[a("el-steps",{staticStyle:{"margin-top":"-10px","margin-bottom":"30px"},attrs:{active:e.active,"finish-status":"finish",simple:""}},e._l(e.progressText,function(e,t){return a("el-step",{key:t,attrs:{title:e.text,description:""}})})),e._v(" "),a("el-form",{directives:[{name:"show",rawName:"v-show",value:0===e.active,expression:"active === 0"}],ref:"firstAddForm",staticClass:"el-ruleForm el-first-form",attrs:{model:e.firstAddForm,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"设置考季时间",prop:"dateFormat",rules:[{required:!0,type:"number",message:"考季时间必须要要设置！",trigger:["change","blur"]}]}},[a("el-radio-group",{on:{change:e.handleRaidoChange},model:{value:e.firstAddForm.dateFormat,callback:function(t){e.$set(e.firstAddForm,"dateFormat",t)},expression:"firstAddForm.dateFormat"}},[a("el-radio",{attrs:{label:1}},[e._v("年-月")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("年-月-日")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===e.firstAddForm.dateFormat,expression:"firstAddForm.dateFormat === 1"}],attrs:{label:"",prop:"date",rules:[{required:!0,message:"考季时间必须要要设置！",trigger:["change","blur"]}]}},[a("el-date-picker",{attrs:{type:"month","value-format":"yyyy-MM",placeholder:"选择考季时间（年-月）"},model:{value:e.firstAddForm.date,callback:function(t){e.$set(e.firstAddForm,"date",t)},expression:"firstAddForm.date"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===e.firstAddForm.dateFormat,expression:"firstAddForm.dateFormat === 2"}],attrs:{label:"",prop:"date",rules:[{required:!0,message:"考季时间必须要要设置！",trigger:["change","blur"]}]}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择考季时间（年-月-日）","value-format":"yyyy-MM-dd"},model:{value:e.firstAddForm.date,callback:function(t){e.$set(e.firstAddForm,"date",t)},expression:"firstAddForm.date"}})],1),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(t){e.firstNextSubmit("firstAddForm")}}},[e._v("下一步")])],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.active,expression:"active === 1"}]},[a("el-row",[a("p",{staticClass:"exam-time-form-title"},[e._v("第一次开启确认学员考季的问卷")]),e._v(" "),a("p",{staticClass:"exam-time-form-sub-title"},[e._v("学员开课后首次进入课程")])]),e._v(" "),a("el-form",{ref:"secondAddForm",staticClass:"el-ruleForm",attrs:{"label-width":"-12px",model:e.secondAddForm}},[a("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[a("p",{staticClass:"exam-time-form-title"},[e._v("第二次开启确认学员考季的问卷")])]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"date1",rules:[{type:"array",required:!0,message:"请选择开启学员考季的问卷的日期",trigger:"change"}]}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"请设置开始时间","value-format":"yyyy-MM-dd","end-placeholder":"请设置结束时间"},model:{value:e.secondAddForm.date1,callback:function(t){e.$set(e.secondAddForm,"date1",t)},expression:"secondAddForm.date1"}})],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"10px"}},[a("p",{staticClass:"exam-time-form-title"},[e._v("第三次开启确认学员考季的问卷")])]),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"date2",rules:[{type:"array",required:!0,message:"请选择开启学员考季的问卷的日期",trigger:"change"}]}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"请设置开始时间","value-format":"yyyy-MM-dd","end-placeholder":"请设置结束时间"},model:{value:e.secondAddForm.date2,callback:function(t){e.$set(e.secondAddForm,"date2",t)},expression:"secondAddForm.date2"}})],1),e._v(" "),a("el-form-item",{staticClass:"coursebtn"},[a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(t){e.secondSubmit("secondAddForm")}}},[e._v("下一步")])],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:2===e.active,expression:"active === 2"}],staticClass:"rulemodule"},[a("div",{staticClass:"plan-box"},[a("div",{staticClass:"setline"}),e._v(" "),a("div",{staticClass:"scroll-content"},e._l(e.planlist,function(t,s){return a("div",{key:s,staticClass:"planwel"},[a("span",{staticClass:"icon-plan-rang"}),e._v(" "),a("div",{staticClass:"plantab"},[a("div",{staticClass:"planmil"},[a("div",{staticClass:"plan-date black_14"},[e._v(e._s(t.start_time)+" 至 "+e._s(t.end_time))]),e._v(" "),a("div",{staticClass:"plan-content"},[e._v("\n                  学习内容：\n                  "),e._l(t.gradation,function(a,s){return[e._v("\n                    "+e._s(a.name)+"\n                    "),s+1!=t.gradation.length?[e._v("，")]:e._e()]})],2),e._v(" "),""!=t.target?a("div",{staticClass:"plan-target"},[e._v("\n                  学习目标："+e._s(t.target)+"\n                ")]):e._e()]),e._v(" "),a("div",{staticClass:"plan-btns"},[a("span",{staticClass:"deleitd",on:{click:function(a){e.delplan(t,s)}}},[e._v("删除")]),e._v(" "),a("span",{staticClass:"deleitd",on:{click:function(a){e.eidtplan(t,s)}}},[e._v("修改")])])])])})),e._v(" "),a("div",{staticClass:"planwel outlinehit"},[a("span",{staticClass:"icon-plan-rang"}),e._v(" "),a("div",{staticClass:"addoutline",on:{click:e.handleOpenPlanDialog}},[a("span",{staticClass:"addbtn"},[e._v("新增一段学习计划")])])])]),e._v(" "),a("div",{staticClass:"coursebtn",staticStyle:{"text-align":"center"}},[a("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.handleCreateSeason()}}},[e._v("确 定")])],1),e._v(" "),a("el-dialog",{staticClass:"innerDialog",attrs:{width:"60%",center:"",top:"8%",title:e.isAddPlan?"新增一段学习计划":"修改学习计划",visible:e.innerVisible,"append-to-body":"","before-close":e.toClose},on:{"update:visible":function(t){e.innerVisible=t}}},[a("el-form",{ref:"planForm",staticClass:"el-ruleForm",attrs:{model:e.planForm,"label-width":"140px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"学习内容",prop:"content",rules:[{required:!0,message:"请选择学习内容",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"90%"},attrs:{multiple:"",placeholder:"请选择学习内容"},model:{value:e.planForm.content,callback:function(t){e.$set(e.planForm,"content",t)},expression:"planForm.content"}},e._l(e.daration_list,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"起始时间",prop:"date",rules:[{type:"array",required:!0,message:"请选择起始时间",trigger:"change"}]}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"请设置开始时间","value-format":"yyyy-MM-dd","end-placeholder":"请设置结束时间"},model:{value:e.planForm.date,callback:function(t){e.$set(e.planForm,"date",t)},expression:"planForm.date"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学习目标(选填)",prop:"target",rules:e.filter_rules({type:"isAllSpace",maxLength:100})}},[a("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea"},model:{value:e.planForm.target,callback:function(t){e.$set(e.planForm,"target",t)},expression:"planForm.target"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetForm("planForm")}}},[e._v("重置")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.palnBtnLoading},on:{click:function(t){e.handleSavePlan("planForm")}}},[e._v("保 存")])],1)],1)],1)],1)],2)},staticRenderFns:[]};var K={name:"CourseModuleContentSet",components:{MainCourse:k,Glive:E,Handout:a("VU/8")(q,P,!1,function(e){a("O9cM"),a("Xk6T")},"data-v-bc6be8aa",null).exports,Teacher:a("VU/8")(U,G,!1,function(e){a("cX5b")},null,null).exports,ExamTime:a("VU/8")(X,J,!1,function(e){a("2+My")},null,null).exports},data:function(){return{activeName:"MainCourse",handout:"courseHandout"}},methods:{handleClick:function(e,t){},getCourseInfo:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.getCourseInfo(a);case 3:0==(s=t.sent).status&&(e.$store.dispatch("saveCourseInfo",s.result),e.CourseSyllabuses());case 5:case"end":return t.stop()}},t,e)}))()},CourseSyllabuses:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={page:"1",page_size:"100",project_id:e.$store.state.course.course_info&&e.$store.state.course.course_info.project_id,subject_id:e.$store.state.course.course_info&&e.$store.state.course.course_info.subject_id,status:"0",keyword:""},12==e.course_type?a.type=1:a.type=0,t.next=4,e.$http.CourseSyllabuses(a);case 4:0==(s=t.sent).status&&e.$store.dispatch("saveCourseSyllabuses",s.result.list);case 6:case"end":return t.stop()}},t,e)}))()},GetCourseDisable:function(){var e=this;return i()(n.a.mark(function t(){var a,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.course_id,t.next=3,e.$http.GetCourseDisable(a);case 3:0===(s=t.sent).status&&e.$store.dispatch("courseDisable",s.result);case 5:case"end":return t.stop()}},t,e)}))()}},computed:{course_id:function(){return this.$route.params.cid},course_name:function(){return this.$store.state.course.course_info.course_name},course_type:function(){return this.$store.state.course.course_info.course_type}},mounted:function(){},created:function(){this.getCourseInfo(),this.GetCourseDisable()}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"module-edu-content coursecontent"},[a("div",{staticClass:"outlineeat"},[e._v("\n    【课程ID："+e._s(e.course_id)+"】 "+e._s(e.course_name)+"\n  ")]),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"主课程",name:"MainCourse"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"批量讲义",name:"Handout"}}),e._v(" "),"11"==e.course_type?a("el-tab-pane",{attrs:{label:"选老师",name:"Teacher"}}):e._e(),e._v(" "),"11"==e.course_type?a("el-tab-pane",{attrs:{label:"考季管理",name:"ExamTime"}}):e._e()],1),e._v(" "),a("div",{staticClass:"el-tabs__content"},[a("div",{staticClass:"el-tab-pane"},[a("keep-alive",[a(e.activeName,{tag:"component"})],1)],1)])],1)},staticRenderFns:[]};var W=a("VU/8")(K,Q,!1,function(e){a("kxxf"),a("t31y"),a("t0D2")},"data-v-a82c256c",null);t.default=W.exports},O9cM:function(e,t){},Xk6T:function(e,t){},cX5b:function(e,t){},kxxf:function(e,t){},pvVS:function(e,t){},t0D2:function(e,t){},t31y:function(e,t){}});
//# sourceMappingURL=2.484edadaa3cb235fccec.js.map