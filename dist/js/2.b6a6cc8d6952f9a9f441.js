webpackJsonp([2],{"+E7C":function(e,t){},"016g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("lC5x"),i=n.n(r),a=n("J0Oq"),s=n.n(a),o=n("405r"),l=n.n(o),c=[{text:"资源设置",currentLine:"bar-line-current",currentDot:"bar-dot-current",currentText:"current-text",isCustomerConfirm:!0},{text:"资源类型",currentLine:"bar-line-current",currentDot:"bar-dot-current",currentText:"current-text",isCustomerConfirm:!1},{text:"资源选择",currentLine:"bar-line-current",currentDot:"bar-dot-current",currentText:"current-text",isCustomerConfirm:!1}],d=[{discriminator:"video",label:"视频"},{discriminator:"lecture_note",label:"讲义"},{discriminator:"paper",label:"试卷"},{discriminator:"legacy_live",label:"直播"},{discriminator:"resource_group",label:"资源组"}],u=[{discriminator:"video",table:[{key:"id",wh:"120",sort:!1,label:"资源ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入视频资源ID / 名称",input:{}},{discriminator:"lecture_note",table:[{key:"id",wh:"120",sort:!1,label:"资源ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入讲义资源ID / 名称",input:{}},{discriminator:"paper",table:[{key:"paper_id",wh:"100",sort:!1,label:"题库试卷ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入题库试卷ID / 名称",input:{}},{discriminator:"legacy_live",table:[{key:"live_id",wh:"100",sort:!1,label:"直播ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入直播ID / 名称",input:{}},{discriminator:"resource_group",table:[{key:"id",wh:"120",sort:!1,label:"资源组ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源组名称"}],inputPlaceholder:"请输入资源组ID / 名称",input:{}}],p=n("yt7g"),h=n("BK/k"),v=n("zSLJ"),g=n("NFfb"),m={computed:{materialUpload:function(){return Object(h.c)()+"apigateway.gaodun.com/resource-api/resource/file"}},data:function(){return{fileList:[],apiHeader:{},isUpload:!1,loading:!1}},methods:{clearAllFileList:function(){this.fileList=[]},beforeAvatarUpload:function(e){var t="pdf"===e.name.substring(e.name.lastIndexOf(".")+1);return t||this.$message({message:"上传文件只能是 pdf格式!",type:"warning"}),t},handleChange:function(e,t){this.fileList=t.slice(-1)},handleRemove:function(e,t){0==t.length&&(this.isUpload=!1,this.$emit("getHandoutPath","")),this.fileList=t},handleAvatarError:function(e,t,n){var r=this;this.loading=!1,this.$message.error("上传失败！"),setTimeout(function(){r.fileList=[]},0)},handleProgress:function(){this.loading=!0},uploadSuccess:function(e,t){var n=this;this.loading=!1,0===e.status?(this.isUpload=!0,this.$message({message:"文件上传成功",type:"success"}),this.$emit("getHandoutPath",e.result)):(this.isUpload=!1,setTimeout(function(){n.fileList=[]},0),this.$emit("getHandoutPath",""),this.$message({message:"文件上传失败",type:"warning"}))}},mounted:function(){},created:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n="Basic "+Object(v.a)(g.j),e.apiHeader={Authentication:n};case 2:case"end":return t.stop()}},t,e)}))()}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",[n("el-col",{attrs:{span:6}},[e._v("*选择文件：")]),e._v(" "),n("el-col",{attrs:{span:18}},[n("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"onUpload",staticClass:"syllabus-handout-upload",attrs:{headers:e.apiHeader,"file-list":e.fileList,drag:"","on-success":e.uploadSuccess,"on-change":e.handleChange,"on-remove":e.handleRemove,"on-progress":e.handleProgress,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload,action:e.materialUpload,"element-loading-text":"正在上传中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[n("i",{staticClass:"el-icon-upload"}),e._v(" "),n("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n                "),n("em",[e._v("点击上传")])]),e._v(" "),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("目前仅支持.pdf文件哦！")])])],1)],1)},staticRenderFns:[]};var _=n("vSla")(m,f,!1,function(e){n("9q3u")},null,null).exports,b=n("uqXn"),y={name:"SyllabusModuleEdit",components:{draggable:l.a,HandoutUpload:_,SelectKnowledge:b.a},data:function(){return{startType:"",endType:"",liveid:0,resourceid:"",syllabusid:"",value2:"",valiMinites:[{validator:function(e,t,n){(t=Number(t))>999?n(new Error("时长不允许超过三位数")):n()},trigger:"blur"}],valiSeconds:[{validator:function(e,t,n){Number(t)>60?n(new Error("秒数最大不允许超过60")):n()},trigger:"blur"}],getId:"",judgeid:"",knowledgeInfo:"",is_knowledge_open:!1,project_id:"",subject_id:"",isAllowUse:0,btnLoading:!1,active:0,resourceRadio:"",selectType:"",nativeResourceRadio:"",ResIsInOutline:!1,resourceTableConfig:[],radio1:1,radio2:4,tabledata:[],progressText:c,addResFirFrom:{name:"",start_time:"",study_time:"",apply_to:[]},study_time_options:[],ruleProject:{name:""},dialogFormVisible:!1,dialogKnowledgeVisible:!1,knowledgeList:[],resourceTable:[],multipleSelection:[],dialogVisible:!1,adddialogVisible:!1,Moduledialog:!0,bigdislog:!1,deleteModule:!0,resourceType:"video",inputPlaceholder:"请输入视频资源ID / 名称",refname:"",coursesylllevel:"",currentId:"0",title:"",resourceTypeList:d,tag_id:"",resourceAction:"add",pagination:{current_page:1,total:1},resLoading:!1,resourceinput:"",searchResourceTimer:"",sortOptions:"",sourceRadio:1,handoutForm:{path:"",size:""},videoForm:{title:"",video_id:"",duration_minutes:"",duration_second:""},urltip:'[<script src="https://s.gaodun.com/web/static-player/loader.js?',urltip2:'-3" type="text/javascript"><\/script>]',currentSyllabusItemKnowledge:""}},methods:{goPreview:function(e){if(e.resource)if("video"===e.resource.discriminator){var t=this.$router.resolve({name:"previewVideo",params:{id:e.resource.id}});window.open(t.href,"_blank")}else if("resource_group"===e.resource.discriminator){var n=this.$router.resolve({name:"editResourceGroup",params:{id:e.resource.id}});window.open(n.href,"blank")}else this.$message({message:"该类型资源暂时不支持预览",type:"warning"});else this.$message({message:"此条目未挂资源",type:"warning"})},handleInputMinutesChange:function(e){var t=this;this.$nextTick(function(){t.videoForm.duration_minutes=t.videoForm.duration_minutes.replace(/[^\d]/g,"")})},handleInputSecondChange:function(e){var t=this;this.$nextTick(function(){t.videoForm.duration_second=t.videoForm.duration_second.replace(/[^\d]/g,"")})},copyId:function(e,t){var n=document.createElement("input");if(t){if(!t.resource)return void this.$message({message:"您还没有挂资源",type:"warning"});n.value=e+","+t.resource.id}else n.value=e;document.body.appendChild(n),n.select(),document.execCommand("Copy"),n.className="oInput",n.style.display="none",this.$message({message:"已将ID复制到剪贴板",type:"success"})},handleSaveKnowledgeDialog:function(e){var t=this;return s()(i.a.mark(function n(){var r,a,s,o;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.currentSyllabusItemKnowledge=e,t.knowledgeInfo=e[0].title,r=t.currentSyllabusItemKnowledge,a=t.currentId,s={knowledge_name:t.knowledgeInfo,syllabus_id:t.$route.params.sid},t.judgeid&&(s.kid=t.judgeid),o=r[0].id,n.next=9,t.$http.saveOutlineKnowledgeList(a,o,s);case 9:0===n.sent.status&&(t.dialogKnowledgeVisible=!1,t.getSyllabusItems());case 11:case"end":return n.stop()}},n,t)}))()},handleCloseKnowledgeDialog:function(){this.dialogKnowledgeVisible=!1},changeCurrentSyllabusItemKnowledge:function(e){this.currentSyllabusItemKnowledge=e,this.knowledgeInfo=e[0].title},handleChangeIsKnowledgeOpen:function(e){var t=this;return s()(i.a.mark(function n(){var r;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.$http.UpdateCourseSyllabus(t.syllabus_id,{is_knowledge_open:e?1:0,project_id:t.project_id,subject_id:t.subject_id,status:t.isAllowUse,title:t.title});case 2:0===n.sent.status?(r=e?"启用知识点关联成功":"已关闭知识点关联",t.$message({message:r,type:"success"})):t.$message({message:"修改大纲失败！",type:"error"});case 4:case"end":return n.stop()}},n,t)}))()},handleCheckboxChange:function(e){e.length>1&&(this.addResFirFrom.apply_to=e.splice(-1))},handleTableChange:function(e){console.log(e),e&&(this.resourceid=e.id,this.endType=e.discriminator,this.resourceRadio=String(e.id))},selectclk:function(e){this.addResFirFrom.apply_to=[],this.addResFirFrom.start_time="",this.resourceType=e},openAddResDialog:function(e){this.currentId=e.id,this.syllabusid=e.course_syllabus_id,this.active=0,this.addResFirFrom.name="",this.addResFirFrom.start_time="",this.addResFirFrom.study_time="",this.addResFirFrom.apply_to=[],this.resourceRadio="",this.resourceType="video",this.nativeResourceRadio="",this.dialogFormVisible=!0,this.resourceAction="add"},firstNextSubmit:function(e){var t,n=this;this.$refs[e].validate((t=s()(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}if(!(n.active>=n.progressText.length-1)){e.next=3;break}return e.abrupt("return");case 3:n.active++,e.next=7;break;case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,n)})),function(e){return t.apply(this,arguments)}))},secondSubmit:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.resourceType){t.next=5;break}return e.$message.warning("请选择资源类型！"),t.abrupt("return");case 5:"lecture_note"===e.resourceType?(e.handoutForm.path="",e.$refs.handoutUpload.clearAllFileList()):"video"===e.resourceType&&e.resetForm("videoForm");case 6:if(!(e.active>=e.progressText.length-1)){t.next=8;break}return t.abrupt("return");case 8:u.forEach(function(t){t.discriminator==e.resourceType&&(e.resourceTableConfig=t.table,e.inputPlaceholder=t.inputPlaceholder)}),e.active++,e.sourceRadio=2,e.resourceinput="",e.resourceTable=[],1!=e.pagination.current_page?e.pagination.current_page=1:e.searchResource();case 14:case"end":return t.stop()}},t,e)}))()},handleCurrentChange:function(e){var t=this;return s()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e=Number(e),t.searchResource(e);case 2:case"end":return n.stop()}},n,t)}))()},handleIconClick:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:1!=e.pagination.current_page?e.pagination.current_page=1:e.searchResource();case 1:case"end":return t.stop()}},t,e)}))()},searchResource:function(e){var t=this;clearTimeout(this.searchResourceTimer),this.resLoading=!0,this.searchResourceTimer=setTimeout(s()(i.a.mark(function n(){var r,a,s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:clearTimeout(t.searchResourceTimer),r={discriminator:t.resourceType,page_size:50,page:e||1,"order_by[]":"desc","order_by_field[]":"id",project_id:t.project_id},a=t.resourceinput.trim(),n.t0=t.resourceType,n.next="legacy_live"===n.t0?6:"paper"===n.t0?8:10;break;case 6:return Object(p.e)(a)?r.legacy_live_id=a:r.keywords=a,n.abrupt("break",12);case 8:return Object(p.e)(a)?r.paper_id=a:r.keywords=a,n.abrupt("break",12);case 10:return r.keywords=a,n.abrupt("break",12);case 12:return n.next=14,t.$http.getResource(r);case 14:0==(s=n.sent).status&&(t.resLoading=!1,t.resourceTable=s.result.resources,t.pagination.total=s.result.pagination.total);case 16:case"end":return n.stop()}},n,t)})),500)},prev:function(){this.active<=0||this.active--},handleSelectionChange:function(e){this.multipleSelection=e},addSyllabusResourceItem:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:2===e.sourceRadio?e.sourceRadio2Syllabus():1===e.sourceRadio&&e.sourceRadio1Syllabus();case 1:case"end":return t.stop()}},t,e)}))()},sourceRadio2Syllabus:function(){var e=this;return s()(i.a.mark(function t(){var n,r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.resourceRadio){t.next=2;break}return t.abrupt("return",e.$message({message:"请选择资源",type:"warning"}));case 2:return e.btnLoading=!0,n=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.next=6,e.checkResIsInOutline();case 6:if(t.sent){t.next=11;break}return e.btnLoading=!1,n.close(),t.abrupt("return");case 11:if(r=void 0,"add"!==e.resourceAction){t.next=18;break}return t.next=15,e.CourseSyllabusItem();case 15:r=t.sent,t.next=22;break;case 18:if("update"!==e.resourceAction){t.next=22;break}return t.next=21,e.ChangeSyllabusItem();case 21:r=t.sent;case 22:if(a=void 0,0!==r.status){t.next=43;break}return a=r.result.id,t.next=27,e.mountSyllabusResource(a);case 27:if(!e.resourceid||"add"!==e.resourceAction){t.next=33;break}if("legacy_live"!==e.endType){t.next=33;break}return t.next=31,e.$http.changeLive(0,e.resourceid,e.syllabusid);case 31:0!=t.sent.status&&e.message({message:"预约直播失败,请联系管理员",type:"warning"});case 33:if(!e.resourceid||"update"!==e.resourceAction){t.next=39;break}if("legacy_live"!==e.endType&&"legacy_live"!==e.startType){t.next=39;break}return t.next=37,e.$http.changeLive(e.liveid,e.resourceid,e.syllabusid);case 37:0!=t.sent.status&&e.message({message:"预约直播失败，请联系管理员",type:"warning"});case 39:e.btnLoading=!1,n.close(),t.next=46;break;case 43:return e.btnLoading=!1,n.close(),t.abrupt("return");case 46:case"end":return t.stop()}},t,e)}))()},sourceRadio1Syllabus:function(){var e=this;"lecture_note"===this.resourceType?this.lectureSourceCreateIntoSyllabus():"video"===this.resourceType&&this.$refs.videoForm.validate(function(t){t&&e.videoSourceCreateIntoSyllabus()})},videoSourceCreateIntoSyllabus:function(){var e=this;return s()(i.a.mark(function t(){var n,r,a,s,o,l,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.btnLoading=!0,n=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.next=4,e.getVideoPath();case 4:if(r=t.sent,a="",0!==r.status){t.next=14;break}if(r.result.video_id){t.next=11;break}return e.btnLoading=!1,n.close(),t.abrupt("return",e.$message({type:"warning",message:"视频地址解析失败！"}));case 11:a=r.result.video_id,t.next=21;break;case 14:if(1!=r.status){t.next=18;break}a=e.videoForm.video_id,t.next=21;break;case 18:return e.btnLoading=!1,n.close(),t.abrupt("return",e.$message({type:"warning",message:"视频地址解析失败！"}));case 21:return s={title:e.addResFirFrom.name,tag_payload_id:"0"==e.subject_id?e.project_id:e.subject_id,tag_payload_type:"0"==e.subject_id?"project":"subject",duration_minutes:e.videoForm.duration_minutes,duration_seconds:e.videoForm.duration_second?e.videoForm.duration_second:0,video_id:a},t.next=24,e.$http.createSyllabusVideoResource(s);case 24:if(0!==(o=t.sent).status){t.next=60;break}t.prev=26,e.resourceRadio=o.result.resource.id,t.next=35;break;case 30:return t.prev=30,t.t0=t.catch(26),e.btnLoading=!1,n.close(),t.abrupt("return",e.$message({message:"视频资源创建失败！",type:"error"}));case 35:if(l=void 0,"add"!==e.resourceAction){t.next=42;break}return t.next=39,e.CourseSyllabusItem();case 39:l=t.sent,t.next=46;break;case 42:if("update"!==e.resourceAction){t.next=46;break}return t.next=45,e.ChangeSyllabusItem();case 45:l=t.sent;case 46:if(c=void 0,0!==l.status){t.next=55;break}return c=l.result.id,t.next=51,e.mountSyllabusResource(c);case 51:e.btnLoading=!1,n.close(),t.next=58;break;case 55:return e.btnLoading=!1,n.close(),t.abrupt("return");case 58:t.next=63;break;case 60:return e.btnLoading=!1,n.close(),t.abrupt("return",e.$message({message:"视频资源创建失败！",type:"error"}));case 63:case"end":return t.stop()}},t,e,[[26,30]])}))()},lectureSourceCreateIntoSyllabus:function(){var e=this;return s()(i.a.mark(function t(){var n,r,a,s,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.handoutForm.path){t.next=2;break}return t.abrupt("return",e.$message({message:"请选择讲义上传！",type:"warning"}));case 2:return e.btnLoading=!0,n=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),r={tag_payload_id:"0"==e.subject_id?e.project_id:e.subject_id,tag_payload_type:"0"==e.subject_id?"project":"subject",title:e.addResFirFrom.name,path:e.handoutForm.path,size:e.handoutForm.size},t.next=7,e.$http.saveLecturenote(r);case 7:if(0!==(a=t.sent).status){t.next=43;break}t.prev=9,e.resourceRadio=a.result.id,t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(9),e.btnLoading=!1,n.close(),t.abrupt("return",e.$message({message:"讲义资源创建失败！",type:"error"}));case 18:if(s=void 0,"add"!==e.resourceAction){t.next=25;break}return t.next=22,e.CourseSyllabusItem();case 22:s=t.sent,t.next=29;break;case 25:if("update"!==e.resourceAction){t.next=29;break}return t.next=28,e.ChangeSyllabusItem();case 28:s=t.sent;case 29:if(o=void 0,0!==s.status){t.next=38;break}return o=s.result.id,t.next=34,e.mountSyllabusResource(o);case 34:e.btnLoading=!1,n.close(),t.next=41;break;case 38:return e.btnLoading=!1,n.close(),t.abrupt("return");case 41:t.next=46;break;case 43:return e.btnLoading=!1,n.close(),t.abrupt("return",e.$message({message:"讲义资源创建失败！",type:"error"}));case 46:case"end":return t.stop()}},t,e,[[9,13]])}))()},getHandoutPath:function(e){this.handoutForm.path=e.path,this.handoutForm.size=e.size},checkResIsInOutline:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("update"!==e.resourceAction||e.nativeResourceRadio!=e.resourceRadio){t.next=2;break}return t.abrupt("return",!0);case 2:return t.next=4,e.$http.checkResIsInOutline(e.syllabus_id,e.resourceRadio);case 4:if(0!==(n=t.sent).status){t.next=15;break}if(!(n.result.length>0)){t.next=12;break}return e.resourceRadio="",e.$message({type:"error",message:"该资源已经挂载在这个大纲上！"}),t.abrupt("return",!1);case 12:return t.abrupt("return",!0);case 13:t.next=16;break;case 15:return t.abrupt("return",!1);case 16:case"end":return t.stop()}},t,e)}))()},CourseSyllabusItem:function(){var e=this;return s()(i.a.mark(function t(){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={name:e.addResFirFrom.name,pid:e.currentId,course_syllabus_id:e.syllabus_id},e.addResFirFrom.study_time&&(n.study_time=e.addResFirFrom.study_time),e.addResFirFrom.start_time&&(n.start_time=e.addResFirFrom.start_time),void 0!=e.addResFirFrom.apply_to&&null!=e.addResFirFrom.apply_to&&0!==e.addResFirFrom.apply_to.length&&(n.apply_to=e.addResFirFrom.apply_to[0]),t.next=6,e.$http.CourseSyllabusItem(n);case 6:if(0!==(r=t.sent).status){t.next=11;break}return t.abrupt("return",r);case 11:return e.$message.error("添加失败！"),t.abrupt("return",r);case 13:case"end":return t.stop()}},t,e)}))()},ChangeSyllabusItem:function(){var e=this;return s()(i.a.mark(function t(){var n,r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.currentId,r={name:e.addResFirFrom.name,course_syllabus_id:e.syllabus_id},e.addResFirFrom.study_time&&(r.study_time=e.addResFirFrom.study_time),e.addResFirFrom.start_time&&(r.start_time=e.addResFirFrom.start_time),void 0!=e.addResFirFrom.apply_to&&null!=e.addResFirFrom.apply_to&&0!==e.addResFirFrom.apply_to.length&&(r.apply_to=e.addResFirFrom.apply_to[0]),t.next=7,e.$http.ChangeSyllabusItem(n,r);case 7:if(0!==(a=t.sent).status){t.next=12;break}return t.abrupt("return",a);case 12:return e.$message.error("添加失败！"),t.abrupt("return",a);case 14:case"end":return t.stop()}},t,e)}))()},mountSyllabusResource:function(e){var t=this;return s()(i.a.mark(function n(){var r,a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={resource_id:t.resourceRadio,tag_id:t.tag_id,course_syllabus_id:t.syllabus_id},n.next=3,t.$http.mountSyllabusResource(e,r);case 3:0===(a=n.sent).status?(t.$message({type:"success",message:"add"===t.resourceAction?"新增资源成功！":"修改资源成功！"}),t.dialogFormVisible=!1,t.getSyllabusItems()):2===a.status&&t.$message({message:"add"===t.resourceAction?"新增资源失败！":"修改资源失败！",type:"error"});case 5:case"end":return n.stop()}},n,t)}))()},updateSyllabusResource:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:2===e.sourceRadio?e.sourceRadio2Syllabus():1===e.sourceRadio&&e.sourceRadio1Syllabus();case 1:case"end":return t.stop()}},t,e)}))()},openeEditResource:function(e){console.log(e),this.syllabusid=e.course_syllabus_id,this.startType=e.resource?e.resource.discriminator:"",e.resource&&"legacy_live"===e.resource.discriminator?this.liveid=e.resource.live_id:this.liveid=0,this.active=0,this.addResFirFrom.name=e.name,this.addResFirFrom.apply_to=e.apply_to?[e.apply_to]:[],this.addResFirFrom.start_time=e.start_time,this.addResFirFrom.study_time=e.study_time,this.currentId=e.id,this.resourceRadio=e.resource&&String(e.resource.id),this.nativeResourceRadio=e.resource&&String(e.resource.id),this.resourceType=e.resource&&e.resource.discriminator,this.dialogFormVisible=!0,this.resourceAction="update"},openDelResDialog:function(e){this.syllabusid=e.course_syllabus_id,this.startType=e.resource?e.resource.discriminator:"",e.resource&&"legacy_live"===e.resource.discriminator?this.liveid=e.resource.live_id:this.liveid=0,this.currentId=e.id,this.dialogVisible=!0,this.deleteModule=!1},openDelOutlineDialog:function(e){this.currentId=e.id,this.dialogVisible=!0,this.deleteModule=!0},confirmDelete:function(){var e=this;return s()(i.a.mark(function t(){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.currentId,r={course_syllabus_id:e.syllabus_id},t.next=4,e.$http.DeleteSyllabusItem(n,r);case 4:if(0!=t.sent.status){t.next=15;break}if(e.$message({message:"删除成功",type:"success"}),e.getSyllabusItems(),!e.startType||"legacy_live"!==e.startType){t.next=13;break}return t.next=11,e.$http.changeLive(e.liveid,0,e.syllabusid);case 11:0!=t.sent.status&&e.$message({message:"直播预约清除失败，请联系管理员",type:"warning"});case 13:t.next=15;break;case 15:e.dialogVisible=!1;case 16:case"end":return t.stop()}},t,e)}))()},openChildDialog:function(e,t){this.adddialogVisible=!0,this.Moduledialog=!0,this.bigdislog=!1,this.ruleProject.name="",this.currentId=e},openFirLvDialog:function(){this.adddialogVisible=!0,this.Moduledialog=!0,this.bigdislog=!0,this.ruleProject.name="",this.currentId="0"},addruleProject:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.adddialogVisible=!1,1!=t.Moduledialog?t.$refs[t.refname][0].innerText=t.ruleProject.name:t.addbigCourse()})},addbigCourse:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.btnLoading=!0,t.next=3,e.$http.CourseSyllabusItem({name:e.ruleProject.name,pid:e.currentId,course_syllabus_id:e.syllabus_id});case 3:n=t.sent,e.btnLoading=!1,0==n.status?(n.message="添加成功！",e.currentId="0",e.getSyllabusItems()):n.message="添加失败！",e.$message({message:n.message,type:"success"});case 7:case"end":return t.stop()}},t,e)}))()},updateruleProject:function(e){var t,n=this;this.$refs[e].validate((t=s()(i.a.mark(function e(t){var r,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return r=n.currentId,a={name:n.ruleProject.name,course_syllabus_id:n.syllabus_id},n.btnLoading=!0,e.next=6,n.$http.ChangeSyllabusItem(r,a);case 6:s=e.sent,n.btnLoading=!1,0==s.status?(n.$message({message:"修改成功！",type:"success"}),n.adddialogVisible=!1,n.getSyllabusItems()):n.$message.error("修改失败！"),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,n)})),function(e){return t.apply(this,arguments)}))},editproject:function(e,t){this.currentId=e,this.ruleProject.name=t,this.adddialogVisible=!0,this.Moduledialog=!1},getSyllabusItems:function(){var e=this;return s()(i.a.mark(function t(){var n,r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.$loading({lock:!0,text:"正在拼命获取课程大纲数据...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),r={course_syllabus_id:e.syllabus_id},t.next=4,e.$http.getSyllabusItems(r);case 4:a=t.sent,n.close(),0==a.status?e.tabledata=a.result:e.$message({message:"获取课程大纲条目失败！"});case 7:case"end":return t.stop()}},t,e)}))()},checkSyllabus:function(){var e=this;return s()(i.a.mark(function t(){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.checkSyllabus(e.syllabus_id);case 2:0==(n=t.sent).status&&(e.title=n.result.title,e.tag_id=n.result.tag_id,e.is_knowledge_open=0!==n.result.is_knowledge_open,e.project_id=n.result.project.id,e.isAllowUse=n.result.status,e.subject_id=n.result.subject.id,e.coursesylllevel=n.result.template.level_max);case 4:case"end":return t.stop()}},t,e)}))()},dragEnd:function(e){var t=this;return s()(i.a.mark(function e(){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sortOptions&&t.sortOptions.parmas.near_by){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.sortSyllabus(t.sortOptions.id,t.sortOptions.parmas);case 4:n=e.sent,t.sortOptions="",0==n.status?(t.message({type:"success",message:"排序成功！"}),t.getSyllabusItems()):t.message({type:"warning",message:"排序失败！"});case 7:case"end":return e.stop()}},e,t)}))()},onMoveCallback:function(e,t){var n=0;n=e.draggedContext.futureIndex>e.draggedContext.index?1:-1,this.sortOptions={id:e.draggedContext.element.id,parmas:{near_by:e.relatedContext.element&&e.relatedContext.element.id,direction:n,course_syllabus_id:this.syllabus_id}}},handleInputChange:function(e){""==e&&(this.videoForm.duration_second=0)},getVideoPath:function(){var e=this;return s()(i.a.mark(function t(){var n,r,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(p.b)(e.videoForm.video_id),r={url:n},t.next=4,e.$http.getVideoPath(r);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){this.$refs[e].resetFields()},handleOpenKnowledgeDialog:function(e){var t=this;return s()(i.a.mark(function n(){var r,a,s;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.currentId=e.id,e.kid?t.judgeid=e.kid:t.judgeid="",r={project_id:t.project_id,subject_id:t.subject_id},n.next=5,t.$http.getOutlineKnowledgeList(r);case 5:0===(a=n.sent).status&&(t.knowledgeList=a.result.result.contents?a.result.result.contents:[]),s=-1,e.knowledge_id&&(s=e.knowledge_id),setTimeout(function(){t.$refs.selectKnowledge.showSelectSyllabusKnowledge(s)},0),t.dialogKnowledgeVisible=!0;case 11:case"end":return n.stop()}},n,t)}))()},getOutlineKnowledgeList:function(){var e=this;return s()(i.a.mark(function t(){var n,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={project_id:e.project_id,subject_id:e.subject_id},t.next=3,e.$http.getOutlineKnowledgeList(n);case 3:0===(r=t.sent).status&&(e.knowledgeList=r.result.result.contents);case 5:case"end":return t.stop()}},t,e)}))()}},computed:{syllabus_id:function(){return this.$route.params.sid}},mounted:function(){for(var e=1;e<=120;e++)this.study_time_options.push({value:e})},created:function(){this.getSyllabusItems(),this.checkSyllabus()}},w={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"module-edu-content permission-outlinemodule"},[n("el-row",{staticClass:"outlineeat"},[n("el-col",{attrs:{span:18}},[e._v("\n      课程大纲："+e._s(e.title)+"\n    ")]),e._v(" "),4===e.coursesylllevel&&0!=e.subject_id?n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[n("el-switch",{attrs:{"active-text":"是否启用知识点关联"},on:{change:e.handleChangeIsKnowledgeOpen},model:{value:e.is_knowledge_open,callback:function(t){e.is_knowledge_open=t},expression:"is_knowledge_open"}})],1):e._e()],1),e._v(" "),n("div",{staticClass:"outlinebox"},[n("div",{staticClass:"chapterbox"},[3===e.coursesylllevel?e._l(e.tabledata,function(t){return n("div",{key:t.id,staticClass:"first-chapter-box"},[n("div",{staticClass:"chaptit"},[n("span",{staticClass:"chlft"},[e._v(e._s(t.name)+" "),n("span",{staticClass:"gray"},[e._v(" （条目ID："+e._s(t.id)+"）")])]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目ID")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelOutlineDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.openChildDialog(t.id)}}},[e._v("增加子目录")])],1),e._v(" "),n("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".second-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"firstItem.children"}},e._l(t.children,function(t){return n("div",{key:t.id,staticClass:"second-chapter-box"},[n("div",{staticClass:"chaptit chapsecd"},[n("span",{staticClass:"chlft"},[e._v(e._s(t.name)),n("span",{staticClass:"gray"},[e._v("（条目ID："+e._s(t.id)+"）")])]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目ID")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelOutlineDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),n("span",{staticClass:"chrgt",staticStyle:{color:"#FF9C1C"},on:{click:function(n){e.openAddResDialog(t)}}},[e._v("新增资源")])],1),e._v(" "),n("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".third-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"secItem.children"}},e._l(t.children,function(t){return n("div",{key:t.id,staticClass:"resourcebox third-chapter-box"},[n("div",{staticClass:"knowledge"},[n("span",{staticClass:"chlft"},["1"==t.apply_to||"2"==t.apply_to?n("span",{staticClass:"dif-type"},[e._v(e._s("2"==t.apply_to?"提分盒子":"1"==t.apply_to?"跳级测试":""))]):e._e(),e._v(" "),t.resource&&"1"!=t.apply_to&&"2"!=t.apply_to?n("span",{staticClass:"dif-type"},[e._v(e._s(e._f("Resource2chn")(t.resource&&t.resource.discriminator)))]):e._e(),e._v(" \n                      "+e._s(t.name)+"\n                      "),n("span",{staticClass:"gray"},[e._v("（条目ID："+e._s(t.id)),t.resource?[e._v("\n                        资源ID："+e._s(t.resource&&t.resource.id))]:e._e(),e._v("）\n                        "),t.study_time&&"0"!=t.study_time?[n("span",{staticClass:"chline"},[e._v("|")]),e._v("建议学习："+e._s(t.study_time)+"分钟")]:e._e()],2)]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id,t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目/资源ID")])]),e._v(" "),n("el-dropdown-item",[n("span",{staticClass:"dropdown-child"},[e._v("设置试听\n                                "),n("el-switch",{attrs:{"active-color":"#2884E0","inactive-color":"#BFBFBF"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.goPreview(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("预览")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelResDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.openeEditResource(t)}}},[e._v("修改")])],1)])}))],1)}))],1)}):e._e(),e._v(" "),4===e.coursesylllevel?e._l(e.tabledata,function(t){return n("div",{key:t.id,staticClass:"first-chapter-box"},[n("div",{staticClass:"chaptit"},[n("span",{staticClass:"chlft"},[e._v(e._s(t.name)),n("span",{staticClass:"gray"},[e._v("（条目ID："+e._s(t.id)+"）")])]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目ID")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelOutlineDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.openChildDialog(t.id)}}},[e._v("增加子目录")])],1),e._v(" "),n("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".second-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"firstItem.children"}},e._l(t.children,function(t){return n("div",{key:t.id,staticClass:"second-chapter-box"},[n("div",{staticClass:"chaptit chapsecd"},[n("span",{staticClass:"chlft"},[e._v(e._s(t.name)),n("span",{staticClass:"gray"},[e._v("（条目ID："+e._s(t.id)+"）")])]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目ID")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelOutlineDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.openChildDialog(t.id,!0)}}},[e._v("增加子目录")])],1),e._v(" "),n("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".third-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"secItem.children"}},e._l(t.children,function(t){return n("div",{key:t.id,staticClass:"third-chapter-box"},[n("div",{staticClass:"knowledge"},[n("span",{staticClass:"chlft"},[n("span",[e._v(" "+e._s(t.name)+" "),n("span",{staticClass:"gray"},[e._v("（条目ID："+e._s(t.id)+"）")])]),e._v("   "),t.knowledge_id?n("span",{staticClass:"connect-knowledage"},[e._v("关联："+e._s(t.knowledge_id)+"  "+e._s(t.knowledge_name))]):e._e()]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目ID")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.handleOpenKnowledgeDialog(t)}}},[0!=e.subject_id?n("span",{staticClass:"dropdown-child"},[e._v("关联知识点")]):e._e()]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelOutlineDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),n("span",{staticClass:"chrgt",staticStyle:{color:"#FF9C1C"},on:{click:function(n){e.openAddResDialog(t)}}},[e._v("新增资源")])],1),e._v(" "),n("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".fourth-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"thirdItem.children"}},e._l(t.children,function(t){return n("div",{key:t.id,staticClass:"resourcebox fourth-chapter-box"},[n("div",{staticClass:"knowledge"},[n("span",{staticClass:"chlft"},["2"==t.apply_to||"1"==t.apply_to?n("span",{staticClass:"dif-type"},[e._v(e._s("2"==t.apply_to?"提分盒子":"1"==t.apply_to?"跳级测试":""))]):e._e(),e._v(" "),t.resource&&"2"!=t.apply_to&&"1"!=t.apply_to?n("span",{staticClass:"dif-type"},[e._v(e._s(e._f("Resource2chn")(t.resource&&t.resource.discriminator)))]):e._e(),e._v(" \n                          "+e._s(t.name)+"\n                          "),n("span",{staticClass:"gray"},[e._v("\n                            （条目ID："+e._s(t.id)),t.resource?[e._v("  资源ID："+e._s(t.resource&&t.resource.id))]:e._e(),e._v("）\n                            "),t.study_time&&"0"!=t.study_time?[n("span",{staticClass:"chline"},[e._v("|")]),e._v("建议学习："+e._s(t.study_time)+"分钟")]:e._e()],2)]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id,t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目/资源ID")])]),e._v(" "),n("el-dropdown-item",[n("span",{staticClass:"dropdown-child"},[e._v("\n                                    设置试听\n                                    "),n("el-switch",{attrs:{"active-color":"#2884E0","inactive-color":"#BFBFBF"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.goPreview(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("预览")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelResDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.openeEditResource(t)}}},[e._v("修改")])],1)])}))],1)}))],1)}))],1)}):e._e(),e._v(" "),2===e.coursesylllevel?e._l(e.tabledata,function(t){return n("div",{key:t.id,staticClass:"first-chapter-box"},[n("div",{staticClass:"chaptit"},[n("span",{staticClass:"chlft"},[e._v(e._s(t.name)+" "),n("span",{staticClass:"gray"},[e._v("（条目ID："+e._s(t.id)+"） ")])]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目ID")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelOutlineDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),n("span",{staticClass:"chrgt",staticStyle:{color:"#FF9C1C"},on:{click:function(n){e.openAddResDialog(t)}}},[e._v("新增资源")])],1),e._v(" "),n("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".second-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(n){e.$set(t,"children",n)},expression:"firstItem.children"}},e._l(t.children,function(t){return n("div",{key:t.id,staticClass:"resourcebox second-chapter-box"},[n("div",{staticClass:"knowledge"},[n("span",{staticClass:"chlft"},["2"==t.apply_to||"1"==t.apply_to?n("span",{staticClass:"dif-type"},[e._v(e._s("2"==t.apply_to?"提分盒子":"1"==t.apply_to?"跳级测试":""))]):e._e(),e._v(" "),t.resource&&"2"!=t.apply_to&&"1"!=t.apply_to?n("span",{staticClass:"dif-type"},[e._v(e._s(e._f("Resource2chn")(t.resource&&t.resource.discriminator)))]):e._e(),e._v(" \n                  "+e._s(t.name)+"\n                  "),n("span",{staticClass:"gray"},[e._v("\n                   （条目ID："+e._s(t.id)),t.resource?[e._v(" 资源ID："+e._s(t.resource&&t.resource.id))]:e._e(),e._v("）\n                    "),t.study_time&&"0"!=t.study_time?[n("span",{staticClass:"chline"},[e._v("|")]),e._v("建议学习："+e._s(t.study_time)+"分钟")]:e._e()],2)]),e._v(" "),n("el-row",{staticClass:"chrgt",staticStyle:{width:"60px"}},[n("el-col",{attrs:{span:12}},[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#2CA4D9"}},[e._v("更多")]),e._v(" "),n("el-dropdown-menu",{staticStyle:{"margin-top":"0px"},attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(n){e.copyId(t.id,t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("复制条目/资源ID")])]),e._v(" "),n("el-dropdown-item",[n("span",{staticClass:"dropdown-child"},[e._v("\n                            设置试听\n                            "),n("el-switch",{attrs:{"active-color":"#2884E0","inactive-color":"#BFBFBF"},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1)]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.goPreview(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("预览")])]),e._v(" "),n("el-dropdown-item",{nativeOn:{click:function(n){e.openDelResDialog(t)}}},[n("span",{staticClass:"dropdown-child"},[e._v("删除")])])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"chrgt",on:{click:function(n){e.openeEditResource(t)}}},[e._v("修改")])],1)])}))],1)}):e._e(),e._v(" "),n("div",{staticClass:"chaptit additem"},[n("span",{on:{click:e.openFirLvDialog}},[e._v("新增一级大纲目录")])])],2)]),e._v(" "),n("el-dialog",{staticClass:"tabplane addResourceDialog",attrs:{title:"选择学习资源",width:"60%",top:"2%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-steps",{staticStyle:{"margin-top":"-10px","margin-bottom":"10px"},attrs:{active:e.active,"finish-status":"finish",simple:""}},e._l(e.progressText,function(e,t){return n("el-step",{key:t,attrs:{title:e.text,description:""}})})),e._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}],ref:"addResFirFrom",staticClass:"demo-ruleForm",attrs:{model:e.addResFirFrom,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"显示名称",prop:"name",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:100})}},[n("el-input",{staticClass:"coursetxt",nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.firstNextSubmit("addResFirFrom")}},model:{value:e.addResFirFrom.name,callback:function(t){e.$set(e.addResFirFrom,"name",t)},expression:"addResFirFrom.name"}})],1),e._v(" "),n("el-row",{staticClass:"ep-set-box"},[n("p",{staticClass:"ep-line"}),e._v(" "),n("span",{staticClass:"ep-tips"},[e._v("以下设置为EP专用：（选填）")])]),e._v(" "),n("el-form-item",{attrs:{label:"建议学习时长",prop:"study_time"}},[n("el-select",{attrs:{"popper-class":"study-time-select",clearable:"",placeholder:"请选择"},model:{value:e.addResFirFrom.study_time,callback:function(t){e.$set(e.addResFirFrom,"study_time",t)},expression:"addResFirFrom.study_time"}},e._l(e.study_time_options,function(e){return n("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),e._v("\n        分钟\n      ")],1),e._v(" "),n("el-form-item",{staticClass:"coursebtn"},[n("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(t){e.firstNextSubmit("addResFirFrom")}}},[e._v("下一步")])],1)],1),e._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}],staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[n("div",{staticClass:"selectmodel"},e._l(e.resourceTypeList,function(t,r){return n("span",{key:r,class:[e.resourceType==t.discriminator?"is-active":""],staticStyle:{position:"relative"},on:{click:function(n){e.selectclk(t.discriminator)}}},[e._v("\n          "+e._s(t.label)+"\n          "),"resource_group"==t.discriminator?n("div",{staticStyle:{width:"100%","font-size":"10px",position:"absolute",top:"25px"}},[e._v("注：仅用于多老师")]):e._e()])})),e._v(" "),"paper"===e.resourceType?n("el-row",{staticClass:"ep-set-box"},[n("p",{staticClass:"ep-line"}),e._v(" "),n("span",{staticClass:"ep-tips"},[e._v("以下设置为EP专用：（选填）")])]):e._e(),e._v(" "),"paper"===e.resourceType?n("el-form-item",{attrs:{label:"资源应用"}},[n("el-checkbox-group",{on:{change:e.handleCheckboxChange},model:{value:e.addResFirFrom.apply_to,callback:function(t){e.$set(e.addResFirFrom,"apply_to",t)},expression:"addResFirFrom.apply_to"}},[n("el-checkbox",{attrs:{label:"1"}},[e._v("跳级测试")]),e._v(" "),n("el-checkbox",{attrs:{label:"2"}},[e._v("提分盒子")])],1)],1):e._e(),e._v(" "),"paper"===e.resourceType?n("el-form-item",{attrs:{label:"开启时间",prop:"start_time"}},[n("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"请设置开启时间"},model:{value:e.addResFirFrom.start_time,callback:function(t){e.$set(e.addResFirFrom,"start_time",t)},expression:"addResFirFrom.start_time"}})],1):e._e(),e._v(" "),n("el-form-item",{staticClass:"coursebtn"},[n("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),n("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.secondSubmit}},[e._v("下一步")])],1)],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}],staticClass:"rulemodule"},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:"video"===e.resourceType||"lecture_note"===e.resourceType,expression:"resourceType === 'video' || resourceType === 'lecture_note'"}],attrs:{"label-position":"left","label-width":"80px"}},[n("el-form-item",{attrs:{label:"来源"}},[n("el-radio-group",{model:{value:e.sourceRadio,callback:function(t){e.sourceRadio=t},expression:"sourceRadio"}},[n("el-radio",{attrs:{label:1}},[e._v("上传/创建资源")]),e._v(" "),n("el-radio",{attrs:{label:2}},[e._v("从已有资源选择")])],1)],1)],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.sourceRadio&&"lecture_note"===e.resourceType,expression:"sourceRadio === 1 && resourceType === 'lecture_note'"}]},[n("HandoutUpload",{ref:"handoutUpload",on:{getHandoutPath:e.getHandoutPath}})],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.sourceRadio&&"video"===e.resourceType,expression:"sourceRadio === 1 && resourceType === 'video'"}]},[n("el-form",{ref:"videoForm",staticClass:"resource-ruleForm",attrs:{model:e.videoForm,"label-position":"left","label-width":"120px"}},[n("el-form-item",{attrs:{label:"视频地址",prop:"video_id",rules:e.filter_rules({required:!0,type:"isVideoId"})}},[n("el-input",{attrs:{placeholder:"请输入视频地址","auto-complete":"off"},model:{value:e.videoForm.video_id,callback:function(t){e.$set(e.videoForm,"video_id",t)},expression:"videoForm.video_id"}}),e._v(" "),n("el-tooltip",{attrs:{placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                只需要输入地址中不同部分即可,如示例:红色部分："),n("br"),e._v(e._s(e.urltip)+"\n                "),n("span",{staticStyle:{color:"red"}},[e._v("16oe3We00h1ye2hZ")]),e._v(e._s(e.urltip2))]),e._v(" "),n("i",{staticClass:"el-icon-info"})])],1),e._v(" "),n("el-form-item",{staticClass:"displayinline",attrs:{label:"视频时长（分）",prop:"duration_minutes",rules:[{required:!0,message:"请填写视频时长的分钟",trigger:"blur"}].concat(e.valiMinites)}},[n("el-input",{attrs:{placeholder:"请填写视频时长的分钟","auto-complete":"off"},on:{input:e.handleInputMinutesChange},model:{value:e.videoForm.duration_minutes,callback:function(t){e.$set(e.videoForm,"duration_minutes",t)},expression:"videoForm.duration_minutes"}}),e._v("\n            分\n          ")],1),e._v(" "),n("el-form-item",{staticClass:"displayinline",attrs:{label:"视频时长（秒）",prop:"duration_second",rules:e.valiSeconds}},[n("el-input",{attrs:{placeholder:"请填写视频时长的秒","auto-complete":"off"},on:{input:e.handleInputSecondChange,change:e.handleInputChange},model:{value:e.videoForm.duration_second,callback:function(t){e.$set(e.videoForm,"duration_second",t)},expression:"videoForm.duration_second"}}),e._v("\n            秒\n          ")],1)],1)],1),e._v(" "),n("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.sourceRadio,expression:"sourceRadio === 2"}]},[n("el-input",{attrs:{placeholder:e.inputPlaceholder,size:"small"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleIconClick(t):null}},model:{value:e.resourceinput,callback:function(t){e.resourceinput=t},expression:"resourceinput"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleIconClick},slot:"append"})],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resLoading,expression:"resLoading"}],ref:"singleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.resourceTable,border:"","tooltip-effect":"dark","max-height":"400","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleTableChange}},e._l(e.resourceTableConfig,function(t,r){return n("el-table-column",{key:r,attrs:{label:t.label,width:t.wh,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(r){return["id"==t.key||"paper_id"==t.key||"live_id"==t.key?[n("el-radio",{staticClass:"radio",attrs:{label:String(r.row.id)},model:{value:e.resourceRadio,callback:function(t){e.resourceRadio=t},expression:"resourceRadio"}}),e._v(" "),n("span",[e._v(e._s(r.row[t.key]))])]:"discriminator"==t.key?n("span",[e._v(e._s(e._f("Resource2chn")(r.row[t.key])))]):n("span",[e._v(e._s(r.row[t.key]))])]}}])})})),e._v(" "),n("el-pagination",{attrs:{"current-page":e.pagination.current_page,"page-size":50,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pagination,"current_page",t)}}})],1),e._v(" "),n("div",{staticClass:"coursebtn",staticStyle:{"padding-top":"0","margin-top":"20px"}},[n("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),"add"==e.resourceAction?n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.addSyllabusResourceItem}},[e._v(e._s(e.btnLoading?"新增中":"确 定")+"\n        ")]):e._e(),e._v(" "),"update"==e.resourceAction?n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.updateSyllabusResource}},[e._v(e._s(e.btnLoading?"新增中":"确 定")+"\n        ")]):e._e()],1)],1)],1),e._v(" "),n("el-dialog",{staticClass:"tabplane",attrs:{title:e.deleteModule?"删除课程大纲目录":"删除已选资源",visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("span",[e._v(e._s(e.deleteModule?"确定要删除该课程大纲目录吗？删除后，该目录下的子目录及资源关系均将被删除！":"确定要删除已选择的资源吗？"))]),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmDelete}},[e._v("确 定")])],1)]),e._v(" "),n("SelectKnowledge",{ref:"selectKnowledge",attrs:{"dialog-knowledge-visible":e.dialogKnowledgeVisible,"knowledge-list":e.knowledgeList,"current-syllabus-item-knowledge":e.currentSyllabusItemKnowledge},on:{changeCurrentSyllabusItemKnowledge:e.changeCurrentSyllabusItemKnowledge,handleCloseKnowledgeDialog:e.handleCloseKnowledgeDialog,handleSaveKnowledgeDialog:e.handleSaveKnowledgeDialog}}),e._v(" "),n("el-dialog",{staticClass:"tabplane",attrs:{title:e.Moduledialog?e.bigdislog?"新增一级大纲目录":"新增课程大纲子目录":"修改课程大纲名称",center:"",visible:e.adddialogVisible,size:"tiny"},on:{"update:visible":function(t){e.adddialogVisible=t}}},[n("el-form",{ref:"ruleProject",staticClass:"demo-ruleForm",attrs:{model:e.ruleProject,"label-width":"120px"}},[n("el-form-item",{attrs:{label:"显示名称",prop:"name",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:100})}},[n("el-input",{staticClass:"coursetxt",model:{value:e.ruleProject.name,callback:function(t){e.$set(e.ruleProject,"name",t)},expression:"ruleProject.name"}})],1)],1),e._v(" "),n("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.adddialogVisible=!1}}},[e._v("取 消")]),e._v(" "),1==e.Moduledialog?n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.addruleProject("ruleProject")}}},[e._v(e._s(e.btnLoading?"新增中":"确 定")+"\n      ")]):n("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.updateruleProject("ruleProject")}}},[e._v("\n        "+e._s(e.btnLoading?"保存中":"保 存")+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var x=n("vSla")(y,w,!1,function(e){n("+E7C")},null,null);t.default=x.exports},"405r":function(e,t,n){"use strict";var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(){function t(e){function t(e){e.parentElement.removeChild(e)}function n(e,t,n){var r=0===n?e.children[0]:e.children[n-1].nextSibling;e.insertBefore(t,r)}function a(e,t){var n=this;this.$nextTick(function(){return n.$emit(e.toLowerCase(),t)})}var s=["Start","Add","Remove","Update","End"],o=["Choose","Sort","Filter","Clone"],l=["Move"].concat(s,o).map(function(e){return"on"+e}),c=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var n=t[0];n.componentOptions&&"transition-group"===n.componentOptions.tag&&(this.transitionMode=!0)}var r=t,a=this.$slots.footer;a&&(r=t?[].concat(i(t),i(a)):[].concat(i(a)));var s=null,o=function(e,t){s=function(e,t,n){return void 0==n?e:((e=null==e?{}:e)[t]=n,e)}(s,e,t)};if(o("attrs",this.$attrs),this.componentData){var l=this.componentData,c=l.on,d=l.props;o("on",c),o("props",d)}return e(this.element,s,r)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var n={};s.forEach(function(e){n["on"+e]=function(e){var t=this;return function(n){null!==t.realList&&t["onDrag"+e](n),a.call(t,e,n)}}.call(t,e)}),o.forEach(function(e){n["on"+e]=a.bind(t,e)});var i=r({},this.options,n,{onMove:function(e,n){return t.onDragMove(e,n)}});!("draggable"in i)&&(i.draggable=">*"),this._sortable=new e(this.rootContainer,i),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==l.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,n){if(!e)return[];var r=e.map(function(e){return e.elm}),a=[].concat(i(t)).map(function(e){return r.indexOf(e)});return n?a.filter(function(e){return-1!==e}):a}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(i(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var n=function(n){return n.splice(t,0,n.splice(e,1)[0])};this.alterList(n)},getRelatedContextFromMoveEvent:function(e){var t=e.to,n=e.related,i=this.getUnderlyingPotencialDraggableComponent(t);if(!i)return{component:i};var a=i.realList,s={list:a,component:i};if(t!==n&&a&&i.getUnderlyingVm){var o=i.getUnderlyingVm(n);if(o)return r(o,s)}return s},getVmIndex:function(e){var t=this.visibleIndexes,n=t.length;return e>n-1?n:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),c=e.item},onDragAdd:function(e){var n=e.item._underlying_vm_;if(void 0!==n){t(e.item);var r=this.getVmIndex(e.newIndex);this.spliceList(r,0,n),this.computeIndexes();var i={element:n,newIndex:r};this.emitChanges({added:i})}},onDragRemove:function(e){if(n(this.rootContainer,e.item,e.oldIndex),this.isCloning)t(e.clone);else{var r=this.context.index;this.spliceList(r,1);var i={element:this.context.element,oldIndex:r};this.resetTransitionData(r),this.emitChanges({removed:i})}},onDragUpdate:function(e){t(e.item),n(e.from,e.item,e.oldIndex);var r=this.context.index,i=this.getVmIndex(e.newIndex);this.updatePosition(r,i);var a={element:this.context.element,oldIndex:r,newIndex:i};this.emitChanges({moved:a})},computeFutureIndex:function(e,t){if(!e.element)return 0;var n=[].concat(i(t.to.children)).filter(function(e){return"none"!==e.style.display}),r=n.indexOf(t.related),a=e.component.getVmIndex(r);return-1!=n.indexOf(c)||!t.willInsertAfter?a:a+1},onDragMove:function(e,t){var n=this.move;if(!n||!this.realList)return!0;var i=this.getRelatedContextFromMoveEvent(e),a=this.context,s=this.computeFutureIndex(i,e);return r(a,{futureIndex:s}),r(e,{relatedContext:i,draggedContext:a}),n(e,t)},onDragEnd:function(e){this.computeIndexes(),c=null}}}}Array.from||(Array.from=function(e){return[].slice.call(e)});var a=n("HOBB");e.exports=t(a)}()},"9q3u":function(e,t){},HOBB:function(e,t,n){var r,i;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(a){"use strict";void 0===(i="function"==typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=i)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,n,r,i,a,s,o,l,c,d,u,p,h,v,g,m,f,_,b,y,w={},x=/\s+/g,C=/left|right|inline/,k="Sortable"+(new Date).getTime(),D=window,S=D.document,F=D.parseInt,I=D.setTimeout,R=D.jQuery||D.Zepto,T=D.Polymer,$=!1,O="draggable"in S.createElement("div"),L=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((y=S.createElement("x")).style.cssText="pointer-events:auto","auto"===y.style.pointerEvents),j=!1,E=Math.abs,P=Math.min,A=[],M=[],N=re(function(e,t,n){if(n&&t.scroll){var r,i,a,s,d,u,p=n[k],h=t.scrollSensitivity,v=t.scrollSpeed,g=e.clientX,m=e.clientY,f=window.innerWidth,_=window.innerHeight;if(l!==n&&(o=t.scroll,l=n,c=t.scrollFn,!0===o)){o=n;do{if(o.offsetWidth<o.scrollWidth||o.offsetHeight<o.scrollHeight)break}while(o=o.parentNode)}o&&(r=o,i=o.getBoundingClientRect(),a=(E(i.right-g)<=h)-(E(i.left-g)<=h),s=(E(i.bottom-m)<=h)-(E(i.top-m)<=h)),a||s||(s=(_-m<=h)-(m<=h),((a=(f-g<=h)-(g<=h))||s)&&(r=D)),w.vx===a&&w.vy===s&&w.el===r||(w.el=r,w.vx=a,w.vy=s,clearInterval(w.pid),r&&(w.pid=setInterval(function(){if(u=s?s*v:0,d=a?a*v:0,"function"==typeof c)return c.call(p,d,u,e);r===D?D.scrollTo(D.pageXOffset+d,D.pageYOffset+u):(r.scrollTop+=u,r.scrollLeft+=d)},24)))}},30),V=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=n.name),"function"==typeof e?e:function(n,r){var i=r.options.group.name;return t?e:e&&(e.join?e.indexOf(i)>-1:i==e)}}var n={},r=e.group;r&&"object"==typeof r||(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){$={capture:!1,passive:!1}}}))}catch(e){}function B(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=ie({},t),e[k]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==B.supportPointer};for(var r in n)!(r in t)&&(t[r]=n[r]);for(var i in V(t),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!t.forceFallback&&O,Y(e,"mousedown",this._onTapStart),Y(e,"touchstart",this._onTapStart),t.supportPointer&&Y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(e,"dragover",this),Y(e,"dragenter",this)),M.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function K(t,n){"clone"!==t.lastPullMode&&(n=!0),r&&r.state!==n&&(q(r,"display",n?"none":""),n||r.state&&(t.options.group.revertClone?(i.insertBefore(r,a),t._animate(e,r)):i.insertBefore(r,e)),r.state=n)}function U(e,t,n){if(e){n=n||S;do{if(">*"===t&&e.parentNode===n||ne(e,t))return e}while(e=X(e))}return null}function X(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function Y(e,t,n){e.addEventListener(t,n,$)}function H(e,t,n){e.removeEventListener(t,n,$)}function z(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var r=(" "+e.className+" ").replace(x," ").replace(" "+t+" "," ");e.className=(r+(n?" "+t:"")).replace(x," ")}}function q(e,t,n){var r=e&&e.style;if(r){if(void 0===n)return S.defaultView&&S.defaultView.getComputedStyle?n=S.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in r||(t="-webkit-"+t),r[t]=n+("string"==typeof n?"":"px")}}function W(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function G(e,t,n,i,a,s,o,l){e=e||t[k];var c=S.createEvent("Event"),d=e.options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);c.initEvent(n,!0,!0),c.to=a||t,c.from=s||t,c.item=i||t,c.clone=r,c.oldIndex=o,c.newIndex=l,t.dispatchEvent(c),d[u]&&d[u].call(e,c)}function J(e,t,n,r,i,a,s,o){var l,c,d=e[k],u=d.options.onMove;return(l=S.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=n,l.draggedRect=r,l.related=i||t,l.relatedRect=a||t.getBoundingClientRect(),l.willInsertAfter=o,e.dispatchEvent(l),u&&(c=u.call(d,l,s)),c}function Z(e){e.draggable=!1}function Q(){j=!1}function ee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function te(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!ne(e,t)||n++;return n}function ne(e,t){if(e){var n=(t=t.split(".")).shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==n&&e.nodeName.toUpperCase()!=n||t.length&&((" "+e.className+" ").match(r)||[]).length!=t.length)}return!1}function re(e,t){var n,r;return function(){void 0===n&&(n=arguments,r=this,I(function(){1===n.length?e.call(r,n[0]):e.apply(r,n),n=void 0},t))}}function ie(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function ae(e){return T&&T.dom?T.dom(e).cloneNode(!0):R?R(e).clone(!0)[0]:e.cloneNode(!0)}function se(e){return I(e,0)}function oe(e){return clearTimeout(e)}return B.prototype={constructor:B,_onTapStart:function(t){var n,r=this,i=this.el,a=this.options,o=a.preventOnFilter,l=t.type,c=t.touches&&t.touches[0],d=(c||t).target,u=t.target.shadowRoot&&t.path&&t.path[0]||d,p=a.filter;if(function(e){var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var r=t[n];r.checked&&A.push(r)}}(i),!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||a.disabled)&&!u.isContentEditable&&(d=U(d,a.draggable,i))&&s!==d){if(n=te(d,a.draggable),"function"==typeof p){if(p.call(this,t,d,this))return G(r,u,"filter",d,i,i,n),void(o&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=U(u,e.trim(),i))return G(r,e,"filter",d,i,i,n),!0})))return void(o&&t.preventDefault());a.handle&&!U(u,a.handle,i)||this._prepareDragStart(t,c,d,n)}},_prepareDragStart:function(n,r,o,l){var c,d=this,u=d.el,p=d.options,v=u.ownerDocument;o&&!e&&o.parentNode===u&&(f=n,i=u,t=(e=o).parentNode,a=e.nextSibling,s=o,g=p.group,h=l,this._lastX=(r||n).clientX,this._lastY=(r||n).clientY,e.style["will-change"]="all",c=function(){d._disableDelayedDrag(),e.draggable=d.nativeDraggable,z(e,p.chosenClass,!0),d._triggerDragStart(n,r),G(d,i,"choose",e,i,i,h)},p.ignore.split(",").forEach(function(t){W(e,t.trim(),Z)}),Y(v,"mouseup",d._onDrop),Y(v,"touchend",d._onDrop),Y(v,"touchcancel",d._onDrop),Y(v,"selectstart",d),p.supportPointer&&Y(v,"pointercancel",d._onDrop),p.delay?(Y(v,"mouseup",d._disableDelayedDrag),Y(v,"touchend",d._disableDelayedDrag),Y(v,"touchcancel",d._disableDelayedDrag),Y(v,"mousemove",d._disableDelayedDrag),Y(v,"touchmove",d._disableDelayedDrag),p.supportPointer&&Y(v,"pointermove",d._disableDelayedDrag),d._dragStartTimer=I(c,p.delay)):c())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),H(e,"mouseup",this._disableDelayedDrag),H(e,"touchend",this._disableDelayedDrag),H(e,"touchcancel",this._disableDelayedDrag),H(e,"mousemove",this._disableDelayedDrag),H(e,"touchmove",this._disableDelayedDrag),H(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,n){(n=n||("touch"==t.pointerType?t:null))?(f={target:e,clientX:n.clientX,clientY:n.clientY},this._onDragStart(f,"touch")):this.nativeDraggable?(Y(e,"dragend",this),Y(i,"dragstart",this._onDragStart)):this._onDragStart(f,!0);try{S.selection?se(function(){S.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(i&&e){var t=this.options;z(e,t.ghostClass,!0),z(e,t.dragClass,!1),B.active=this,G(this,i,"start",e,i,i,h)}else this._nulling()},_emulateDragOver:function(){if(_){if(this._lastX===_.clientX&&this._lastY===_.clientY)return;this._lastX=_.clientX,this._lastY=_.clientY,L||q(n,"display","none");var e=S.elementFromPoint(_.clientX,_.clientY),t=e,r=M.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(_.clientX,_.clientY)),t)do{if(t[k]){for(;r--;)M[r]({clientX:_.clientX,clientY:_.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);L||q(n,"display","")}},_onTouchMove:function(e){if(f){var t=this.options,r=t.fallbackTolerance,i=t.fallbackOffset,a=e.touches?e.touches[0]:e,s=a.clientX-f.clientX+i.x,o=a.clientY-f.clientY+i.y,l=e.touches?"translate3d("+s+"px,"+o+"px,0)":"translate("+s+"px,"+o+"px)";if(!B.active){if(r&&P(E(a.clientX-this._lastX),E(a.clientY-this._lastY))<r)return;this._dragStarted()}this._appendGhost(),b=!0,_=a,q(n,"webkitTransform",l),q(n,"mozTransform",l),q(n,"msTransform",l),q(n,"transform",l),e.preventDefault()}},_appendGhost:function(){if(!n){var t,r=e.getBoundingClientRect(),a=q(e),s=this.options;z(n=e.cloneNode(!0),s.ghostClass,!1),z(n,s.fallbackClass,!0),z(n,s.dragClass,!0),q(n,"top",r.top-F(a.marginTop,10)),q(n,"left",r.left-F(a.marginLeft,10)),q(n,"width",r.width),q(n,"height",r.height),q(n,"opacity","0.8"),q(n,"position","fixed"),q(n,"zIndex","100000"),q(n,"pointerEvents","none"),s.fallbackOnBody&&S.body.appendChild(n)||i.appendChild(n),t=n.getBoundingClientRect(),q(n,"width",2*r.width-t.width),q(n,"height",2*r.height-t.height)}},_onDragStart:function(t,n){var a=this,s=t.dataTransfer,o=a.options;a._offUpEvents(),g.checkPull(a,a,e,t)&&((r=ae(e)).draggable=!1,r.style["will-change"]="",q(r,"display","none"),z(r,a.options.chosenClass,!1),a._cloneId=se(function(){i.insertBefore(r,e),G(a,i,"clone",e)})),z(e,o.dragClass,!0),n?("touch"===n?(Y(S,"touchmove",a._onTouchMove),Y(S,"touchend",a._onDrop),Y(S,"touchcancel",a._onDrop),o.supportPointer&&(Y(S,"pointermove",a._onTouchMove),Y(S,"pointerup",a._onDrop))):(Y(S,"mousemove",a._onTouchMove),Y(S,"mouseup",a._onDrop)),a._loopId=setInterval(a._emulateDragOver,50)):(s&&(s.effectAllowed="move",o.setData&&o.setData.call(a,s,e)),Y(S,"drop",a),a._dragStartId=se(a._dragStarted))},_onDragOver:function(s){var o,l,c,h,v=this.el,f=this.options,_=f.group,y=B.active,w=g===_,x=!1,D=f.sort;if(void 0!==s.preventDefault&&(s.preventDefault(),!f.dragoverBubble&&s.stopPropagation()),!e.animated&&(b=!0,y&&!f.disabled&&(w?D||(h=!i.contains(e)):m===this||(y.lastPullMode=g.checkPull(this,y,e,s))&&_.checkPut(this,y,e,s))&&(void 0===s.rootEl||s.rootEl===this.el))){if(N(s,f,this.el),j)return;if(o=U(s.target,f.draggable,v),l=e.getBoundingClientRect(),m!==this&&(m=this,x=!0),h)return K(y,!0),t=i,void(r||a?i.insertBefore(e,r||a):D||i.appendChild(e));if(0===v.children.length||v.children[0]===n||v===s.target&&function(e,t){var n=e.lastElementChild.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}(v,s)){if(0!==v.children.length&&v.children[0]!==n&&v===s.target&&(o=v.lastElementChild),o){if(o.animated)return;c=o.getBoundingClientRect()}K(y,w),!1!==J(i,v,e,l,o,c,s)&&(e.contains(v)||(v.appendChild(e),t=v),this._animate(l,e),o&&this._animate(c,o))}else if(o&&!o.animated&&o!==e&&void 0!==o.parentNode[k]){d!==o&&(d=o,u=q(o),p=q(o.parentNode));var S=(c=o.getBoundingClientRect()).right-c.left,F=c.bottom-c.top,R=C.test(u.cssFloat+u.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),T=o.offsetWidth>e.offsetWidth,$=o.offsetHeight>e.offsetHeight,O=(R?(s.clientX-c.left)/S:(s.clientY-c.top)/F)>.5,L=o.nextElementSibling,E=!1;if(R){var P=e.offsetTop,A=o.offsetTop;E=P===A?o.previousElementSibling===e&&!T||O&&T:o.previousElementSibling===e||e.previousElementSibling===o?(s.clientY-c.top)/F>.5:A>P}else x||(E=L!==e&&!$||O&&$);var M=J(i,v,e,l,o,c,s,E);!1!==M&&(1!==M&&-1!==M||(E=1===M),j=!0,I(Q,30),K(y,w),e.contains(v)||(E&&!L?v.appendChild(e):o.parentNode.insertBefore(e,E?L:o)),t=e.parentNode,this._animate(l,e),this._animate(c,o))}}},_animate:function(e,t){var n=this.options.animation;if(n){var r=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),q(t,"transition","none"),q(t,"transform","translate3d("+(e.left-r.left)+"px,"+(e.top-r.top)+"px,0)"),t.offsetWidth,q(t,"transition","all "+n+"ms"),q(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=I(function(){q(t,"transition",""),q(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;H(S,"touchmove",this._onTouchMove),H(S,"pointermove",this._onTouchMove),H(e,"mouseup",this._onDrop),H(e,"touchend",this._onDrop),H(e,"pointerup",this._onDrop),H(e,"touchcancel",this._onDrop),H(e,"pointercancel",this._onDrop),H(e,"selectstart",this)},_onDrop:function(s){var o=this.el,l=this.options;clearInterval(this._loopId),clearInterval(w.pid),clearTimeout(this._dragStartTimer),oe(this._cloneId),oe(this._dragStartId),H(S,"mouseover",this),H(S,"mousemove",this._onTouchMove),this.nativeDraggable&&(H(S,"drop",this),H(o,"dragstart",this._onDragStart)),this._offUpEvents(),s&&(b&&(s.preventDefault(),!l.dropBubble&&s.stopPropagation()),n&&n.parentNode&&n.parentNode.removeChild(n),i!==t&&"clone"===B.active.lastPullMode||r&&r.parentNode&&r.parentNode.removeChild(r),e&&(this.nativeDraggable&&H(e,"dragend",this),Z(e),e.style["will-change"]="",z(e,this.options.ghostClass,!1),z(e,this.options.chosenClass,!1),G(this,i,"unchoose",e,t,i,h),i!==t?(v=te(e,l.draggable))>=0&&(G(null,t,"add",e,t,i,h,v),G(this,i,"remove",e,t,i,h,v),G(null,t,"sort",e,t,i,h,v),G(this,i,"sort",e,t,i,h,v)):e.nextSibling!==a&&(v=te(e,l.draggable))>=0&&(G(this,i,"update",e,t,i,h,v),G(this,i,"sort",e,t,i,h,v)),B.active&&(null!=v&&-1!==v||(v=h),G(this,i,"end",e,t,i,h,v),this.save()))),this._nulling()},_nulling:function(){i=e=t=n=a=r=s=o=l=f=_=b=v=d=u=m=g=B.active=null,A.forEach(function(e){e.checked=!0}),A.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)U(e=n[r],a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||ee(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,r){var i=n.children[r];U(i,this.options.draggable,n)&&(t[e]=i)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return U(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];n[e]=t,"group"===e&&V(n)},destroy:function(){var e=this.el;e[k]=null,H(e,"mousedown",this._onTapStart),H(e,"touchstart",this._onTapStart),H(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(H(e,"dragover",this),H(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),M.splice(M.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},Y(S,"touchmove",function(e){B.active&&e.preventDefault()}),B.utils={on:Y,off:H,css:q,find:W,is:function(e,t){return!!U(e,t,e)},extend:ie,throttle:re,closest:U,toggleClass:z,clone:ae,index:te,nextTick:se,cancelNextTick:oe},B.create=function(e,t){return new B(e,t)},B.version="1.7.0",B})}});
//# sourceMappingURL=2.b6a6cc8d6952f9a9f441.js.map