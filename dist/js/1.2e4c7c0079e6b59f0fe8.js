webpackJsonp([1],{"1J5t":function(e,t,r){r("Gquc"),r("IsPG"),r("A1pn"),r("oltR"),r("V7Pz"),r("DG01"),r("toDE"),e.exports=r("AKd3").Set},"27tL":function(e,t,r){var i=r("8Nvm");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"4HpA":function(e,t,r){"use strict";var i=r("C02x"),n=r("FITv"),s=r("DVkV"),o=r("BRDz"),a=r("bHZz"),u=r("bodH"),c=r("k/7E"),l=r("t8DS"),d=r("8Nvm"),m=r("XAI7"),p=r("lIiZ").f,v=r("A+MN")(0),f=r("sjnA");e.exports=function(e,t,r,h,g,_){var y=i[e],F=y,b=g?"set":"add",w=F&&F.prototype,T={};return f&&"function"==typeof F&&(_||w.forEach&&!o(function(){(new F).entries().next()}))?(F=t(function(t,r){l(t,F,e,"_c"),t._c=new y,void 0!=r&&c(r,g,t[b],t)}),v("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!_||"clear"!=e)&&a(F.prototype,e,function(r,i){if(l(this,F,e),!t&&_&&!d(r))return"get"==e&&void 0;var n=this._c[e](0===r?0:r,i);return t?this:n})}),_||p(F.prototype,"size",{get:function(){return this._c.size}})):(F=h.getConstructor(t,e,g,b),u(F.prototype,r),s.NEED=!0),m(F,e),T[e]=F,n(n.G+n.W+n.F,T),_||h.setStrong(F,e,g),F}},"A+MN":function(e,t,r){var i=r("WwGG"),n=r("mEMm"),s=r("OXaN"),o=r("CFGK"),a=r("dC2g");e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,d=6==e,m=5==e||d,p=t||a;return function(t,a,v){for(var f,h,g=s(t),_=n(g),y=i(a,v,3),F=o(_.length),b=0,w=r?p(t,F):u?p(t,0):void 0;F>b;b++)if((m||b in _)&&(h=y(f=_[b],b,g),e))if(r)w[b]=h;else if(h)switch(e){case 3:return!0;case 5:return f;case 6:return b;case 2:w.push(f)}else if(l)return!1;return d?-1:c||l?l:w}}},"AV+v":function(e,t){},DG01:function(e,t,r){r("vyS5")("Set")},MxwP:function(e,t,r){"use strict";var i=r("lIiZ").f,n=r("c1o2"),s=r("bodH"),o=r("WwGG"),a=r("t8DS"),u=r("k/7E"),c=r("uH+j"),l=r("z7iO"),d=r("4BpY"),m=r("sjnA"),p=r("DVkV").fastKey,v=r("27tL"),f=m?"_s":"size",h=function(e,t){var r,i=p(t);if("F"!==i)return e._i[i];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,c){var l=e(function(e,i){a(e,l,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[f]=0,void 0!=i&&u(i,r,e[c],e)});return s(l.prototype,{clear:function(){for(var e=v(this,t),r=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete r[i.i];e._f=e._l=void 0,e[f]=0},delete:function(e){var r=v(this,t),i=h(r,e);if(i){var n=i.n,s=i.p;delete r._i[i.i],i.r=!0,s&&(s.n=n),n&&(n.p=s),r._f==i&&(r._f=n),r._l==i&&(r._l=s),r[f]--}return!!i},forEach:function(e){v(this,t);for(var r,i=o(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(i(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!h(v(this,t),e)}}),m&&i(l.prototype,"size",{get:function(){return v(this,t)[f]}}),l},def:function(e,t,r){var i,n,s=h(e,t);return s?s.v=r:(e._l=s={i:n=p(t,!0),k:t,v:r,p:i=e._l,n:void 0,r:!1},e._f||(e._f=s),i&&(i.n=s),e[f]++,"F"!==n&&(e._i[n]=s)),e},getEntry:h,setStrong:function(e,t,r){c(e,t,function(e,r){this._t=v(e,t),this._k=r,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},r?"entries":"values",!r,!0),d(t)}}},Oyrx:function(e,t,r){var i=r("adiS"),n=r("vhYp");e.exports=function(e){return function(){if(i(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},SMmX:function(e,t,r){"use strict";var i=r("FITv"),n=r("7p3N"),s=r("WwGG"),o=r("k/7E");e.exports=function(e){i(i.S,e,{from:function(e){var t,r,i,a,u=arguments[1];return n(this),(t=void 0!==u)&&n(u),void 0==e?new this:(r=[],t?(i=0,a=s(u,arguments[2],2),o(e,!1,function(e){r.push(a(e,i++))})):o(e,!1,r.push,r),new this(r))}})}},V7Pz:function(e,t,r){var i=r("FITv");i(i.P+i.R,"Set",{toJSON:r("Oyrx")("Set")})},b4tm:function(e,t,r){var i=r("8Nvm"),n=r("JBI7"),s=r("biYF")("species");e.exports=function(e){var t;return n(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!n(t.prototype)||(t=void 0),i(t)&&null===(t=t[s])&&(t=void 0)),void 0===t?Array:t}},dC2g:function(e,t,r){var i=r("b4tm");e.exports=function(e,t){return new(i(e))(t)}},iIKR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("lC5x"),n=r.n(i),s=r("zsLt"),o=r.n(s),a=r("J0Oq"),u=r.n(a),c=r("a3Yh"),l=r.n(c);function d(e){return window.document[e]?window.document[e]:-1!=navigator.appName.indexOf("Microsoft")?document.getElementById(e):document.embeds&&document.embeds[e]?document.embeds[e]:void 0}var m={TYPE_BOKECC:1,TYPE_FLASH:2,TYPE_HTML5:3,newInstance:function(e){if(void 0===e||null===e)return null;var t={};t.player=e;var r=t.player.id;return void 0===r||""==r?t.type=m.TYPE_HTML5:-1!==r.indexOf("videoPlayer_")?t.type=m.TYPE_FLASH:t.type=m.TYPE_BOKECC,t.start=function(){switch(t.type){case m.TYPE_BOKECC:t.player.start();break;case m.TYPE_FLASH:t.player.play2();break;case m.TYPE_HTML5:t.player.play()}},t.pause=function(){t.player.pause()},t.resume=function(){switch(t.type){case m.TYPE_BOKECC:t.player.resume();break;case m.TYPE_FLASH:t.player.play2();break;case m.TYPE_HTML5:t.player.play()}},t.seek=function(e){switch(t.type){case m.TYPE_BOKECC:case m.TYPE_FLASH:t.player.seek(e);break;case m.TYPE_HTML5:t.player.currentTime=e}},t.getDuration=function(){switch(t.type){case m.TYPE_BOKECC:case m.TYPE_FLASH:return t.player.getDuration();case m.TYPE_HTML5:return t.player.duration}},t.getPosition=function(){switch(t.type){case m.TYPE_BOKECC:return d(r).getPosition();case m.TYPE_FLASH:return t.player.getCurrentTime();case m.TYPE_HTML5:return t.player.currentTime}},t.autoPlay=function(e,r){switch(t.type){case m.TYPE_BOKECC:t.player.start();break;case m.TYPE_FLASH:t.player.play2();break;case m.TYPE_HTML5:t.player.click()}},t.end=function(e,r){switch(t.type){case m.TYPE_HTML5:return void(t.player.onended=e(r))}},t},getVideoPlayer:function(){var e=document.getElementById("videoPlay"),t=e.getElementsByTagName("object");return void 0===t[0]&&(t=e.getElementsByTagName("video")),void 0!==t&&m.newInstance(t[0])}},p=m,v=r("yt7g"),f={components:{},props:[],data:function(){var e;return{id:"",video_id:"",currentId:"",title:"",tableData:[],videoPlayer:null,dialogFormVisible:!1,ruleForm:{hour:"",minute:"",second:"",title:"",item_ids:""},openTime:(e={h:""},l()(e,"h",""),l()(e,"h",""),e),isCreate:!1,duration:0,btnLoading:!1,suggestHour:[],suggestMinuteAndSecond:[],checkTimer:null}},mounted:function(){for(var e=0;e<=10;e++){var t={value:e<10?"0"+e:""+e};this.suggestHour.push(t)}for(var r=0;r<=60;r++){var i={value:r<10?"0"+r:""+r};this.suggestMinuteAndSecond.push(i)}},filters:{changeQuestionId:function(e){return""!=e&&null!=e&&void 0!=e?e:"无"}},methods:{querySearchH:function(e,t){t(this.suggestHour)},querySearchMS:function(e,t){t(this.suggestMinuteAndSecond)},resetForm:function(e){this.ruleForm={hour:"",minute:"",second:"",title:"",item_ids:""}},checkVideoTime:function(){return!(60*parseInt(this.ruleForm.hour)*60+60*parseInt(this.ruleForm.minute)+parseInt(this.ruleForm.second)>this.duration)||(this.$message({message:"设置时间节点已超过视频总时长，请重新设置！",type:"warning"}),this.ruleForm.hour=this.openTime.h,this.ruleForm.minute=this.openTime.m,this.ruleForm.second=this.openTime.s,!1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.checkVideoTime()&&(t.isCreate?t.httpCreateInsteractive():t.httpUpdateInsteractive())})},onRemove:function(e){var t=this;this.$confirm("此操作将删除该节点, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var r={id:e.id};t.$http.removeInsteractive(r).then(function(e){0===e.status?(t.$message({type:"success",message:"删除成功"}),t.getInsteractiveList()):t.$message({type:"warning",message:"删除失败"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},didClickEdit:function(e){if(this.videoPlayer=p.getVideoPlayer(),!this.videoPlayer)return this.$message({message:"请确认视频是否正常播放！"});this.videoPlayer.pause(),this.duration=this.videoPlayer.getDuration();var t=e.id,r=e.item_ids,i=e.name,n=(e.resource_id,e.times),s=(e.type,Object(v.h)(n)),o=s.h,a=s.m,u=s.s;this.currentId=t,this.openTime.h=o.toString(10),this.openTime.m=a.toString(10),this.openTime.s=u.toString(10),this.ruleForm.hour=o.toString(10),this.ruleForm.minute=a.toString(10),this.ruleForm.second=u.toString(10),this.ruleForm.title=i,this.ruleForm.item_ids=r,this.isCreate=!1,this.dialogFormVisible=!0},httpCreateInsteractive:function(){var e=this;return u()(n.a.mark(function t(){var r,i,s,a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=60*parseInt(e.ruleForm.hour)*60+60*parseInt(e.ruleForm.minute)+parseInt(e.ruleForm.second),i={times:r,type:"1",item_ids:e.ruleForm.item_ids,name:e.ruleForm.title,resource_id:e.id},!e.ruleForm.item_ids){t.next=7;break}if(s=e.ruleForm.item_ids.split(","),new o.a(s).size==s.length){t.next=7;break}return e.$message({message:"课中练习题目id重复",type:"warning"}),t.abrupt("return",!1);case 7:return e.btnLoading=!0,t.next=10,e.$http.createInsteractive(i);case 10:a=t.sent,e.btnLoading=!1,0===a.status?(e.$message({message:"添加节点成功！",type:"success"}),e.getInsteractiveList(),e.dialogFormVisible=!1):e.$message({message:a.message?a.message:"添加节点失败！",type:"error"});case 13:case"end":return t.stop()}},t,e)}))()},httpUpdateInsteractive:function(){var e=this;return u()(n.a.mark(function t(){var r,i,s;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=60*parseInt(e.ruleForm.hour)*60+60*parseInt(e.ruleForm.minute)+parseInt(e.ruleForm.second),i={id:e.currentId,times:r,type:"1",item_ids:e.ruleForm.item_ids,name:e.ruleForm.title,resource_id:e.id},e.btnLoading=!0,t.next=5,e.$http.updateInsteractive(i);case 5:s=t.sent,e.btnLoading=!1,0===s.status?(e.$message({message:"更新节点成功！",type:"success"}),e.getInsteractiveList(),e.dialogFormVisible=!1):e.$message({message:"更新节点失败或无修改！",type:"error"});case 8:case"end":return t.stop()}},t,e)}))()},handleFlag:function(){if(this.videoPlayer=p.getVideoPlayer(),!this.videoPlayer)return this.$message({message:"请确认视频是否正常播放！"});this.isCreate=!0,this.videoPlayer.pause();var e=this.videoPlayer.getPosition();this.duration=this.videoPlayer.getDuration();var t=Object(v.h)(parseInt(e)),r=t.h,i=t.m,n=t.s;this.ruleForm.hour=r.toString(10),this.ruleForm.minute=i.toString(10),this.ruleForm.second=n.toString(10),this.ruleForm.title="",this.ruleForm.item_ids="",this.openTime.h=r.toString(10),this.openTime.m=i.toString(10),this.openTime.s=n.toString(10),this.dialogFormVisible=!0},getInsteractiveList:function(){var e=this;return u()(n.a.mark(function t(){var r,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={resource_id:e.id,types:1},t.next=3,e.$http.getInsteractiveList(r);case 3:0===(i=t.sent).status&&(e.tableData=i.result);case 5:case"end":return t.stop()}},t,e)}))()},initData:function(){var e=this;return u()(n.a.mark(function t(){var r,i;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.getOneResource(e.$route.params.id);case 2:r=t.sent;try{0==r.status&&(i=r.result.resource,e.title=i.title,e.video_id=i.video_id,e.video_id?e.palyVideo(e.video_id):e.$message({message:"无视频播放地址"}))}catch(e){console.log(e)}case 4:case"end":return t.stop()}},t,e)}))()},palyVideo:function(e){void 0!=window.GDVideoPlayerLoaded&&(window.GDVideoPlayerLoaded=void 0),1===e.split("-").length&&(e+="-3"),this.video_id=e;var t=document.createElement("script");t.type="text/javascript",t.src="//s.gaodun.com/web/static-player/loader.js?"+this.video_id,document.getElementById("videoPlay").appendChild(t)}},created:function(){var e=this;return u()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.id=e.$route.params.id,e.initData(),e.getInsteractiveList();case 3:case"end":return t.stop()}},t,e)}))()}},h={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"module-edu-content video-interactice-wrapper"},[r("div",{staticClass:"outlineeat"},[e._v("\n    课中交互：【视频资源ID："+e._s(e.id)+"】"+e._s(e.title)+"\n  ")]),e._v(" "),r("div",{staticClass:"video-content clear"},[r("div",{ref:"videoPlay",staticClass:"videoPlay",attrs:{id:"videoPlay"}})]),e._v(" "),r("el-row",{staticClass:"flag-btn-box"},[r("el-button",{attrs:{type:"primary",round:""},on:{click:e.handleFlag}},[e._v("标记为重要节点")])],1),e._v(" "),r("el-row",[r("el-table",{ref:"table",staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData,height:"300"}},[r("el-table-column",{attrs:{label:"序号",type:"index",width:"50"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"重要节点时间点",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("secondToDate")(t.row.times))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"name",align:"center",label:"重要节点名称"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"课中练习（题目ID）",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("changeQuestionId")(t.row.item_ids))+"\n        ")]}}])}),e._v(" "),r("el-table-column",{attrs:{fixed:"right",label:"操作",align:"center",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){e.didClickEdit(t.row)}}},[e._v("修改\n          ")]),e._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(r){e.onRemove(t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),r("el-dialog",{staticClass:"tabplane",attrs:{title:e.isCreate?"新增一个重要节点":"修改一个重要节点",center:"",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"140px"}},[r("el-form-item",{attrs:{label:"时间点",required:""}},[r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{prop:"hour"}},[r("el-autocomplete",{staticClass:"coursetxt",attrs:{"fetch-suggestions":e.querySearchH},model:{value:e.ruleForm.hour,callback:function(t){e.$set(e.ruleForm,"hour",t)},expression:"ruleForm.hour"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:1}},[e._v("时")]),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{prop:"minute"}},[r("el-autocomplete",{staticClass:"coursetxt",attrs:{"fetch-suggestions":e.querySearchMS},model:{value:e.ruleForm.minute,callback:function(t){e.$set(e.ruleForm,"minute",t)},expression:"ruleForm.minute"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:1}},[e._v("分")]),e._v(" "),r("el-col",{attrs:{span:7}},[r("el-form-item",{attrs:{prop:"second"}},[r("el-autocomplete",{staticClass:"coursetxt",attrs:{"fetch-suggestions":e.querySearchMS},model:{value:e.ruleForm.second,callback:function(t){e.$set(e.ruleForm,"second",t)},expression:"ruleForm.second"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:1}},[e._v("秒")])],1),e._v(" "),r("el-form-item",{attrs:{label:"节点名称",prop:"title",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:60})}},[r("el-input",{staticClass:"coursetxt",attrs:{placeholder:"请输入节点名称"},model:{value:e.ruleForm.title,callback:function(t){e.$set(e.ruleForm,"title",t)},expression:"ruleForm.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"课中练习（选填 ）",prop:"item_ids",rules:e.filter_rules({type:"isQuestionArray"})}},[r("el-input",{staticClass:"coursetxt",attrs:{placeholder:"请输入题目，多道题目请用英文逗号隔开"},model:{value:e.ruleForm.item_ids,callback:function(t){e.$set(e.ruleForm,"item_ids",t)},expression:"ruleForm.item_ids"}})],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重 置")]),e._v(" "),r("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v(e._s(e.btnLoading?"保存中":"确 定")+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var g=r("vSla")(f,h,!1,function(e){r("AV+v"),r("vLKg")},"data-v-4ae35dc0",null);t.default=g.exports},oltR:function(e,t,r){"use strict";var i=r("MxwP"),n=r("27tL");e.exports=r("4HpA")("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return i.def(n(this,"Set"),e=0===e?0:e,e)}},i)},toDE:function(e,t,r){r("SMmX")("Set")},vLKg:function(e,t){},vhYp:function(e,t,r){var i=r("k/7E");e.exports=function(e,t){var r=[];return i(e,!1,r.push,r,t),r}},vyS5:function(e,t,r){"use strict";var i=r("FITv");e.exports=function(e){i(i.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},zsLt:function(e,t,r){e.exports={default:r("1J5t"),__esModule:!0}}});
//# sourceMappingURL=1.2e4c7c0079e6b59f0fe8.js.map