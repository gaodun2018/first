webpackJsonp([2],{"016g":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("lC5x"),a=i.n(n),r=i("J0Oq"),o=i.n(r),s=i("405r"),l=i.n(s),d=[{text:"资源设置",currentLine:"bar-line-current",currentDot:"bar-dot-current",currentText:"current-text",isCustomerConfirm:!0},{text:"资源类型",currentLine:"bar-line-current",currentDot:"bar-dot-current",currentText:"current-text",isCustomerConfirm:!1},{text:"资源选择",currentLine:"bar-line-current",currentDot:"bar-dot-current",currentText:"current-text",isCustomerConfirm:!1}],c=[{discriminator:"video",label:"视频"},{discriminator:"lecture_note",label:"讲义"},{discriminator:"paper",label:"试卷"},{discriminator:"legacy_live",label:"直播"}],u=[{discriminator:"video",table:[{key:"id",wh:"120",sort:!1,label:"资源ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入视频资源ID / 名称",input:{}},{discriminator:"lecture_note",table:[{key:"id",wh:"120",sort:!1,label:"资源ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入讲义资源ID / 名称",input:{}},{discriminator:"paper",table:[{key:"paper_id",wh:"100",sort:!1,label:"题库试卷ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入题库试卷ID / 名称",input:{}},{discriminator:"legacy_live",table:[{key:"live_id",wh:"100",sort:!1,label:"直播ID"},{key:"discriminator",wh:"100",sort:!1,label:"资源类型"},{key:"title",wh:"",sort:!1,label:"资源名称"}],inputPlaceholder:"请输入直播ID / 名称",input:{}}],p=i("yt7g"),_=i("BK/k"),f=i("zSLJ"),h=i("NFfb"),m={computed:{materialUpload:function(){return Object(_.c)()+"apigateway.gaodun.com/resource-api/resource/file"}},data:function(){return{fileList:[],apiHeader:{},isUpload:!1,loading:!1}},methods:{clearAllFileList:function(){this.fileList=[]},beforeAvatarUpload:function(e){var t="pdf"===e.name.substring(e.name.lastIndexOf(".")+1);return t||this.$message({message:"上传文件只能是 pdf格式!",type:"warning"}),t},handleChange:function(e,t){this.fileList=t.slice(-1)},handleRemove:function(e,t){0==t.length&&(this.isUpload=!1,this.$emit("getHandoutPath","")),this.fileList=t},handleAvatarError:function(e,t,i){var n=this;this.loading=!1,this.$message.error("上传失败！"),setTimeout(function(){n.fileList=[]},0)},handleProgress:function(){this.loading=!0},uploadSuccess:function(e,t){var i=this;this.loading=!1,0===e.status?(this.isUpload=!0,this.$message({message:"文件上传成功",type:"success"}),this.$emit("getHandoutPath",e.result.path)):(this.isUpload=!1,setTimeout(function(){i.fileList=[]},0),this.$emit("getHandoutPath",""),this.$message({message:"文件上传失败",type:"warning"}))}},mounted:function(){},created:function(){var e=this;return o()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i="Basic "+Object(f.a)(h.j),e.apiHeader={Authentication:i};case 2:case"end":return t.stop()}},t,e)}))()}},g={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-col",{attrs:{span:6}},[e._v("*选择文件：")]),e._v(" "),i("el-col",{attrs:{span:18}},[i("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"onUpload",staticClass:"syllabus-handout-upload",attrs:{headers:e.apiHeader,"file-list":e.fileList,drag:"","on-success":e.uploadSuccess,"on-change":e.handleChange,"on-remove":e.handleRemove,"on-progress":e.handleProgress,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload,action:e.materialUpload,"element-loading-text":"正在上传中...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.6)"}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n                "),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("目前仅支持.pdf文件哦！")])])],1)],1)},staticRenderFns:[]};var b=i("vSla")(m,g,!1,function(e){i("BEzw")},null,null).exports,v={components:{},props:{dialogKnowledgeVisible:{default:!1,type:Boolean},knowledgeList:{type:Array},currentSyllabusItemKnowledge:{}},computed:{isDisabled:function(){return""===this.firstVal||void 0===this.firstVal||null===this.firstVal},multipleSelection:{get:function(){return this.currentSyllabusItemKnowledge},set:function(e){console.log(e),this.$emit("changeCurrentSyllabusItemKnowledge",e)}}},data:function(){return{firstVal:"",secondVal:"",secondList:[],tableData:[]}},methods:{handleFirstChange:function(e){this.secondList=[],this.secondVal="",this.tableData=[];for(var t=0;t<this.knowledgeList.length;t++)this.knowledgeList[t].id===e&&(this.secondList=this.knowledgeList[t].children)},handleSecondChange:function(e){this.tableData=[];for(var t=0;t<this.secondList.length;t++)this.secondList[t].if===e&&(this.tableData=this.secondList[t].children)},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){e.length>1?this.toggleSelection([e[e.length-1]]):this.multipleSelection=e},closeDialog:function(){this.$emit("handleCloseKnowledgeDialog")}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{staticClass:"selectknowledge",attrs:{center:"",title:"请选择知识点关联",visible:e.dialogKnowledgeVisible},on:{"update:visible":function(t){e.dialogKnowledgeVisible=t}}},[i("el-row",{staticClass:"searchtools"},[i("el-col",{attrs:{span:10}},[i("el-select",{staticClass:"group-search",staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.handleFirstChange},model:{value:e.firstVal,callback:function(t){e.firstVal=t},expression:"firstVal"}},e._l(e.knowledgeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})}))],1),e._v(" "),i("el-col",{attrs:{span:14}},[i("el-select",{staticClass:"complete-search",staticStyle:{width:"100%"},attrs:{disabled:e.isDisabled,placeholder:"请选择"},on:{change:e.handleSecondChange},model:{value:e.secondVal,callback:function(t){e.secondVal=t},expression:"secondVal"}},e._l(e.secondList,function(e){return i("el-option",{key:e.icid,attrs:{label:e.title,value:e.icid}})}))],1)],1),e._v(" "),i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"知识点ID",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.id))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"title",label:"知识点名",align:"center","show-overflow-tooltip":""}}),e._v(" "),i("el-table-column",{attrs:{prop:"definition",label:"定义",align:"center","show-overflow-tooltip":""}})],1),e._v(" "),i("div",{staticClass:"dialog-footer last-form-item",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.closeDialog("ruleForm")}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("保存")])],1)],1)},staticRenderFns:[]};var x=i("vSla")(v,y,!1,function(e){i("XTO2"),i("CByA")},null,null).exports,k={name:"SyllabusModuleEdit",components:{draggable:l.a,HandoutUpload:b,SelectKnowledge:x},data:function(){return{is_knowledge_open:!1,project_id:"",subject_id:"",isAllowUse:0,btnLoading:!1,active:0,resourceRadio:"",selectType:"",nativeResourceRadio:"",ResIsInOutline:!1,resourceTableConfig:[],radio1:1,radio2:4,tabledata:[],progressText:d,addResFirFrom:{name:"",start_time:"",study_time:"",apply_to:[]},study_time_options:[],ruleProject:{name:""},dialogFormVisible:!1,dialogKnowledgeVisible:!1,knowledgeList:[],resourceTable:[],multipleSelection:[],dialogVisible:!1,adddialogVisible:!1,Moduledialog:!0,bigdislog:!1,deleteModule:!0,resourceType:"video",inputPlaceholder:"请输入视频资源ID / 名称",refname:"",coursesylllevel:"",currentId:"0",title:"",resourceTypeList:c,tag_id:"",resourceAction:"add",pagination:{current_page:1,total:1},resLoading:!1,resourceinput:"",searchResourceTimer:"",sortOptions:"",sourceRadio:1,handoutForm:{path:""},videoForm:{title:"",video_id:"",duration_minutes:"",duration_second:""},urltip:'[<script src="https://s.gaodun.com/web/static-player/loader.js?',urltip2:'-3" type="text/javascript"><\/script>]',currentSyllabusItemKnowledge:""}},methods:{changeCurrentSyllabusItemKnowledge:function(e){this.currentSyllabusItemKnowledge=e},handleChangeIsKnowledgeOpen:function(e){var t=this;return o()(a.a.mark(function i(){return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log(e),i.next=3,t.$http.UpdateCourseSyllabus(t.syllabus_id,{is_knowledge_open:e?1:0,project_id:t.project_id,subject_id:t.subject_id,status:t.isAllowUse,title:t.title});case 3:0===i.sent.status?t.$message({message:"修改大纲成功！",type:"success"}):t.$message({message:"修改大纲失败！",type:"error"});case 5:case"end":return i.stop()}},i,t)}))()},handleCheckboxChange:function(e){console.log(e),e.length>1&&(this.addResFirFrom.apply_to=e.splice(-1)),console.log(this.addResFirFrom.apply_to)},handleTableChange:function(e){this.resourceRadio=String(e.id)},selectclk:function(e){this.resourceType=e},openAddResDialog:function(e){this.currentId=e,this.active=0,this.addResFirFrom.name="",this.addResFirFrom.start_time="",this.addResFirFrom.study_time="",this.addResFirFrom.apply_to=[],this.resourceRadio="",this.resourceType="video",this.nativeResourceRadio="",this.dialogFormVisible=!0,this.resourceAction="add"},firstNextSubmit:function(e){var t,i=this;this.$refs[e].validate((t=o()(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}if(!(i.active>=i.progressText.length-1)){e.next=3;break}return e.abrupt("return");case 3:i.active++,e.next=7;break;case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}},e,i)})),function(e){return t.apply(this,arguments)}))},secondSubmit:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.resourceType){t.next=5;break}return e.$message.warning("请选择资源类型！"),t.abrupt("return");case 5:"lecture_note"===e.resourceType?(e.handoutForm.path="",e.$refs.handoutUpload.clearAllFileList()):"video"===e.resourceType&&e.resetForm("videoForm");case 6:if(!(e.active>=e.progressText.length-1)){t.next=8;break}return t.abrupt("return");case 8:u.forEach(function(t){t.discriminator==e.resourceType&&(e.resourceTableConfig=t.table,e.inputPlaceholder=t.inputPlaceholder)}),e.active++,e.sourceRadio=2,e.resourceinput="",e.resourceTable=[],1!=e.pagination.current_page?e.pagination.current_page=1:e.searchResource();case 14:case"end":return t.stop()}},t,e)}))()},handleCurrentChange:function(e){var t=this;return o()(a.a.mark(function i(){return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=Number(e),t.searchResource(e);case 2:case"end":return i.stop()}},i,t)}))()},handleIconClick:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:1!=e.pagination.current_page?e.pagination.current_page=1:e.searchResource();case 1:case"end":return t.stop()}},t,e)}))()},searchResource:function(e){var t=this;clearTimeout(this.searchResourceTimer),this.resLoading=!0,this.searchResourceTimer=setTimeout(o()(a.a.mark(function i(){var n,r,o;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:clearTimeout(t.searchResourceTimer),n={discriminator:t.resourceType,page_size:50,page:e||1,"order_by[]":"desc","order_by_field[]":"id",project_id:t.project_id},r=t.resourceinput.trim(),i.t0=t.resourceType,i.next="legacy_live"===i.t0?6:"paper"===i.t0?8:10;break;case 6:return Object(p.e)(r)?n.legacy_live_id=r:n.keywords=r,i.abrupt("break",12);case 8:return Object(p.e)(r)?n.paper_id=r:n.keywords=r,i.abrupt("break",12);case 10:return n.keywords=r,i.abrupt("break",12);case 12:return i.next=14,t.$http.getResource(n);case 14:0==(o=i.sent).status&&(t.resLoading=!1,t.resourceTable=o.result.resources,t.pagination.total=o.result.pagination.total);case 16:case"end":return i.stop()}},i,t)})),500)},prev:function(){this.active<=0||this.active--},handleSelectionChange:function(e){this.multipleSelection=e},addSyllabusResourceItem:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:2===e.sourceRadio?e.sourceRadio2Syllabus():1===e.sourceRadio&&e.sourceRadio1Syllabus();case 1:case"end":return t.stop()}},t,e)}))()},sourceRadio2Syllabus:function(){var e=this;return o()(a.a.mark(function t(){var i,n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.resourceRadio){t.next=2;break}return t.abrupt("return",e.$message({message:"请选择资源",type:"warning"}));case 2:return e.btnLoading=!0,i=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.next=6,e.checkResIsInOutline();case 6:if(t.sent){t.next=11;break}return e.btnLoading=!1,i.close(),t.abrupt("return");case 11:if(n=void 0,"add"!==e.resourceAction){t.next=18;break}return t.next=15,e.CourseSyllabusItem();case 15:n=t.sent,t.next=22;break;case 18:if("update"!==e.resourceAction){t.next=22;break}return t.next=21,e.ChangeSyllabusItem();case 21:n=t.sent;case 22:if(r=void 0,0!==n.status){t.next=31;break}return r=n.result.id,t.next=27,e.mountSyllabusResource(r);case 27:e.btnLoading=!1,i.close(),t.next=34;break;case 31:return e.btnLoading=!1,i.close(),t.abrupt("return");case 34:case"end":return t.stop()}},t,e)}))()},sourceRadio1Syllabus:function(){var e=this;"lecture_note"===this.resourceType?this.lectureSourceCreateIntoSyllabus():"video"===this.resourceType&&this.$refs.videoForm.validate(function(t){t?e.videoSourceCreateIntoSyllabus():console.log("error submit!!")})},videoSourceCreateIntoSyllabus:function(){var e=this;return o()(a.a.mark(function t(){var i,n,r,o,s,l,d;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.btnLoading=!0,i=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),t.next=4,e.getVideoPath();case 4:if(n=t.sent,r="",0!==n.status){t.next=14;break}if(n.result.video_id){t.next=11;break}return e.btnLoading=!1,i.close(),t.abrupt("return",e.$message({type:"warning",message:"视频地址解析失败！"}));case 11:r=n.result.video_id,t.next=21;break;case 14:if(1!=n.status){t.next=18;break}r=e.videoForm.video_id,t.next=21;break;case 18:return e.btnLoading=!1,i.close(),t.abrupt("return",e.$message({type:"warning",message:"视频地址解析失败！"}));case 21:return o={title:e.addResFirFrom.name,tag_payload_id:"0"==e.subject_id?e.project_id:e.subject_id,tag_payload_type:"0"==e.subject_id?"project":"subject",duration_minutes:e.videoForm.duration_minutes,duration_seconds:e.videoForm.duration_second?e.videoForm.duration_second:0,video_id:r},t.next=24,e.$http.storeResource(o);case 24:if(0!==(s=t.sent).status){t.next=60;break}t.prev=26,e.resourceRadio=s.result.resource.id,t.next=35;break;case 30:return t.prev=30,t.t0=t.catch(26),e.btnLoading=!1,i.close(),t.abrupt("return",e.$message({message:"视频资源创建失败！",type:"error"}));case 35:if(l=void 0,"add"!==e.resourceAction){t.next=42;break}return t.next=39,e.CourseSyllabusItem();case 39:l=t.sent,t.next=46;break;case 42:if("update"!==e.resourceAction){t.next=46;break}return t.next=45,e.ChangeSyllabusItem();case 45:l=t.sent;case 46:if(d=void 0,0!==l.status){t.next=55;break}return d=l.result.id,t.next=51,e.mountSyllabusResource(d);case 51:e.btnLoading=!1,i.close(),t.next=58;break;case 55:return e.btnLoading=!1,i.close(),t.abrupt("return");case 58:t.next=63;break;case 60:return e.btnLoading=!1,i.close(),t.abrupt("return",e.$message({message:"视频资源创建失败！",type:"error"}));case 63:case"end":return t.stop()}},t,e,[[26,30]])}))()},lectureSourceCreateIntoSyllabus:function(){var e=this;return o()(a.a.mark(function t(){var i,n,r,o,s;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.handoutForm.path){t.next=2;break}return t.abrupt("return",e.$message({message:"请选择讲义上传！",type:"warning"}));case 2:return e.btnLoading=!0,i=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.2)"}),n={tag_payload_id:"0"==e.subject_id?e.project_id:e.subject_id,tag_payload_type:"0"==e.subject_id?"project":"subject",title:e.addResFirFrom.name,path:e.handoutForm.path},t.next=7,e.$http.saveLecturenote(n);case 7:if(0!==(r=t.sent).status){t.next=45;break}console.log(r),t.prev=10,e.resourceRadio=r.result.id,t.next=20;break;case 14:return t.prev=14,t.t0=t.catch(10),console.log(t.t0),e.btnLoading=!1,i.close(),t.abrupt("return",e.$message({message:"讲义资源创建失败！",type:"error"}));case 20:if(o=void 0,"add"!==e.resourceAction){t.next=27;break}return t.next=24,e.CourseSyllabusItem();case 24:o=t.sent,t.next=31;break;case 27:if("update"!==e.resourceAction){t.next=31;break}return t.next=30,e.ChangeSyllabusItem();case 30:o=t.sent;case 31:if(s=void 0,0!==o.status){t.next=40;break}return s=o.result.id,t.next=36,e.mountSyllabusResource(s);case 36:e.btnLoading=!1,i.close(),t.next=43;break;case 40:return e.btnLoading=!1,i.close(),t.abrupt("return");case 43:t.next=48;break;case 45:return e.btnLoading=!1,i.close(),t.abrupt("return",e.$message({message:"讲义资源创建失败！",type:"error"}));case 48:case"end":return t.stop()}},t,e,[[10,14]])}))()},getHandoutPath:function(e){this.handoutForm.path=e},checkResIsInOutline:function(){var e=this;return o()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("检查大纲是否挂载在大纲上"),"update"!==e.resourceAction||e.nativeResourceRadio!=e.resourceRadio){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,e.$http.checkResIsInOutline(e.syllabus_id,e.resourceRadio);case 5:if(0!==(i=t.sent).status){t.next=16;break}if(!(i.result.length>0)){t.next=13;break}return e.resourceRadio="",e.$message({type:"error",message:"该资源已经挂载在这个大纲上！"}),t.abrupt("return",!1);case 13:return t.abrupt("return",!0);case 14:t.next=17;break;case 16:return t.abrupt("return",!1);case 17:case"end":return t.stop()}},t,e)}))()},CourseSyllabusItem:function(){var e=this;return o()(a.a.mark(function t(){var i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("新增大纲资源条目名称"),i={name:e.addResFirFrom.name,pid:e.currentId,course_syllabus_id:e.syllabus_id},e.addResFirFrom.study_time&&(i.study_time=e.addResFirFrom.study_time),e.addResFirFrom.start_time&&(i.start_time=e.addResFirFrom.start_time),void 0!=e.addResFirFrom.apply_to&&null!=e.addResFirFrom.apply_to&&0!==e.addResFirFrom.apply_to.length&&(i.apply_to=e.addResFirFrom.apply_to[0]),t.next=7,e.$http.CourseSyllabusItem(i);case 7:if(0!==(n=t.sent).status){t.next=12;break}return t.abrupt("return",n);case 12:return e.$message.error("添加失败！"),t.abrupt("return",n);case 14:case"end":return t.stop()}},t,e)}))()},ChangeSyllabusItem:function(){var e=this;return o()(a.a.mark(function t(){var i,n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("修改大纲资源条目名称"),i=e.currentId,n={name:e.addResFirFrom.name,course_syllabus_id:e.syllabus_id},e.addResFirFrom.study_time&&(n.study_time=e.addResFirFrom.study_time),e.addResFirFrom.start_time&&(n.start_time=e.addResFirFrom.start_time),void 0!=e.addResFirFrom.apply_to&&null!=e.addResFirFrom.apply_to&&0!==e.addResFirFrom.apply_to.length&&(n.apply_to=e.addResFirFrom.apply_to[0]),t.next=8,e.$http.ChangeSyllabusItem(i,n);case 8:if(0!==(r=t.sent).status){t.next=13;break}return t.abrupt("return",r);case 13:return e.$message.error("添加失败！"),t.abrupt("return",r);case 15:case"end":return t.stop()}},t,e)}))()},mountSyllabusResource:function(e){var t=this;return o()(a.a.mark(function i(){var n,r;return a.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return console.log("大纲资源条目挂载资源"),n={resource_id:t.resourceRadio,tag_id:t.tag_id,course_syllabus_id:t.syllabus_id},i.next=4,t.$http.mountSyllabusResource(e,n);case 4:0===(r=i.sent).status?(t.$message({type:"success",message:"add"===t.resourceAction?"新增资源成功！":"修改资源成功！"}),t.dialogFormVisible=!1,t.getSyllabusItems()):2===r.status&&t.$message({message:"add"===t.resourceAction?"新增资源失败！":"修改资源失败！",type:"error"});case 6:case"end":return i.stop()}},i,t)}))()},updateSyllabusResource:function(){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:2===e.sourceRadio?e.sourceRadio2Syllabus():1===e.sourceRadio&&e.sourceRadio1Syllabus();case 1:case"end":return t.stop()}},t,e)}))()},openeEditResource:function(e){this.active=0,this.addResFirFrom.name=e.name,this.addResFirFrom.apply_to=e.apply_to?[e.apply_to]:[],this.addResFirFrom.start_time=e.start_time,this.addResFirFrom.study_time=e.study_time,this.currentId=e.id,this.resourceRadio=e.resource&&String(e.resource.id),this.nativeResourceRadio=e.resource&&String(e.resource.id),this.resourceType=e.resource&&e.resource.discriminator,this.dialogFormVisible=!0,this.resourceAction="update"},openDelResDialog:function(e){this.currentId=e,this.dialogVisible=!0,this.deleteModule=!1},openDelOutlineDialog:function(e){this.currentId=e,this.dialogVisible=!0,this.deleteModule=!0},confirmDelete:function(){var e=this;return o()(a.a.mark(function t(){var i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.currentId,n={course_syllabus_id:e.syllabus_id},t.next=4,e.$http.DeleteSyllabusItem(i,n);case 4:0==t.sent.status&&(e.$message({message:"删除成功",type:"success"}),e.getSyllabusItems()),e.dialogVisible=!1;case 7:case"end":return t.stop()}},t,e)}))()},openChildDialog:function(e,t){this.adddialogVisible=!0,this.Moduledialog=!0,this.bigdislog=!1,this.ruleProject.name="",this.currentId=e},openFirLvDialog:function(){this.adddialogVisible=!0,this.Moduledialog=!0,this.bigdislog=!0,this.ruleProject.name="",this.currentId="0"},addruleProject:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.adddialogVisible=!1,1!=t.Moduledialog?t.$refs[t.refname][0].innerText=t.ruleProject.name:t.addbigCourse(),console.log("submit!")})},addbigCourse:function(){var e=this;return o()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.btnLoading=!0,t.next=3,e.$http.CourseSyllabusItem({name:e.ruleProject.name,pid:e.currentId,course_syllabus_id:e.syllabus_id});case 3:i=t.sent,e.btnLoading=!1,0==i.status?(i.message="添加成功！",e.currentId="0",e.getSyllabusItems()):i.message="添加失败！",e.$message({message:i.message,type:"success"});case 7:case"end":return t.stop()}},t,e)}))()},updateruleProject:function(e){var t,i=this;this.$refs[e].validate((t=o()(a.a.mark(function e(t){var n,r,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=11;break}return n=i.currentId,r={name:i.ruleProject.name,course_syllabus_id:i.syllabus_id},i.btnLoading=!0,e.next=6,i.$http.ChangeSyllabusItem(n,r);case 6:o=e.sent,i.btnLoading=!1,0==o.status?(i.$message({message:"修改成功！",type:"success"}),i.adddialogVisible=!1,i.getSyllabusItems()):i.$message.error("修改失败！"),e.next=12;break;case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}},e,i)})),function(e){return t.apply(this,arguments)}))},editproject:function(e,t){console.log(e,t),this.currentId=e,this.ruleProject.name=t,this.adddialogVisible=!0,this.Moduledialog=!1},getSyllabusItems:function(){var e=this;return o()(a.a.mark(function t(){var i,n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.$loading({lock:!0,text:"正在拼命获取课程大纲数据...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),n={course_syllabus_id:e.syllabus_id},t.next=4,e.$http.getSyllabusItems(n);case 4:r=t.sent,i.close(),0==r.status?e.tabledata=r.result:e.$message({message:"获取课程大纲条目失败！"});case 7:case"end":return t.stop()}},t,e)}))()},checkSyllabus:function(){var e=this;return o()(a.a.mark(function t(){var i;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$http.checkSyllabus(e.syllabus_id);case 2:0==(i=t.sent).status&&(e.title=i.result.title,e.tag_id=i.result.tag_id,e.is_knowledge_open=0!==i.result.is_knowledge_open,e.project_id=i.result.project.id,e.isAllowUse=i.result.status,e.subject_id=i.result.subject.id,e.coursesylllevel=i.result.template.level_max);case 4:case"end":return t.stop()}},t,e)}))()},dragEnd:function(e){var t=this;return o()(a.a.mark(function e(){var i;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.sortOptions&&t.sortOptions.parmas.near_by){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.sortSyllabus(t.sortOptions.id,t.sortOptions.parmas);case 4:i=e.sent,t.sortOptions="",0==i.status?(t.message({type:"success",message:"排序成功！"}),t.getSyllabusItems()):t.message({type:"warning",message:"排序失败！"});case 7:case"end":return e.stop()}},e,t)}))()},onMoveCallback:function(e,t){var i=0;i=e.draggedContext.futureIndex>e.draggedContext.index?1:-1,this.sortOptions={id:e.draggedContext.element.id,parmas:{near_by:e.relatedContext.element&&e.relatedContext.element.id,direction:i,course_syllabus_id:this.syllabus_id}}},handleInputChange:function(e){""==e&&(this.videoForm.duration_second=0)},getVideoPath:function(){var e=this;return o()(a.a.mark(function t(){var i,n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=Object(p.b)(e.videoForm.video_id),n={url:i},t.next=4,e.$http.getVideoPath(n);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,e)}))()},resetForm:function(e){this.$refs[e].resetFields()},handleOpenKnowledgeDialog:function(e){this.currentSyllabusItemKnowledge=[1,1],this.getOutlineKnowledgeList(),this.dialogKnowledgeVisible=!0},getOutlineKnowledgeList:function(){var e=this;return o()(a.a.mark(function t(){var i,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={project_id:e.project_id,subject_id:e.subject_id},t.next=3,e.$http.getOutlineKnowledgeList(i);case 3:n=t.sent,0===(n={status:0,message:"请求成功",result:{status:0,message:"",result:{id:149,title:"CMA",contents:[{parent:null,depth:1,children:[{parent:null,depth:2,children:[{relation_id:21057,relation_type:5,id:21058,title:"资产负债表",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21057,relation_type:5,id:21059,title:"损益表",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21057,relation_type:5,id:21060,title:"现金流量表",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21057,title:"财务报表",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21061,relation_type:5,id:21062,title:"应收",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21061,relation_type:5,id:21063,title:"存货",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21061,relation_type:5,id:21064,title:"投资",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21061,relation_type:5,id:21065,title:"固定资产",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21061,title:"资产",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21066,relation_type:5,id:21067,title:"负债",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:1,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21066,title:"负债",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:1,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21068,relation_type:5,id:21069,title:"所得税",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21068,title:"所得税",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21070,relation_type:5,id:21071,title:"租赁",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21070,title:"租赁",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21072,relation_type:5,id:21073,title:"权益",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21072,title:"权益",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21074,relation_type:5,id:21075,title:"收入确认",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21074,title:"收入确认",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21076,relation_type:5,id:21077,title:"美国准则和国际准则",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21076,title:"美国准则和国际准则",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21056,title:"对外财务报告决策",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:1,children:[{parent:null,depth:2,children:[{relation_id:21079,relation_type:5,id:21080,title:"战略框架",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21079,title:"战略框架",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21081,relation_type:5,id:21082,title:"预算的概念",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21081,relation_type:5,id:21083,title:"预算的编制方法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21081,title:"预算的概念",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21084,relation_type:5,id:21085,title:"回归分析",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21084,relation_type:5,id:21086,title:"学习曲线",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21084,relation_type:5,id:21087,title:"期望值",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21084,title:"预测技术",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21088,relation_type:5,id:21089,title:"经营预算",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21088,relation_type:5,id:21090,title:"财务预算",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21088,title:"编制预算",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21078,title:"规划、预算编制与预测",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:1,children:[{parent:null,depth:2,children:[{relation_id:21092,relation_type:5,id:21093,title:"差异分析总体概述",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21092,relation_type:5,id:21094,title:"直接材料和直接人工差异",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21092,relation_type:5,id:21095,title:"变动制造费用和固定制造费用差异",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21092,relation_type:5,id:21096,title:"销售量差异",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21092,title:"差异分析",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21097,relation_type:5,id:21098,title:"责任中心",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21097,title:"责任中心",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21099,relation_type:5,id:21100,title:"转移定价",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21099,title:"转移定价",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21101,relation_type:5,id:21102,title:"投资回报率和剩余收益",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21101,relation_type:5,id:21103,title:"平衡计分卡",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21101,title:"绩效评估",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:null}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21091,title:"绩效管理",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:1,children:[{parent:null,depth:2,children:[{relation_id:21105,relation_type:5,id:21106,title:"成本基础",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21105,title:"成本基础",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21107,relation_type:5,id:21108,title:"成本系统",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21107,title:"成本系统",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21109,relation_type:5,id:21110,title:"吸收成本法和变动成本法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21109,title:"吸收成本法和变动成本法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21111,relation_type:5,id:21112,title:"分批法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21111,relation_type:5,id:21113,title:"分步法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21111,relation_type:5,id:21114,title:"作业成本法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21111,relation_type:5,id:21115,title:"生命周期成本法",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21111,title:"成本计量系统",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:4,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21116,relation_type:5,id:21117,title:"联合成本分配",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21116,title:"联合成本分配",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21118,relation_type:5,id:21119,title:"服务部门间接费用分配",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21118,title:"服务部门间接费用分配",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21120,relation_type:5,id:21121,title:"供应链管理",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21120,title:"供应链管理",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21122,relation_type:5,id:21123,title:"业务流程改进",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21122,title:"业务流程改进",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21104,title:"成本管理",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:1,children:[{parent:null,depth:2,children:[{relation_id:21125,relation_type:5,id:21126,title:"内部控制",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21125,title:"内部控制",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21127,relation_type:5,id:21128,title:"法律",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""},{relation_id:21127,relation_type:5,id:21129,title:"审计意见",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21127,title:"法律",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21130,relation_type:5,id:21131,title:"内部审计",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21130,title:"内部审计",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null},{parent:null,depth:2,children:[{relation_id:21132,relation_type:5,id:21133,title:"系统安全",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:""}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21132,title:"系统安全",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:2,number_of_questions:0,project_id:2,subject_id:76,definition:null}],knowledges:null,examination_syllabus_id:149,question_type:0,id:21124,title:"内部控制",difficulty:0,created_at:1527737061,updated_at:1527737061,score:0,test_rate:0,important:3,number_of_questions:0,project_id:2,subject_id:76,definition:null}],project:{id:2,name:"CMA",spell:null},subject:{id:76,project:null,name:"新纲 中文Part 1"},version:201809,old_version:"",enabled:!1}}}).status&&(e.knowledgeList=n.result.result.contents);case 6:case"end":return t.stop()}},t,e)}))()}},computed:{syllabus_id:function(){return this.$route.params.sid}},mounted:function(){for(var e=1;e<=120;e++)this.study_time_options.push({value:e})},created:function(){this.getSyllabusItems(),this.checkSyllabus()}},w={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"module-edu-content permission-outlinemodule"},[i("el-row",{staticClass:"outlineeat"},[i("el-col",{attrs:{span:18}},[e._v("\n      课程大纲："+e._s(e.title)+"\n    ")]),e._v(" "),4===e.coursesylllevel?i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[i("el-switch",{attrs:{"active-text":"是否启用知识点关联"},on:{change:e.handleChangeIsKnowledgeOpen},model:{value:e.is_knowledge_open,callback:function(t){e.is_knowledge_open=t},expression:"is_knowledge_open"}})],1):e._e()],1),e._v(" "),i("div",{staticClass:"outlinebox"},[i("div",{staticClass:"chapterbox"},[3===e.coursesylllevel?e._l(e.tabledata,function(t){return i("div",{key:t.id,staticClass:"first-chapter-box"},[i("div",{staticClass:"chaptit"},[i("span",{staticClass:"chlft"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelOutlineDialog(t.id)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"chrgt1",on:{click:function(i){e.openChildDialog(t.id)}}},[e._v("增加子目录")])]),e._v(" "),i("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".second-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(i){e.$set(t,"children",i)},expression:"firstItem.children"}},e._l(t.children,function(t){return i("div",{key:t.id,staticClass:"second-chapter-box"},[i("div",{staticClass:"chaptit chapsecd"},[i("span",{staticClass:"chlft"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelOutlineDialog(t.id)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"chrgt1 yellow",on:{click:function(i){e.openAddResDialog(t.id)}}},[e._v("新增资源")])]),e._v(" "),i("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".third-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(i){e.$set(t,"children",i)},expression:"secItem.children"}},e._l(t.children,function(t){return i("div",{key:t.id,staticClass:"resourcebox third-chapter-box"},[i("div",{staticClass:"knowledge"},[t.apply_to?i("el-tag",{staticClass:"attribute-tag",attrs:{size:"small",type:"danger"}},[e._v(e._s("2"==t.apply_to?"提分盒子":"跳级测试"))]):e._e(),e._v(" "),i("span",{staticClass:"chlft"},[e._v("\n                      "+e._s(t.name)+"\n                      "),t.study_time&&"0"!=t.study_time?[i("span",{staticClass:"chline"},[e._v("|")]),e._v("建议学习："+e._s(t.study_time)+"分钟")]:e._e(),e._v(" "),t.resource?[i("span",{staticClass:"chline"},[e._v("|")]),e._v("资源ID："+e._s(t.resource&&t.resource.id)+" 【"+e._s(e._f("Resource2chn")(t.resource&&t.resource.discriminator))+"】，"+e._s(t.resource&&t.resource.title))]:e._e()],2),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openeEditResource(t)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelResDialog(t.id)}}},[e._v("删除")])],1)])}))],1)}))],1)}):e._e(),e._v(" "),4===e.coursesylllevel?e._l(e.tabledata,function(t){return i("div",{key:t.id,staticClass:"first-chapter-box"},[i("div",{staticClass:"chaptit"},[i("span",{staticClass:"chlft"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelOutlineDialog(t.id)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"chrgt1",on:{click:function(i){e.openChildDialog(t.id)}}},[e._v("增加子目录")])]),e._v(" "),i("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".second-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(i){e.$set(t,"children",i)},expression:"firstItem.children"}},e._l(t.children,function(t){return i("div",{key:t.id,staticClass:"second-chapter-box"},[i("div",{staticClass:"chaptit chapsecd"},[i("span",{staticClass:"chlft"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelOutlineDialog(t.id)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"chrgt1",on:{click:function(i){e.openChildDialog(t.id,!0)}}},[e._v("增加子目录")])]),e._v(" "),i("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".third-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(i){e.$set(t,"children",i)},expression:"secItem.children"}},e._l(t.children,function(t){return i("div",{key:t.id,staticClass:"third-chapter-box"},[i("div",{staticClass:"knowledge"},[i("span",{staticClass:"chlft"},[i("i"),e._v(" "),i("span",[e._v(e._s(t.name))])]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelOutlineDialog(t.id)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"chrgt1 yellow",on:{click:function(i){e.openAddResDialog(t.id)}}},[e._v("新增资源")])]),e._v(" "),i("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".fourth-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(i){e.$set(t,"children",i)},expression:"thirdItem.children"}},e._l(t.children,function(t){return i("div",{key:t.id,staticClass:"resourcebox fourth-chapter-box"},[i("div",{staticClass:"knowledge"},[t.apply_to?i("el-tag",{staticClass:"attribute-tag",attrs:{size:"small",type:"danger"}},[e._v(e._s("2"==t.apply_to?"提分盒子":"跳级测试"))]):e._e(),e._v(" "),i("span",{staticClass:"chlft"},[e._v("\n                          "+e._s(t.name)+"\n                          "),t.study_time&&"0"!=t.study_time?[i("span",{staticClass:"chline"},[e._v("|")]),e._v("建议学习："+e._s(t.study_time)+"分钟")]:e._e(),e._v(" "),t.resource?[i("span",{staticClass:"chline"},[e._v("|")]),e._v("资源ID："+e._s(t.resource&&t.resource.id)+" 【"+e._s(e._f("Resource2chn")(t.resource&&t.resource.discriminator))+"】 "+e._s(t.resource&&t.resource.title)+" ")]:e._e()],2),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openeEditResource(t)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelResDialog(t.id)}}},[e._v("删除")])],1)])}))],1)}))],1)}))],1)}):e._e(),e._v(" "),2===e.coursesylllevel?e._l(e.tabledata,function(t){return i("div",{key:t.id,staticClass:"first-chapter-box"},[i("div",{staticClass:"chaptit"},[i("span",{staticClass:"chlft"},[e._v(e._s(t.name))]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.editproject(t.id,t.name)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelOutlineDialog(t.id)}}},[e._v("删除")]),e._v(" "),i("span",{staticClass:"chrgt1 yellow",on:{click:function(i){e.openAddResDialog(t.id)}}},[e._v("新增资源")])]),e._v(" "),i("draggable",{attrs:{element:"div",move:e.onMoveCallback,options:{animation:150,draggable:".second-chapter-box"}},on:{end:e.dragEnd},model:{value:t.children,callback:function(i){e.$set(t,"children",i)},expression:"firstItem.children"}},e._l(t.children,function(t){return i("div",{key:t.id,staticClass:"resourcebox second-chapter-box"},[i("div",{staticClass:"knowledge"},[t.apply_to?i("el-tag",{staticClass:"attribute-tag",attrs:{size:"small",type:"danger"}},[e._v(e._s("2"==t.apply_to?"提分盒子":"跳级测试"))]):e._e(),e._v(" "),i("span",{staticClass:"chlft"},[e._v("\n                  "+e._s(t.name)+"\n                  "),t.study_time&&"0"!=t.study_time?[i("span",{staticClass:"chline"},[e._v("|")]),e._v("建议学习："+e._s(t.study_time)+"分钟")]:e._e(),e._v(" "),t.resource?[i("span",{staticClass:"chline"},[e._v("|")]),e._v("资源ID："+e._s(t.resource&&t.resource.id)+" 【"+e._s(e._f("Resource2chn")(t.resource&&t.resource.discriminator))+"】，"+e._s(t.resource&&t.resource.title)+" ")]:e._e()],2),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openeEditResource(t)}}},[e._v("修改")]),e._v(" "),i("span",{staticClass:"chrgt",on:{click:function(i){e.openDelResDialog(t.id)}}},[e._v("删除")])],1)])}))],1)}):e._e(),e._v(" "),i("div",{staticClass:"chaptit additem"},[i("span",{on:{click:e.openFirLvDialog}},[e._v("新增一级大纲目录")])])],2)]),e._v(" "),i("el-dialog",{staticClass:"tabplane addResourceDialog",attrs:{title:"选择学习资源",width:"60%",top:"2%",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-steps",{staticStyle:{"margin-top":"-10px","margin-bottom":"10px"},attrs:{active:e.active,"finish-status":"finish",simple:""}},e._l(e.progressText,function(e,t){return i("el-step",{key:t,attrs:{title:e.text,description:""}})})),e._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:0==e.active,expression:"active == 0"}],ref:"addResFirFrom",staticClass:"demo-ruleForm",attrs:{model:e.addResFirFrom,"label-width":"100px"},nativeOn:{submit:function(e){e.preventDefault()}}},[i("el-form-item",{attrs:{label:"显示名称",prop:"name",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:100})}},[i("el-input",{staticClass:"coursetxt",nativeOn:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.firstNextSubmit("addResFirFrom")}},model:{value:e.addResFirFrom.name,callback:function(t){e.$set(e.addResFirFrom,"name",t)},expression:"addResFirFrom.name"}})],1),e._v(" "),i("el-row",{staticClass:"ep-set-box"},[i("p",{staticClass:"ep-line"}),e._v(" "),i("span",{staticClass:"ep-tips"},[e._v("以下设置为EP专用：（选填）")])]),e._v(" "),i("el-form-item",{attrs:{label:"建议学习时长",prop:"study_time"}},[i("el-select",{attrs:{"popper-class":"study-time-select",clearable:"",placeholder:"请选择"},model:{value:e.addResFirFrom.study_time,callback:function(t){e.$set(e.addResFirFrom,"study_time",t)},expression:"addResFirFrom.study_time"}},e._l(e.study_time_options,function(e){return i("el-option",{key:e.value,attrs:{label:e.value,value:e.value}})})),e._v("\n        分钟\n      ")],1),e._v(" "),i("el-form-item",{staticClass:"coursebtn"},[i("el-button",{staticStyle:{"margin-top":"12px"},on:{click:function(t){e.firstNextSubmit("addResFirFrom")}}},[e._v("下一步")])],1)],1),e._v(" "),i("el-form",{directives:[{name:"show",rawName:"v-show",value:1==e.active,expression:"active == 1"}],staticClass:"demo-ruleForm",attrs:{"label-width":"100px"}},[i("div",{staticClass:"selectmodel"},e._l(e.resourceTypeList,function(t,n){return i("span",{key:n,class:[e.resourceType==t.discriminator?"is-active":""],on:{click:function(i){e.selectclk(t.discriminator)}}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),e._v(" "),"paper"===e.resourceType?i("el-form-item",{attrs:{label:"资源应用"}},[i("el-checkbox-group",{on:{change:e.handleCheckboxChange},model:{value:e.addResFirFrom.apply_to,callback:function(t){e.$set(e.addResFirFrom,"apply_to",t)},expression:"addResFirFrom.apply_to"}},[i("el-checkbox",{attrs:{label:"1"}},[e._v("跳级测试")]),e._v(" "),i("el-checkbox",{attrs:{label:"2"}},[e._v("提分盒子")])],1)],1):e._e(),e._v(" "),"paper"===e.resourceType?i("el-form-item",{attrs:{label:"开启时间",prop:"start_time"}},[i("el-date-picker",{attrs:{type:"datetime","value-format":"timestamp",placeholder:"请设置开启时间"},model:{value:e.addResFirFrom.start_time,callback:function(t){e.$set(e.addResFirFrom,"start_time",t)},expression:"addResFirFrom.start_time"}})],1):e._e(),e._v(" "),i("el-form-item",{staticClass:"coursebtn"},[i("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),i("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.secondSubmit}},[e._v("下一步")])],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2==e.active,expression:"active == 2"}],staticClass:"rulemodule"},[i("el-form",{directives:[{name:"show",rawName:"v-show",value:"video"===e.resourceType||"lecture_note"===e.resourceType,expression:"resourceType === 'video' || resourceType === 'lecture_note'"}],attrs:{"label-position":"left","label-width":"80px"}},[i("el-form-item",{attrs:{label:"来源"}},[i("el-radio-group",{model:{value:e.sourceRadio,callback:function(t){e.sourceRadio=t},expression:"sourceRadio"}},[i("el-radio",{attrs:{label:1}},[e._v("上传/创建资源")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("从已有资源选择")])],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.sourceRadio&&"lecture_note"===e.resourceType,expression:"sourceRadio === 1 && resourceType === 'lecture_note'"}]},[i("HandoutUpload",{ref:"handoutUpload",on:{getHandoutPath:e.getHandoutPath}})],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:1===e.sourceRadio&&"video"===e.resourceType,expression:"sourceRadio === 1 && resourceType === 'video'"}]},[i("el-form",{ref:"videoForm",staticClass:"resource-ruleForm",attrs:{model:e.videoForm,"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"视频地址",prop:"video_id",rules:e.filter_rules({required:!0,type:"isVideoId"})}},[i("el-input",{attrs:{placeholder:"请输入视频地址","auto-complete":"off"},model:{value:e.videoForm.video_id,callback:function(t){e.$set(e.videoForm,"video_id",t)},expression:"videoForm.video_id"}}),e._v(" "),i("el-tooltip",{attrs:{placement:"top"}},[i("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n                只需要输入地址中不同部分即可,如示例:红色部分："),i("br"),e._v(e._s(e.urltip)+"\n                "),i("span",{staticStyle:{color:"red"}},[e._v("16oe3We00h1ye2hZ")]),e._v(e._s(e.urltip2))]),e._v(" "),i("i",{staticClass:"el-icon-info"})])],1),e._v(" "),i("el-form-item",{staticClass:"displayinline",attrs:{label:"视频时长（分）",prop:"duration_minutes",rules:[{required:!0,type:"number",message:"请填写视频时长的分钟",trigger:["change","blur"]}]}},[i("el-input",{attrs:{placeholder:"请填写视频时长的分钟","auto-complete":"off"},model:{value:e.videoForm.duration_minutes,callback:function(t){e.$set(e.videoForm,"duration_minutes",e._n(t))},expression:"videoForm.duration_minutes"}}),e._v("\n            分\n          ")],1),e._v(" "),i("el-form-item",{staticClass:"displayinline",attrs:{label:"视频时长（秒）",prop:"duration_second",rules:[{message:"请填写视频时长的秒",trigger:["change","blur"]}]}},[i("el-input",{attrs:{placeholder:"请填写视频时长的秒","auto-complete":"off"},on:{change:e.handleInputChange},model:{value:e.videoForm.duration_second,callback:function(t){e.$set(e.videoForm,"duration_second",t)},expression:"videoForm.duration_second"}}),e._v("\n            秒\n          ")],1)],1)],1),e._v(" "),i("el-row",{directives:[{name:"show",rawName:"v-show",value:2===e.sourceRadio,expression:"sourceRadio === 2"}]},[i("el-input",{attrs:{placeholder:e.inputPlaceholder,size:"small"},nativeOn:{keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.handleIconClick(t):null}},model:{value:e.resourceinput,callback:function(t){e.resourceinput=t},expression:"resourceinput"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleIconClick},slot:"append"})],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.resLoading,expression:"resLoading"}],ref:"singleTable",staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.resourceTable,border:"","tooltip-effect":"dark","max-height":"400","highlight-current-row":""},on:{"selection-change":e.handleSelectionChange,"current-change":e.handleTableChange}},e._l(e.resourceTableConfig,function(t,n){return i("el-table-column",{key:n,attrs:{label:t.label,width:t.wh,"show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(n){return["id"==t.key||"paper_id"==t.key||"live_id"==t.key?[i("el-radio",{staticClass:"radio",attrs:{label:String(n.row.id)},model:{value:e.resourceRadio,callback:function(t){e.resourceRadio=t},expression:"resourceRadio"}}),e._v(" "),i("span",[e._v(e._s(n.row[t.key]))])]:"discriminator"==t.key?i("span",[e._v(e._s(e._f("Resource2chn")(n.row[t.key])))]):i("span",[e._v(e._s(n.row[t.key]))])]}}])})})),e._v(" "),i("el-pagination",{attrs:{"current-page":e.pagination.current_page,"page-size":50,layout:"total, prev, pager, next, jumper",total:e.pagination.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.pagination,"current_page",t)}}})],1),e._v(" "),i("div",{staticClass:"coursebtn",staticStyle:{"padding-top":"0","margin-top":"20px"}},[i("el-button",{staticStyle:{"margin-top":"12px"},on:{click:e.prev}},[e._v("上一步")]),e._v(" "),"add"==e.resourceAction?i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.addSyllabusResourceItem}},[e._v(e._s(e.btnLoading?"新增中":"确 定")+"\n        ")]):e._e(),e._v(" "),"update"==e.resourceAction?i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.updateSyllabusResource}},[e._v(e._s(e.btnLoading?"新增中":"确 定")+"\n        ")]):e._e()],1)],1)],1),e._v(" "),i("el-dialog",{staticClass:"tabplane",attrs:{title:e.deleteModule?"删除课程大纲目录":"删除已选资源",visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("span",[e._v(e._s(e.deleteModule?"确定要删除该课程大纲目录吗？删除后，该目录下的子目录及资源关系均将被删除！":"确定要删除已选择的资源吗？"))]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.confirmDelete}},[e._v("确 定")])],1)]),e._v(" "),i("SelectKnowledge",{attrs:{"dialog-knowledge-visible":e.dialogKnowledgeVisible,"knowledge-list":e.knowledgeList,"current-syllabus-item-knowledge":e.currentSyllabusItemKnowledge},on:{changeCurrentSyllabusItemKnowledge:e.changeCurrentSyllabusItemKnowledge,handleCloseKnowledgeDialog:function(t){e.dialogKnowledgeVisible=!1}}}),e._v(" "),i("el-dialog",{staticClass:"tabplane",attrs:{title:e.Moduledialog?e.bigdislog?"新增一级大纲目录":"新增课程大纲子目录":"修改课程大纲名称",center:"",visible:e.adddialogVisible,size:"tiny"},on:{"update:visible":function(t){e.adddialogVisible=t}}},[i("el-form",{ref:"ruleProject",staticClass:"demo-ruleForm",attrs:{model:e.ruleProject,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"显示名称",prop:"name",rules:e.filter_rules({required:!0,type:"isAllSpace",maxLength:100})}},[i("el-input",{staticClass:"coursetxt",model:{value:e.ruleProject.name,callback:function(t){e.$set(e.ruleProject,"name",t)},expression:"ruleProject.name"}})],1)],1),e._v(" "),i("div",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.adddialogVisible=!1}}},[e._v("取 消")]),e._v(" "),1==e.Moduledialog?i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.addruleProject("ruleProject")}}},[e._v(e._s(e.btnLoading?"新增中":"确 定")+"\n      ")]):i("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){e.updateruleProject("ruleProject")}}},[e._v("\n        "+e._s(e.btnLoading?"保存中":"保 存")+"\n      ")])],1)],1)],1)},staticRenderFns:[]};var C=i("vSla")(k,w,!1,function(e){i("kVj5")},null,null);t.default=C.exports},"405r":function(e,t,i){"use strict";var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}!function(){function t(e){function t(e){e.parentElement.removeChild(e)}function i(e,t,i){var n=0===i?e.children[0]:e.children[i-1].nextSibling;e.insertBefore(t,n)}function r(e,t){var i=this;this.$nextTick(function(){return i.$emit(e.toLowerCase(),t)})}var o=["Start","Add","Remove","Update","End"],s=["Choose","Sort","Filter","Clone"],l=["Move"].concat(o,s).map(function(e){return"on"+e}),d=null;return{name:"draggable",props:{options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(e){return e}},element:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1,init:!1}},render:function(e){var t=this.$slots.default;if(t&&1===t.length){var i=t[0];i.componentOptions&&"transition-group"===i.componentOptions.tag&&(this.transitionMode=!0)}var n=t,r=this.$slots.footer;r&&(n=t?[].concat(a(t),a(r)):[].concat(a(r)));var o=null,s=function(e,t){o=function(e,t,i){return void 0==i?e:((e=null==e?{}:e)[t]=i,e)}(o,e,t)};if(s("attrs",this.$attrs),this.componentData){var l=this.componentData,d=l.on,c=l.props;s("on",d),s("props",c)}return e(this.element,o,n)},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.element.toLowerCase()!==this.$el.nodeName.toLowerCase(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter element value or remove transition-group. Current element value: "+this.element);var i={};o.forEach(function(e){i["on"+e]=function(e){var t=this;return function(i){null!==t.realList&&t["onDrag"+e](i),r.call(t,e,i)}}.call(t,e)}),s.forEach(function(e){i["on"+e]=r.bind(t,e)});var a=n({},this.options,i,{onMove:function(e,i){return t.onDragMove(e,i)}});!("draggable"in a)&&(a.draggable=">*"),this._sortable=new e(this.rootContainer,a),this.computeIndexes()},beforeDestroy:function(){this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},isCloning:function(){return!!this.options&&!!this.options.group&&"clone"===this.options.group.pull},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(e){for(var t in e)-1==l.indexOf(t)&&this._sortable.option(t,e[t])},deep:!0},realList:function(){this.computeIndexes()}},methods:{getChildrenNodes:function(){if(this.init||(this.noneFunctionalComponentMode=this.noneFunctionalComponentMode&&1==this.$children.length,this.init=!0),this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var e=this.$slots.default;return this.transitionMode?e[0].child.$slots.default:e},computeIndexes:function(){var e=this;this.$nextTick(function(){e.visibleIndexes=function(e,t,i){if(!e)return[];var n=e.map(function(e){return e.elm}),r=[].concat(a(t)).map(function(e){return n.indexOf(e)});return i?r.filter(function(e){return-1!==e}):r}(e.getChildrenNodes(),e.rootContainer.children,e.transitionMode)})},getUnderlyingVm:function(e){var t=function(e,t){return e.map(function(e){return e.elm}).indexOf(t)}(this.getChildrenNodes()||[],e);return-1===t?null:{index:t,element:this.realList[t]}},getUnderlyingPotencialDraggableComponent:function(e){var t=e.__vue__;return t&&t.$options&&"transition-group"===t.$options._componentTag?t.$parent:t},emitChanges:function(e){var t=this;this.$nextTick(function(){t.$emit("change",e)})},alterList:function(e){if(this.list)e(this.list);else{var t=[].concat(a(this.value));e(t),this.$emit("input",t)}},spliceList:function(){var e=arguments,t=function(t){return t.splice.apply(t,e)};this.alterList(t)},updatePosition:function(e,t){var i=function(i){return i.splice(t,0,i.splice(e,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(e){var t=e.to,i=e.related,a=this.getUnderlyingPotencialDraggableComponent(t);if(!a)return{component:a};var r=a.realList,o={list:r,component:a};if(t!==i&&r&&a.getUnderlyingVm){var s=a.getUnderlyingVm(i);if(s)return n(s,o)}return o},getVmIndex:function(e){var t=this.visibleIndexes,i=t.length;return e>i-1?i:t[e]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(e){if(this.noTransitionOnDrag&&this.transitionMode){this.getChildrenNodes()[e].data=null;var t=this.getComponent();t.children=[],t.kept=void 0}},onDragStart:function(e){this.context=this.getUnderlyingVm(e.item),e.item._underlying_vm_=this.clone(this.context.element),d=e.item},onDragAdd:function(e){var i=e.item._underlying_vm_;if(void 0!==i){t(e.item);var n=this.getVmIndex(e.newIndex);this.spliceList(n,0,i),this.computeIndexes();var a={element:i,newIndex:n};this.emitChanges({added:a})}},onDragRemove:function(e){if(i(this.rootContainer,e.item,e.oldIndex),this.isCloning)t(e.clone);else{var n=this.context.index;this.spliceList(n,1);var a={element:this.context.element,oldIndex:n};this.resetTransitionData(n),this.emitChanges({removed:a})}},onDragUpdate:function(e){t(e.item),i(e.from,e.item,e.oldIndex);var n=this.context.index,a=this.getVmIndex(e.newIndex);this.updatePosition(n,a);var r={element:this.context.element,oldIndex:n,newIndex:a};this.emitChanges({moved:r})},computeFutureIndex:function(e,t){if(!e.element)return 0;var i=[].concat(a(t.to.children)).filter(function(e){return"none"!==e.style.display}),n=i.indexOf(t.related),r=e.component.getVmIndex(n);return-1!=i.indexOf(d)||!t.willInsertAfter?r:r+1},onDragMove:function(e,t){var i=this.move;if(!i||!this.realList)return!0;var a=this.getRelatedContextFromMoveEvent(e),r=this.context,o=this.computeFutureIndex(a,e);return n(r,{futureIndex:o}),n(e,{relatedContext:a,draggedContext:r}),i(e,t)},onDragEnd:function(e){this.computeIndexes(),d=null}}}}Array.from||(Array.from=function(e){return[].slice.call(e)});var r=i("HOBB");e.exports=t(r)}()},BEzw:function(e,t){},CByA:function(e,t){},HOBB:function(e,t,i){var n,a;
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(r){"use strict";void 0===(a="function"==typeof(n=r)?n.call(t,i,t,e):n)||(e.exports=a)}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var e,t,i,n,a,r,o,s,l,d,c,u,p,_,f,h,m,g,b,v,y,x={},k=/\s+/g,w=/left|right|inline/,C="Sortable"+(new Date).getTime(),j=window,D=j.document,F=j.parseInt,S=j.setTimeout,R=j.jQuery||j.Zepto,I=j.Polymer,q=!1,T="draggable"in D.createElement("div"),L=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((y=D.createElement("x")).style.cssText="pointer-events:auto","auto"===y.style.pointerEvents),$=!1,E=Math.abs,O=Math.min,P=[],A=[],M=ne(function(e,t,i){if(i&&t.scroll){var n,a,r,o,c,u,p=i[C],_=t.scrollSensitivity,f=t.scrollSpeed,h=e.clientX,m=e.clientY,g=window.innerWidth,b=window.innerHeight;if(l!==i&&(s=t.scroll,l=i,d=t.scrollFn,!0===s)){s=i;do{if(s.offsetWidth<s.scrollWidth||s.offsetHeight<s.scrollHeight)break}while(s=s.parentNode)}s&&(n=s,a=s.getBoundingClientRect(),r=(E(a.right-h)<=_)-(E(a.left-h)<=_),o=(E(a.bottom-m)<=_)-(E(a.top-m)<=_)),r||o||(o=(b-m<=_)-(m<=_),((r=(g-h<=_)-(h<=_))||o)&&(n=j)),x.vx===r&&x.vy===o&&x.el===n||(x.el=n,x.vx=r,x.vy=o,clearInterval(x.pid),n&&(x.pid=setInterval(function(){if(u=o?o*f:0,c=r?r*f:0,"function"==typeof d)return d.call(p,c,u,e);n===j?j.scrollTo(j.pageXOffset+c,j.pageYOffset+u):(n.scrollTop+=u,n.scrollLeft+=c)},24)))}},30),V=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=i.name),"function"==typeof e?e:function(i,n){var a=n.options.group.name;return t?e:e&&(e.join?e.indexOf(a)>-1:a==e)}}var i={},n=e.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){q={capture:!1,passive:!1}}}))}catch(e){}function N(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=ae({},t),e[C]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==N.supportPointer};for(var n in i)!(n in t)&&(t[n]=i[n]);for(var a in V(t),this)"_"===a.charAt(0)&&"function"==typeof this[a]&&(this[a]=this[a].bind(this));this.nativeDraggable=!t.forceFallback&&T,X(e,"mousedown",this._onTapStart),X(e,"touchstart",this._onTapStart),t.supportPointer&&X(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(e,"dragover",this),X(e,"dragenter",this)),A.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function B(t,i){"clone"!==t.lastPullMode&&(i=!0),n&&n.state!==i&&(z(n,"display",i?"none":""),i||n.state&&(t.options.group.revertClone?(a.insertBefore(n,r),t._animate(e,n)):a.insertBefore(n,e)),n.state=i)}function U(e,t,i){if(e){i=i||D;do{if(">*"===t&&e.parentNode===i||ie(e,t))return e}while(e=K(e))}return null}function K(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function X(e,t,i){e.addEventListener(t,i,q)}function Y(e,t,i){e.removeEventListener(t,i,q)}function H(e,t,i){if(e)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(k," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(k," ")}}function z(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return D.defaultView&&D.defaultView.getComputedStyle?i=D.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function W(e,t,i){if(e){var n=e.getElementsByTagName(t),a=0,r=n.length;if(i)for(;a<r;a++)i(n[a],a);return n}return[]}function J(e,t,i,a,r,o,s,l){e=e||t[C];var d=D.createEvent("Event"),c=e.options,u="on"+i.charAt(0).toUpperCase()+i.substr(1);d.initEvent(i,!0,!0),d.to=r||t,d.from=o||t,d.item=a||t,d.clone=n,d.oldIndex=s,d.newIndex=l,t.dispatchEvent(d),c[u]&&c[u].call(e,d)}function G(e,t,i,n,a,r,o,s){var l,d,c=e[C],u=c.options.onMove;return(l=D.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=a||t,l.relatedRect=r||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),u&&(d=u.call(c,l,o)),d}function Z(e){e.draggable=!1}function Q(){$=!1}function ee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function te(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!ie(e,t)||i++;return i}function ie(e,t){if(e){var i=(t=t.split(".")).shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==i&&e.nodeName.toUpperCase()!=i||t.length&&((" "+e.className+" ").match(n)||[]).length!=t.length)}return!1}function ne(e,t){var i,n;return function(){void 0===i&&(i=arguments,n=this,S(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),i=void 0},t))}}function ae(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function re(e){return I&&I.dom?I.dom(e).cloneNode(!0):R?R(e).clone(!0)[0]:e.cloneNode(!0)}function oe(e){return S(e,0)}function se(e){return clearTimeout(e)}return N.prototype={constructor:N,_onTapStart:function(t){var i,n=this,a=this.el,r=this.options,s=r.preventOnFilter,l=t.type,d=t.touches&&t.touches[0],c=(d||t).target,u=t.target.shadowRoot&&t.path&&t.path[0]||c,p=r.filter;if(function(e){var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var n=t[i];n.checked&&P.push(n)}}(a),!e&&!(/mousedown|pointerdown/.test(l)&&0!==t.button||r.disabled)&&!u.isContentEditable&&(c=U(c,r.draggable,a))&&o!==c){if(i=te(c,r.draggable),"function"==typeof p){if(p.call(this,t,c,this))return J(n,u,"filter",c,a,a,i),void(s&&t.preventDefault())}else if(p&&(p=p.split(",").some(function(e){if(e=U(u,e.trim(),a))return J(n,e,"filter",c,a,a,i),!0})))return void(s&&t.preventDefault());r.handle&&!U(u,r.handle,a)||this._prepareDragStart(t,d,c,i)}},_prepareDragStart:function(i,n,s,l){var d,c=this,u=c.el,p=c.options,f=u.ownerDocument;s&&!e&&s.parentNode===u&&(g=i,a=u,t=(e=s).parentNode,r=e.nextSibling,o=s,h=p.group,_=l,this._lastX=(n||i).clientX,this._lastY=(n||i).clientY,e.style["will-change"]="all",d=function(){c._disableDelayedDrag(),e.draggable=c.nativeDraggable,H(e,p.chosenClass,!0),c._triggerDragStart(i,n),J(c,a,"choose",e,a,a,_)},p.ignore.split(",").forEach(function(t){W(e,t.trim(),Z)}),X(f,"mouseup",c._onDrop),X(f,"touchend",c._onDrop),X(f,"touchcancel",c._onDrop),X(f,"selectstart",c),p.supportPointer&&X(f,"pointercancel",c._onDrop),p.delay?(X(f,"mouseup",c._disableDelayedDrag),X(f,"touchend",c._disableDelayedDrag),X(f,"touchcancel",c._disableDelayedDrag),X(f,"mousemove",c._disableDelayedDrag),X(f,"touchmove",c._disableDelayedDrag),p.supportPointer&&X(f,"pointermove",c._disableDelayedDrag),c._dragStartTimer=S(d,p.delay)):d())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),Y(e,"mouseup",this._disableDelayedDrag),Y(e,"touchend",this._disableDelayedDrag),Y(e,"touchcancel",this._disableDelayedDrag),Y(e,"mousemove",this._disableDelayedDrag),Y(e,"touchmove",this._disableDelayedDrag),Y(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(t,i){(i=i||("touch"==t.pointerType?t:null))?(g={target:e,clientX:i.clientX,clientY:i.clientY},this._onDragStart(g,"touch")):this.nativeDraggable?(X(e,"dragend",this),X(a,"dragstart",this._onDragStart)):this._onDragStart(g,!0);try{D.selection?oe(function(){D.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(a&&e){var t=this.options;H(e,t.ghostClass,!0),H(e,t.dragClass,!1),N.active=this,J(this,a,"start",e,a,a,_)}else this._nulling()},_emulateDragOver:function(){if(b){if(this._lastX===b.clientX&&this._lastY===b.clientY)return;this._lastX=b.clientX,this._lastY=b.clientY,L||z(i,"display","none");var e=D.elementFromPoint(b.clientX,b.clientY),t=e,n=A.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(b.clientX,b.clientY)),t)do{if(t[C]){for(;n--;)A[n]({clientX:b.clientX,clientY:b.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);L||z(i,"display","")}},_onTouchMove:function(e){if(g){var t=this.options,n=t.fallbackTolerance,a=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=r.clientX-g.clientX+a.x,s=r.clientY-g.clientY+a.y,l=e.touches?"translate3d("+o+"px,"+s+"px,0)":"translate("+o+"px,"+s+"px)";if(!N.active){if(n&&O(E(r.clientX-this._lastX),E(r.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),v=!0,b=r,z(i,"webkitTransform",l),z(i,"mozTransform",l),z(i,"msTransform",l),z(i,"transform",l),e.preventDefault()}},_appendGhost:function(){if(!i){var t,n=e.getBoundingClientRect(),r=z(e),o=this.options;H(i=e.cloneNode(!0),o.ghostClass,!1),H(i,o.fallbackClass,!0),H(i,o.dragClass,!0),z(i,"top",n.top-F(r.marginTop,10)),z(i,"left",n.left-F(r.marginLeft,10)),z(i,"width",n.width),z(i,"height",n.height),z(i,"opacity","0.8"),z(i,"position","fixed"),z(i,"zIndex","100000"),z(i,"pointerEvents","none"),o.fallbackOnBody&&D.body.appendChild(i)||a.appendChild(i),t=i.getBoundingClientRect(),z(i,"width",2*n.width-t.width),z(i,"height",2*n.height-t.height)}},_onDragStart:function(t,i){var r=this,o=t.dataTransfer,s=r.options;r._offUpEvents(),h.checkPull(r,r,e,t)&&((n=re(e)).draggable=!1,n.style["will-change"]="",z(n,"display","none"),H(n,r.options.chosenClass,!1),r._cloneId=oe(function(){a.insertBefore(n,e),J(r,a,"clone",e)})),H(e,s.dragClass,!0),i?("touch"===i?(X(D,"touchmove",r._onTouchMove),X(D,"touchend",r._onDrop),X(D,"touchcancel",r._onDrop),s.supportPointer&&(X(D,"pointermove",r._onTouchMove),X(D,"pointerup",r._onDrop))):(X(D,"mousemove",r._onTouchMove),X(D,"mouseup",r._onDrop)),r._loopId=setInterval(r._emulateDragOver,50)):(o&&(o.effectAllowed="move",s.setData&&s.setData.call(r,o,e)),X(D,"drop",r),r._dragStartId=oe(r._dragStarted))},_onDragOver:function(o){var s,l,d,_,f=this.el,g=this.options,b=g.group,y=N.active,x=h===b,k=!1,j=g.sort;if(void 0!==o.preventDefault&&(o.preventDefault(),!g.dragoverBubble&&o.stopPropagation()),!e.animated&&(v=!0,y&&!g.disabled&&(x?j||(_=!a.contains(e)):m===this||(y.lastPullMode=h.checkPull(this,y,e,o))&&b.checkPut(this,y,e,o))&&(void 0===o.rootEl||o.rootEl===this.el))){if(M(o,g,this.el),$)return;if(s=U(o.target,g.draggable,f),l=e.getBoundingClientRect(),m!==this&&(m=this,k=!0),_)return B(y,!0),t=a,void(n||r?a.insertBefore(e,n||r):j||a.appendChild(e));if(0===f.children.length||f.children[0]===i||f===o.target&&function(e,t){var i=e.lastElementChild.getBoundingClientRect();return t.clientY-(i.top+i.height)>5||t.clientX-(i.left+i.width)>5}(f,o)){if(0!==f.children.length&&f.children[0]!==i&&f===o.target&&(s=f.lastElementChild),s){if(s.animated)return;d=s.getBoundingClientRect()}B(y,x),!1!==G(a,f,e,l,s,d,o)&&(e.contains(f)||(f.appendChild(e),t=f),this._animate(l,e),s&&this._animate(d,s))}else if(s&&!s.animated&&s!==e&&void 0!==s.parentNode[C]){c!==s&&(c=s,u=z(s),p=z(s.parentNode));var D=(d=s.getBoundingClientRect()).right-d.left,F=d.bottom-d.top,R=w.test(u.cssFloat+u.display)||"flex"==p.display&&0===p["flex-direction"].indexOf("row"),I=s.offsetWidth>e.offsetWidth,q=s.offsetHeight>e.offsetHeight,T=(R?(o.clientX-d.left)/D:(o.clientY-d.top)/F)>.5,L=s.nextElementSibling,E=!1;if(R){var O=e.offsetTop,P=s.offsetTop;E=O===P?s.previousElementSibling===e&&!I||T&&I:s.previousElementSibling===e||e.previousElementSibling===s?(o.clientY-d.top)/F>.5:P>O}else k||(E=L!==e&&!q||T&&q);var A=G(a,f,e,l,s,d,o,E);!1!==A&&(1!==A&&-1!==A||(E=1===A),$=!0,S(Q,30),B(y,x),e.contains(f)||(E&&!L?f.appendChild(e):s.parentNode.insertBefore(e,E?L:s)),t=e.parentNode,this._animate(l,e),this._animate(d,s))}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),z(t,"transition","none"),z(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,z(t,"transition","all "+i+"ms"),z(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=S(function(){z(t,"transition",""),z(t,"transform",""),t.animated=!1},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;Y(D,"touchmove",this._onTouchMove),Y(D,"pointermove",this._onTouchMove),Y(e,"mouseup",this._onDrop),Y(e,"touchend",this._onDrop),Y(e,"pointerup",this._onDrop),Y(e,"touchcancel",this._onDrop),Y(e,"pointercancel",this._onDrop),Y(e,"selectstart",this)},_onDrop:function(o){var s=this.el,l=this.options;clearInterval(this._loopId),clearInterval(x.pid),clearTimeout(this._dragStartTimer),se(this._cloneId),se(this._dragStartId),Y(D,"mouseover",this),Y(D,"mousemove",this._onTouchMove),this.nativeDraggable&&(Y(D,"drop",this),Y(s,"dragstart",this._onDragStart)),this._offUpEvents(),o&&(v&&(o.preventDefault(),!l.dropBubble&&o.stopPropagation()),i&&i.parentNode&&i.parentNode.removeChild(i),a!==t&&"clone"===N.active.lastPullMode||n&&n.parentNode&&n.parentNode.removeChild(n),e&&(this.nativeDraggable&&Y(e,"dragend",this),Z(e),e.style["will-change"]="",H(e,this.options.ghostClass,!1),H(e,this.options.chosenClass,!1),J(this,a,"unchoose",e,t,a,_),a!==t?(f=te(e,l.draggable))>=0&&(J(null,t,"add",e,t,a,_,f),J(this,a,"remove",e,t,a,_,f),J(null,t,"sort",e,t,a,_,f),J(this,a,"sort",e,t,a,_,f)):e.nextSibling!==r&&(f=te(e,l.draggable))>=0&&(J(this,a,"update",e,t,a,_,f),J(this,a,"sort",e,t,a,_,f)),N.active&&(null!=f&&-1!==f||(f=_),J(this,a,"end",e,t,a,_,f),this.save()))),this._nulling()},_nulling:function(){a=e=t=i=r=n=o=s=l=g=b=v=f=c=u=m=h=N.active=null,P.forEach(function(e){e.checked=!0}),P.length=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragover":case"dragenter":e&&(this._onDragOver(t),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(t));break;case"mouseover":this._onDrop(t);break;case"selectstart":t.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,a=i.length,r=this.options;n<a;n++)U(e=i[n],r.draggable,this.el)&&t.push(e.getAttribute(r.dataIdAttr)||ee(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,n){var a=i.children[n];U(a,this.options.draggable,i)&&(t[e]=a)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return U(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&V(i)},destroy:function(){var e=this.el;e[C]=null,Y(e,"mousedown",this._onTapStart),Y(e,"touchstart",this._onTapStart),Y(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Y(e,"dragover",this),Y(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),A.splice(A.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},X(D,"touchmove",function(e){N.active&&e.preventDefault()}),N.utils={on:X,off:Y,css:z,find:W,is:function(e,t){return!!U(e,t,e)},extend:ae,throttle:ne,closest:U,toggleClass:H,clone:re,index:te,nextTick:oe,cancelNextTick:se},N.create=function(e,t){return new N(e,t)},N.version="1.7.0",N})},XTO2:function(e,t){},kVj5:function(e,t){}});
//# sourceMappingURL=2.51ca25527c0ecdf01ed5.js.map