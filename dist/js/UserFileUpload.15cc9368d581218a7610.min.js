/*! liulibiao modified this file at 2017-12-11 14:55:17 */
webpackJsonp([33],{247:function(e,t,a){function s(e){i||(a(918),a(917))}var i=!1,r=a(53)(a(767),a(826),s,"data-v-0607a548",null);r.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/order/UserFileUpload.vue",r.esModule&&Object.keys(r.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] UserFileUpload.vue: functional components are not supported with templates, they should use render functions."),e.exports=r.exports},650:function(e,t,a){var s,i;s=[t,a(209),a(54)],void 0!==(i=function(e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateRegisterAgreement=e.FinancialRegisterInfo=e.CustomRegisterInfo=e.removeUploadFile=e.confirmAgreement=e.getOrderInfoByCardId=e.getVideoUrl=void 0;var s=function(e){return e&&e.__esModule?e:{default:e}}(t),i=s.default.create({baseURL:(0,a.getBaseUrl)()});e.getVideoUrl=function(e){return i.post("/ListenInvitation/GetStudentUrl",e)},e.getOrderInfoByCardId=function(e){return i.post("/Agreement/GetOrderInfoByCardId",e)},e.confirmAgreement=function(e){return i.post("/Agreement/ConfirmAgreement",e)},e.removeUploadFile=function(e){return i.post("/Agreement/RemoveUploadFile",e)},e.CustomRegisterInfo=function(e){return i.post("/Agreement/CustomRegisterInfo",e)},e.FinancialRegisterInfo=function(e){return i.post("/Agreement/FinancialRegisterInfo",e)},e.CreateRegisterAgreement=function(e){return i.post("/Agreement/CreateRegisterAgreement",e)}}.apply(t,s))&&(e.exports=i)},651:function(e,t,a){var s,i;s=[t,a(23),a(8)],void 0!==(i=function(e,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOrderInfoByNo=e.queryDeposit=e.queryPaySerial=void 0;e.queryPaySerial=function(e){return(0,t.post)("/OrderSerial/QuerySerialPay",e)},e.queryDeposit=function(e){return(0,t.post)("/OrderDeposit/MyDeposit",e)},e.getOrderInfoByNo=function(e){return(0,t.post)("/Agreement/GetOrderInfoByNo",e)}}.apply(t,s))&&(e.exports=i)},767:function(e,t,a){var s,i;s=[e,t,a(5),a(23),a(8),a(650),a(651),a(63),a(21),a(54)],void 0!==(i=function(e,t,a,s,i,r,o,n,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e&&e.__esModule}(a);t.default={data:function(){return{dialogFormVisible:!0,isShowMain:!1,liveUrl:"",invitationId:"",orderNo:"",orderStatus:0,loading:!1,Agreements:[],IDcardFace:"",IDcardBack:"",AuditInformationUrl:"",apiHeader:{},hasFaceUpload:!0,hasBackUpload:!0,hasZipUpload:!0,faceShow:!0,backShow:!0,zipShow:!0,zipFileName:"",CustomerName:"",Phone:"",CertificateType:"",CertificateNo:"",fileFormData:{OrderNo:"",FileType:1},picClass:{dicActive:"m-bottom-dic-active",dicUnActive:"m-bottom-dic-unactive",areaClass:"m-area"},form:{cardNo:""}}},computed:{materialUpload:function(){return(0,c.getBaseUrl)()+"/Agreement/MaterialUpload"}},methods:{beforeFaceUpload:function(e){},beforeZipUpload:function(e){},checkFile:function(e,t,a){if(!e)return!1;var s=!0,r=this.getFileExt(e.name);if(1==a){if(!(s=".jpg"==r||".jpeg"==r||".png"==r))return(0,i.Message)({message:"上传图片格式错误!",showClose:!0,type:"warning"}),!1}else if(2==a&&!(s=".zip"==r||".rar"==r||".7z"==r))return(0,i.Message)({message:"请上传文件压缩包!",showClose:!0,type:"warning"}),!1;var o=e.size/1024/1024<t;return o?s&o:((0,i.Message)({message:"上传图片大小不能超过 "+t+"MB!",showClose:!0,type:"warning"}),!1)},getFileExt:function(e){var t=/\.[^\.]+$/.exec(e);return t&&t.length>0?t[0]:""},getFileName:function(e){return e?e.substring(e.lastIndexOf("/")+1):e},uploadFaceChange:function(e,t){if(!this.checkFile(e,1,1))return void this.clearFiles(1);"ready"==e.status&&(this.IDcardFace=e.url,this.hasFaceUpload=!1)},uploadBackChange:function(e,t){if(!this.checkFile(e,1,1))return void this.clearFiles(2);"ready"==e.status&&(this.IDcardBack=e.url,this.hasBackUpload=!1)},uploadZipChange:function(e,t){if(!this.checkFile(e,4,2))return void this.clearFiles(3);"ready"==e.status&&(this.AuditInformationUrl=e.url,this.hasZipUpload=!1,this.zipFileName=e.name)},faceSuccess:function(e,t,a){this.loading=!1,e&&(0!=e.status?((0,i.Message)({message:e.info,showClose:!0,type:"warning"}),this.hasFaceUpload=!0,this.IDcardFace=""):((0,i.Message)({message:"上传成功",showClose:!0,type:"warning"}),this.hasFaceUpload=!0,this.IDcardFace=e.result.FileUrl))},backSuccess:function(e,t,a){this.loading=!1,e&&(0!=e.status?((0,i.Message)({message:e.info,showClose:!0,type:"warning"}),this.hasBackUpload=!0,this.IDcardBack=""):((0,i.Message)({message:"上传成功",showClose:!0,type:"warning"}),this.hasBackUpload=!0,this.IDcardBack=e.result.FileUrl))},zipSuccess:function(e,t,a){this.loading=!1,e&&(0!=e.status?((0,i.Message)({message:e.info,showClose:!0,type:"warning"}),this.hasZipUpload=!0,this.AuditInformationUrl=""):((0,i.Message)({message:"上传成功",showClose:!0,type:"warning"}),this.hasZipUpload=!0,this.AuditInformationUrl=e.result.FileUrl))},uploadFile:function(e){switch(this.fileFormData.FileType=e,this.loading=!0,e){case 1:this.$refs.uploadface.submit();break;case 2:this.$refs.uploadback.submit();break;case 3:this.$refs.uploadzip.submit()}},getOrderInfo:function(){var e=this,t={OrderNo:this.orderNo};(0,o.getOrderInfoByNo)(t).then(function(t){if(0===t.status){var a=t.result;e.CustomerName=a.CustomerName,e.Phone=a.Phone,e.CertificateType=a.CertificateType,e.CertificateNo=a.CertificateNo,e.Agreements=a.Agreements,e.IDcardFace=a.IDcardFace,e.IDcardBack=a.IDcardBack,e.AuditInformationUrl=a.AuditInformationUrl,e.zipFileName=e.getFileName(e.AuditInformationUrl),e.orderStatus=a.OrderStatus,e.isShowMain=!0}else(0,i.Message)({message:t.info,showClose:!0,type:"warning"})}).catch(function(){})},confirmAgree:function(e){var t=this,a={AgreeId:e};(0,r.confirmAgreement)(a).then(function(a){0===a.data.status?t.Agreements.forEach(function(t){t.Id==e&&(t.ConfirmStatus=a.data.result.ConfirmStatus,t.ConfirmTime=a.data.result.ConfirmTime)}):(0,i.Message)({message:a.data.info,showClose:!0,type:"warning"})}).catch(function(){})},queryOrderInfo:function(){this.getOrderInfo()},removeFile:function(e){var t=this,a={FileType:e,OrderNo:this.orderNo};this.clearFiles(e),this.removeLocalFile(e)||(0,r.removeUploadFile)(a).then(function(a){if(0===a.data.status)switch(e){case 1:t.IDcardFace="",t.hasFaceUpload=!0;break;case 2:t.IDcardBack="",t.hasBackUpload=!0;break;case 3:t.AuditInformationUrl="",t.hasZipUpload=!0}else(0,i.Message)({message:a.data.info,showClose:!0,type:"warning"})}).catch(function(){})},removeLocalFile:function(e){switch(e){case 1:if(!this.hasFaceUpload)return this.IDcardFace="",this.hasFaceUpload=!0,!0;break;case 2:if(!this.hasBackUpload)return this.IDcardBack="",this.hasBackUpload=!0,!0;break;case 3:if(!this.hasZipUpload)return this.AuditInformationUrl="",this.hasZipUpload=!0,!0}return!1},clearFiles:function(e){var t=this;switch(e){case 1:this.faceShow=!1,setTimeout(function(){t.faceShow=!0},200);break;case 2:this.backShow=!1,setTimeout(function(){t.backShow=!0},200);break;case 3:this.zipShow=!1,setTimeout(function(){t.zipShow=!0},200)}}},created:function(){this.orderNo=this.$route.query.orderNo,this.getOrderInfo(),this.fileFormData.OrderNo=this.orderNo;var e=(0,n.getCookie)("GDSID"),t="Bearer "+(0,n.getCookie)(l.CRM_TOKEN);this.apiHeader={Authorization:t,GDSID:e}},mounted:function(){document.querySelector(".crm-navigation").classList.add("crm-navigation","pointer-events")}},e.exports=t.default}.apply(t,s))&&(e.exports=i)},826:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"content-box-show m-top"},[a("el-row",[a("el-col",{staticClass:"contact-title",attrs:{sm:24}},[a("p",[e._v("客户信息")])])],1),e._v(" "),a("el-row",{staticStyle:{"padding-left":"15px","margin-top":"28px","font-size":"14px"}},[a("el-col",{attrs:{sm:24}},[a("span",[e._v("订单号：")]),e._v(" "),a("span",[e._v(e._s(this.orderNo))])])],1),e._v(" "),a("el-row",{staticStyle:{"padding-left":"15px","margin-top":"28px","font-size":"14px"}},[a("el-col",{attrs:{sm:6}},[a("span",[e._v("姓名：")]),e._v(" "),a("span",{staticClass:"m-lable"},[e._v(e._s(this.CustomerName))])]),e._v(" "),a("el-col",{attrs:{sm:6}},[a("span",[e._v("联系电话：")]),e._v(" "),a("span",{staticClass:"m-lable"},[e._v(e._s(this.Phone))])]),e._v(" "),a("el-col",{attrs:{sm:6}},[a("span",[e._v("证件类型：")]),e._v(" "),a("span",{staticClass:"m-lable"},[e._v(e._s(this.CertificateType))])]),e._v(" "),a("el-col",{attrs:{sm:6}},[a("span",[e._v("证件号码：")]),e._v(" "),a("span",{staticClass:"m-lable"},[e._v(e._s(this.CertificateNo))])])],1)],1),e._v(" "),a("div",{staticClass:"content-box-show m-middle"},[a("el-row",[a("el-col",{staticClass:"contact-title",attrs:{sm:24}},[a("p",[e._v("协议确认")])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},e._l(e.Agreements,function(t){return a("el-col",{key:t.Id,attrs:{sm:8}},[a("div",{staticClass:"m-confirm-area m-area"},[a("el-row",[a("el-col",{staticClass:"m-agree",attrs:{sm:24}},[a("span",{staticClass:"m-middle-title sp-agree-title"},[a("a",{attrs:{href:t.AgreementUrl,target:"_blank",title:t.AgreementName}},[e._v(" 《"+e._s(t.AgreementName)+"》")])])])],1),e._v(" "),t.IsUserRegier?e._e():a("el-row",[a("el-col",{staticClass:"m-status",attrs:{sm:24}},[a("span",[e._v("状态:")]),e._v(" "),a("span",{staticClass:"m-lable"},[e._v(e._s(0==t.ConfirmStatus?"未确认":"已确认"))]),e._v(" "),a("el-button",{staticStyle:{width:"70px","margin-left":"24px"},attrs:{type:"primary",disabled:!0,size:"small"},on:{click:function(a){e.confirmAgree(t.Id)}}},[e._v("确认\n                            ")])],1)],1),e._v(" "),1!=t.ConfirmStatus||t.IsUserRegier?e._e():a("el-row",[a("el-col",{staticClass:"m-confirm-time",attrs:{sm:24}},[a("span",[e._v("确认时间:")]),e._v(" "),a("span",{staticClass:"m-lable"},[e._v(e._s(t.ConfirmTime))])])],1)],1)])}))],1),e._v(" "),a("div",{staticClass:"content-box-show m-bottom"},[a("el-row",[a("el-col",{staticClass:"contact-title",attrs:{sm:24}},[a("p",[e._v("资料上传")])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[a("el-col",{attrs:{sm:8}},[a("div",{staticClass:"m-area m-bottom-fileadd",staticStyle:{position:"relative"}},[e.faceShow?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.IDcardFace,expression:"IDcardFace"}],staticClass:"m-pic-priview",attrs:{src:e.IDcardFace}}),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.IDcardFace,expression:"!IDcardFace"}],ref:"uploadface",staticStyle:{height:"100%"},attrs:{data:e.fileFormData,action:e.materialUpload,"show-file-list":!1,"before-upload":e.beforeFaceUpload,"on-success":e.faceSuccess,"on-change":e.uploadFaceChange,"auto-upload":!1}},[a("div",{staticClass:"m-bottom-fileadd",staticStyle:{width:"250px",height:"150px"}},[a("span",{staticClass:"sp-upload-word"},[e._v("上传身份证正面")])])])],1):e._e()]),e._v(" "),a("div",{staticStyle:{"margin-top":"18px","text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.hasFaceUpload&&1000427!=e.orderStatus,expression:"!hasFaceUpload&&orderStatus!=1000427"}],staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.uploadFile(1)}}},[e._v("上传\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.IDcardFace&&e.hasFaceUpload,expression:"IDcardFace&&hasFaceUpload"}],staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.IDcardFace,target:"_blank"}},[e._v("\n                            预览\n                        ")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.IDcardFace&&1000427!=e.orderStatus,expression:"IDcardFace&&orderStatus!=1000427"}],staticClass:"m-btn-text",staticStyle:{"border-color":"#20a0ff"},attrs:{type:"text",size:"small"},on:{click:function(t){e.removeFile(1)}}},[e._v("删除\n                    ")])],1)]),e._v(" "),a("el-col",{attrs:{sm:8}},[a("div",{staticClass:"m-area",staticStyle:{position:"relative"}},[e.backShow?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("img",{directives:[{name:"show",rawName:"v-show",value:e.IDcardBack,expression:"IDcardBack"}],staticClass:"m-pic-priview",attrs:{src:e.IDcardBack}}),e._v(" "),a("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.IDcardBack,expression:"!IDcardBack"}],ref:"uploadback",staticStyle:{height:"100%"},attrs:{data:e.fileFormData,action:e.materialUpload,"show-file-list":!1,"on-change":e.uploadBackChange,"on-success":e.backSuccess,"before-upload":e.beforeFaceUpload,"auto-upload":!1}},[a("div",{staticClass:"m-bottom-fileadd",staticStyle:{width:"250px",height:"150px"}},[a("span",{staticClass:"sp-upload-word"},[e._v("上传身份证反面")])])])],1):e._e()]),e._v(" "),a("div",{staticStyle:{"margin-top":"18px","text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.hasBackUpload&&1000427!=e.orderStatus,expression:"!hasBackUpload&&orderStatus!=1000427"}],staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.uploadFile(2)}}},[e._v("上传\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.IDcardBack&&e.hasBackUpload,expression:"IDcardBack&&hasBackUpload"}],staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.IDcardBack,target:"_blank"}},[e._v("\n                            预览\n                        ")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.IDcardBack&&1000427!=e.orderStatus,expression:"IDcardBack&&orderStatus!=1000427"}],staticClass:"m-btn-text",staticStyle:{"border-color":"#20a0ff"},attrs:{type:"text",size:"small"},on:{click:function(t){e.removeFile(2)}}},[e._v("删除\n                    ")])],1)]),e._v(" "),a("el-col",{attrs:{sm:8}},[a("div",{class:[e.AuditInformationUrl?e.picClass.dicActive:e.picClass.dicUnActive,"m-area"],staticStyle:{position:"relative"}},[e.zipShow?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-upload",{directives:[{name:"show",rawName:"v-show",value:!e.AuditInformationUrl,expression:"!AuditInformationUrl"}],ref:"uploadzip",staticStyle:{height:"100%"},attrs:{data:e.fileFormData,action:e.materialUpload,"show-file-list":!1,"on-change":e.uploadZipChange,"before-upload":e.beforeZipUpload,"on-success":e.zipSuccess,"auto-upload":!1}},[a("div",{staticStyle:{width:"250px",height:"150px"}})]),e._v(" "),a("div",{staticStyle:{width:"100%",height:"100%"}}),e._v(" "),a("span",{staticClass:"sp-upload-word sp-file-name-overflow",attrs:{title:e.zipFileName}},[e._v(e._s(e.AuditInformationUrl?e.zipFileName:"上传其他资料包"))])],1):e._e()]),e._v(" "),a("div",{staticStyle:{"margin-top":"18px","text-align":"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.hasZipUpload&&1000427!=e.orderStatus,expression:"!hasZipUpload&&orderStatus!=1000427"}],staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"},on:{click:function(t){e.uploadFile(3)}}},[e._v("上传\n                    ")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.AuditInformationUrl&&e.hasZipUpload,expression:"AuditInformationUrl&&hasZipUpload"}],staticStyle:{width:"60px"},attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:e.AuditInformationUrl,target:"_blank"}},[e._v("\n                            下载\n                        ")])]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.AuditInformationUrl&&1000427!=e.orderStatus,expression:"AuditInformationUrl&&orderStatus!=1000427"}],staticClass:"m-btn-text",staticStyle:{"border-color":"#20a0ff"},attrs:{type:"text",size:"small"},on:{click:function(t){e.removeFile(3)}}},[e._v("删除\n                    ")])],1)])],1)],1)])},staticRenderFns:[]},e.exports.render._withStripped=!0},917:function(e,t){},918:function(e,t){}});