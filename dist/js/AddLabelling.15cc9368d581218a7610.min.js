/*! liulibiao modified this file at 2017-12-11 14:55:17 */
webpackJsonp([20],{248:function(e,t,a){function s(e){i||(a(952),a(951))}var i=!1,n=a(53)(a(772),a(869),s,"data-v-60f74bb6",null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/components/settingManage/AddLabelling.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] AddLabelling.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},636:function(e,t,a){function s(e){i||a(647)}var i=!1,n=a(53)(a(638),a(645),s,null,null);n.options.__file="/Users/liulibiao/Desktop/gaodun/resource-common /baiyi.gaodun.com/src/js/plugins/tree/ExtendZTree.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] ExtendZTree.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},638:function(e,t,a){var s,i;s=[e,t,a(639),a(35)],void 0!==(i=function(e,t,a,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function n(e){var t;if(null==e||"object"!=(void 0===e?"undefined":(0,l.default)(e)))return e;if(e instanceof Date)return t=new Date,t.setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var a=0,s=e.length;a<s;a++)t[a]=n(e[a]);return t}if(e instanceof Object){t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=n(e[i]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")}Object.defineProperty(t,"__esModule",{value:!0});var r=i(a),l=i(s);window.zTreeIndex=window.zTreeIndex||90;var o=null,u={check:{enable:!0},data:{simpleData:{enable:!0},key:{name:"Name",title:"Name",children:"ChildrenList"}}},d="";t.default={props:{value:Array,width:String,data:Array,Id:String,onCheck:Function,placeholder:String,index:Number},data:function(){return{names:[],backData:[],showTree:!1,isEmpty:!1,options:{onCheck:function(){}}}},watch:{data:function(e){this.setCheckedNodes(this.value,this.data),this.backData=n(this.data),this.initTree()}},computed:{id:function(){return(10*Math.random()).toString().substring(2,10)},zTreeIndex:function(){return window.zTreeIndex--}},created:function(){d=this,this.setCheckedNodes(this.value,this.data),this.backData=n(this.data),this.options={onCheck:this.onCheck}},mounted:function(){u.callback={onCheck:this.test},this.initTree(),this.treeEvents(),this.$nextTick(function(){this.$on("resetTree",function(){this.clearCheckNodes()})})},methods:{test:function(){},onTreeCheck:function(){for(var e=this.getCheckedNodes(),t=[],a=[],s=e,i=Array.isArray(s),n=0,s=i?s:(0,r.default)(s);;){var l;if(i){if(n>=s.length)break;l=s[n++]}else{if(n=s.next(),n.done)break;l=n.value}var o=l,u=o.Id+"";a.indexOf(o.Id)>-1||u.indexOf("_")>-1||(t.push(o.Name),a.push(o.Id))}this.names=t,this.value=a,this.options.onCheck(a,this.index,t),this.setCheckedNodes(a,this.backData,!0)},initTree:function(){$("#"+this.id).zTree({zSetting:u,zNodes:this.data})},resetTree:function(){var e=$("#"+this.id).zTree("getZTreeObj");e.checkAllNodes(!1)},clearCheckNodes:function(){this.value=[],this.names=[],this.setCheckedNodes(this.value,this.data),this.options.onCheck(this.value,this.index,this.names),this.resetTree(),this.$el.querySelector(".g-extend-ztree-area").style.display="none"},getCheckedNodes:function(){return $("#"+this.id).zTree("getZTreeObj").getCheckedNodes()},setCheckedNodes:function(){function e(t,a){for(var n=t,l=Array.isArray(n),o=0,n=l?n:(0,r.default)(n);;){var u;if(l){if(o>=n.length)break;u=n[o++]}else{if(o=n.next(),o.done)break;u=o.value}var d=u;if(a.indexOf(d.Id)>-1){if(d.checked=!0,!s){if(i.names.indexOf(d.Name)>-1)continue;(-1==i.names.indexOf(d.Id)||/^\d/.test(d.Id))&&i.names.push(d.Name)}}else d.checked=!1;d.ChildrenList&&e(d.ChildrenList,a)}}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments[1],s=arguments[2],i=this;e(a,t)},setChecked:function(e){this.value=e,this.names=[],this.setCheckedNodes(e,this.data,!1),this.initTree()},onChange:function(e){var t=this,a=this;clearTimeout(o),o=setTimeout(function(){var s=n(a.backData);t.filterData(s,e),t.isEmpty=0===s.length,$("#"+t.id).zTree({zSetting:u,zNodes:s})},300)},onFocus:function(e){e.stopPropagation(),this.showTree=!0},onClickStop:function(e){e.cancelBubble=!0,this.showTree=!0;for(var t=document.body.querySelectorAll(".g-extend-ztree-area"),a=0;a<t.length;a++)t[a].style.display="none";this.$el.querySelector(".g-extend-ztree-area").style.display="block"},filterData:function(e,t){for(var a=0;a<e.length;a++)if(e[a].ChildrenList){var s=this.childHasValue(e[a].ChildrenList,t);!0===s?this.filterData(e[a].ChildrenList,t):(e.splice(a,1),a--)}else{if(e[a].Name.indexOf(t)>-1)return!0;e.splice(a,1),a--}return!0},childHasValue:function(e,t){for(var a=0;a<e.length;a++){if(e[a].Name.indexOf(t)>-1)return!0;if(e[a].ChildrenList){return this.childHasValue(e[a].ChildrenList,t)}}},treeEvents:function(){document.body.onclick=function(){for(var e=document.body.querySelectorAll(".g-extend-ztree-area"),t=0;t<e.length;t++)e[t].style.display="none"}.bind(this)}}},e.exports=t.default}.apply(t,s))&&(e.exports=i)},639:function(e,t,a){e.exports={default:a(640),__esModule:!0}},640:function(e,t,a){a(91),a(90),e.exports=a(641)},641:function(e,t,a){var s=a(29),i=a(211);e.exports=a(3).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))}},645:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"g-extend-ztree-box",style:{zIndex:e.zTreeIndex,width:e.width},on:{click:function(t){t.stopPropagation(),e.onClickStop(t)}}},[e.names.length?a("i",{staticClass:"tree-circle-close el-icon-circle-close",on:{click:function(t){t.stopPropagation(),e.clearCheckNodes(t)}}}):e._e(),e._v(" "),a("el-input",{attrs:{type:"text",title:e.names,value:e.names,readonly:"",size:"small",placeholder:e.placeholder},on:{focus:e.onFocus}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showTree,expression:"showTree"}],staticClass:"g-extend-ztree-area",on:{click:e.onTreeCheck}},[a("ul",{directives:[{name:"show",rawName:"v-show",value:!e.isEmpty,expression:"!isEmpty"}],staticClass:"ztree",attrs:{id:e.id}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isEmpty,expression:"isEmpty"}],staticClass:"empty"},[a("i",{staticClass:"el-icon-information"}),e._v(" 未匹配到")]),e._v(" "),a("el-input",{attrs:{type:"text",size:"small",placeholder:"输入关键字进行过滤"},on:{change:this.onChange}})],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},647:function(e,t){},649:function(e,t,a){var s,i;s=[e,t,a(212),a(213),a(35),a(133)],void 0!==(i=function(e,t,a,s,i,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function o(e,t,a,s,i){var n=t||"&",r=a||"=",o={};if("string"!=typeof e||0===e.length)return o;var u=/\+/g,d=e.split(n),c=1e3;s&&"number"==typeof s.maxKeys&&(c=s.maxKeys);var p=d.length;c>0&&p>c&&(p=c);for(var h=0;h<p;++h){var m=d[h].replace(u,"%20"),f=m.indexOf(r),g=void 0,y=void 0,v=void 0,T=void 0;f>=0?(g=m.substr(0,f),y=m.substr(f+1)):(g=m,y=""),v=i?g:decodeURIComponent(g),T=i?y:decodeURIComponent(y),l(o,v)?Array.isArray(o[v])?o[v].push(T):o[v]=[o[v],T]:o[v]=T}return o}function u(e){switch(void 0===e?"undefined":f(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}function d(e,t,a,s,i){var n=t||"&",r=a||"=",l=null===e?void 0:e;return"object"===(void 0===l?"undefined":f(l))?(0,c.default)(l).map(function(e){var t=i?u(e):encodeURIComponent(u(e)),a=t+r;if(Array.isArray(l[e]))return l[e].map(function(e){var t=i?u(e):encodeURIComponent(u(e));return a+t}).join(n);var s=i?u(l[e]):encodeURIComponent(u(l[e]));return a+s}).join(n):s?i?u(s)+r+u(l):encodeURIComponent(u(s))+r+encodeURIComponent(u(l)):""}Object.defineProperty(t,"__esModule",{value:!0});var c=r(a),p=r(s),h=r(i),m=r(n);Object.defineProperty(t,"__esModule",{value:!0});var f="function"==typeof m.default&&"symbol"===(0,h.default)(p.default)?function(e){return void 0===e?"undefined":(0,h.default)(e)}:function(e){return e&&"function"==typeof m.default&&e.constructor===m.default?"symbol":void 0===e?"undefined":(0,h.default)(e)};t.default={encode:d,decode:o,parse:o,stringify:d},e.exports=t.default}.apply(t,s))&&(e.exports=i)},669:function(e,t,a){var s,i;s=[t,a(209),a(54),a(649)],void 0!==(i=function(e,t,a,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.returnActivating=e.getlabellingList=void 0;var n=i(t),r=i(s),l=n.default.create({baseURL:"dev-"==(0,a.getEnv)()?"https://t-apigateway.gaodun.com":"//"+(0,a.getEnv)()+"apigateway.gaodun.com",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e,t){return r.default.stringify(e)}}),o=(l.get,l.post);e.getlabellingList=function(e){return o("/boracay/v1/customertag/get",e)},e.returnActivating=function(e){return o("/boracay/v1/customertag/excute",e)}}.apply(t,s))&&(e.exports=i)},701:function(e,t,a){var s,i;s=[t,a(209),a(54),a(649)],void 0!==(i=function(e,t,a,s){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.setCustomerTag=e.getRuleDetail=e.setUserPackageRule=e.getSysTagDetail=e.getUserPackageRule=e.GetSysTags=e.addCustomerTag=e.checkUserPackageResult=e.GetUserDepartmentTree=void 0;var n=i(t),r=i(s),l=n.default.create({baseURL:"dev-"==(0,a.getEnv)()?"https://t-apigateway.gaodun.com":"//"+(0,a.getEnv)()+"apigateway.gaodun.com",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(e,t){return r.default.stringify(e)}}),o=l.get,u=l.post;e.GetUserDepartmentTree=function(e){return o("/DataStru/GetUserDepartmentTree",{params:e})},e.checkUserPackageResult=function(e){return u("/boracay/v1/customertag/checktitle",e)},e.addCustomerTag=function(e){return u("/boracay/v1/customertag/add",e)},e.GetSysTags=function(e){return u("/tagsapi/v1/systag/get",e)},e.getUserPackageRule=function(e){return u("/boracay/v1/tagrule/add",e)},e.getSysTagDetail=function(e){return u("/tagsapi/v1/systag/getdetail",e)},e.setUserPackageRule=function(e){return u("/boracay/v1/tagrule/set",e)},e.getRuleDetail=function(e){return u("/boracay/v1/tagrule/get",e)},e.setCustomerTag=function(e){return u("/boracay/v1/customertag/set",e)}}.apply(t,s))&&(e.exports=i)},772:function(e,t,a){var s,i;s=[e,t,a(5),a(41),a(701),a(21),a(636),a(669)],void 0!==(i=function(e,t,a,s,i,n,r,l){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var u=(o(a),o(r));t.default={components:{Tree:u.default},data:function(){return{userId:"",content:[],saveClick:!0,mergeClick:!1,deleateClick:!1,addIcon1:!0,addIcon2:!0,removeIcon1:!1,removeIcon2:!1,ruleForm:{name:"",describe:""},userPackageTitle:!0,isCoalesCing:!1,isRuleOut:!1,sysTagData:[],deleateData:[],userInfo:JSON.parse(localStorage.getItem(n.CRM_USER_INFO))||"",sysTags:[],sysTagDetailData:[],sysTagDetailType:[],NumberRules:[{name:"大于"},{name:"介于"},{name:"小于"}],ruleId:[],deleateTags:[],deleateDetailData:[],deleateDetailType:[],deleateNumberRules:[{name:"大于"},{name:"介于"},{name:"小于"}],deleateRuleId:[],pickerOptions2:{shortcuts:[{text:"一天内",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-864e5),e.$emit("pick",[a,t])}},{text:"一周内",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"一月内",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}}]},operateProps:{value:"Name",label:"Name",children:"ChildrenList"},sysLen:-1,deleateLen:-1}},watch:{sysTagData:function(e){e.length>1?this.removeIcon1=!0:this.removeIcon1=!1},deleateData:function(e){e.length>1?this.removeIcon2=!0:this.removeIcon2=!1}},created:function(){var e=this;this.$route.query.userId&&(this.mergeClick=!1,this.deleateClick=!1,this.userId=this.$route.query.userId,this.sysTagData=[],this.deleateData=[],this.isCoalesCing=!0,this.isRuleOut=!0,(0,l.getlabellingList)({owner:this.userInfo.UserId,id:this.$route.query.userId}).then(function(t){e.ruleForm.name=t.data.result[0].TagTitle,e.ruleForm.describe=t.data.result[0].TagDesc}),(0,i.GetSysTags)({appid:130555}).then(function(t){e.sysTags=t.data.result,e.deleateTags=t.data.result,(0,i.getRuleDetail)({customertagid:e.$route.query.userId}).then(function(t){var a=t.data.result,s=[],n=[];a.filter(function(e,t){1==e.GroupType?s.push(e):2==e.GroupType&&n.push(e)}),s.length>0&&(e.sysLen=s.length),n.length>0&&(e.deleateLen=n.length);for(var r in s)!function(t){e.ruleId[t]=s[t].ID,e.sysTagDetailData[t]=[],e.sysTagData.push({tag:"",value:[],operate:"",numberType:"",numberOfTimes1:"",numberOfTimes2:""}),e.sysTags.filter(function(a,i){a._id==s[t].SysTagID&&(e.sysTagData[t].tag=a,e.ruleId.splice(i,1,s[t].ID))}),function(e){var t=this,a=e;if(1==s[a].RuleType)this.sysTagDetailType[a]=1,(0,i.getSysTagDetail)({systagid:s[a].SysTagID}).then(function(e){t.sysTagDetailData[a]=e.data.result;for(var i in t.sysTagDetailData[a])s[a].Values.filter(function(e,s){e.RuleVal==t.sysTagDetailData[a][i].Id&&t.sysTagData[a].value.push(t.sysTagDetailData[a][i].Id)})});else if(2==s[a].RuleType){var n=[];this.sysTagDetailType[a]=2,n.push(s[a].Values[0].RuleVal),n.push(s[a].Values[1].RuleVal),this.sysTagData[a].operate=n}else 3==s[a].RuleType&&(this.sysTagDetailType[a]=3,this.sysTagData[a].numberOfTimes1=s[a].Values[0].RuleVal,s[a].Values.length>1?(this.sysTagData[a].numberOfTimes2=s[a].Values[1].RuleVal,this.sysTagData[a].numberType="介于"):4==s[a].Values[0].RuleCond?this.sysTagData[a].numberType="大于":this.sysTagData[a].numberType="小于")}.call(e,t)}(r);e.disabledData();for(var r in n)!function(t){e.deleateRuleId[t]=s[t].ID,e.deleateDetailData[t]=[],e.deleateData.push({tag:"",value:[],operate:"",numberType:"",numberOfTimes1:"",numberOfTimes2:""}),e.deleateTags.filter(function(a,s){a._id==n[t].SysTagID&&(e.deleateData[t].tag=a,e.deleateRuleId.splice(s,1,n[t].ID))}),function(e){var t=this,a=e;if(1==n[a].RuleType)this.deleateDetailType[a]=1,(0,i.getSysTagDetail)({systagid:n[a].SysTagID}).then(function(e){t.deleateDetailData[a]=e.data.result;for(var s in t.deleateDetailData[a])n[a].Values.filter(function(e,i){e.RuleVal==t.deleateDetailData[a][s].Id&&t.deleateData[a].value.push(t.deleateDetailData[a][s].Id)})});else if(2==n[a].RuleType){var s=[];this.deleateDetailType[a]=2,s.push(n[a].Values[0].RuleVal),s.push(n[a].Values[1].RuleVal),this.deleateData[a].operate=s}else 3==n[a].RuleType&&(this.deleateDetailType[a]=3,this.deleateData[a].numberOfTimes1=n[a].Values[0].RuleVal,n[a].Values.length>1?(this.deleateData[a].numberOfTimes2=n[a].Values[1].RuleVal,this.deleateData[a].numberType="介于"):4==n[a].Values[0].RuleCond?this.deleateData[a].numberType="大于":this.deleateData[a].numberType="小于")}.call(e,t)}(r);e.deleateDisabledData()})}))},methods:{checkUserPackage:function(){(0,i.checkUserPackageResult)({title:this.ruleForm.name}).then(function(e){if("0"!=e.data.status)return void alert(e.data.info)})},returnAddCustomerTag:function(){var e=this;if(!this.ruleForm.name)return void alert("名称不能为空");this.checkUserPackage(),this.$route.query.userId?(0,i.setCustomerTag)({id:this.$route.query.userId,title:this.ruleForm.name,desc:this.ruleForm.describe}).then(function(t){"0"!=t.data.status?alert(t.data.info):e.userId=t.data.result.ID}):(0,i.addCustomerTag)({title:this.ruleForm.name,desc:this.ruleForm.describe,owner:this.userInfo.UserId}).then(function(t){"0"!=t.data.status?alert(t.data.info):(e.userId=t.data.result.ID,e.saveClick=!1,e.mergeClick=!0,e.deleateClick=!0,alert("成功"))})},onCoalescing:function(){var e=this;this.isCoalesCing=!0,this.addIcon1=!1,this.$route.query.userId||(this.sysTagData=[{tag:"",value:[],operate:"",numberType:[],numberOfTimes1:"",numberOfTimes2:""}],(0,i.GetSysTags)({appid:130555}).then(function(t){e.sysTags=t.data.result,e.mergeClick=!1}))},onRuleOut:function(){var e=this;this.addIcon2=!1,this.isRuleOut=!0,this.$route.query.userId||(this.deleateData=[{tag:"",value:[],operate:"",numberType:[],numberOfTimes1:"",numberOfTimes2:""}],(0,i.GetSysTags)({appid:130555}).then(function(t){e.deleateTags=t.data.result,e.deleateClick=!1}))},rowVisible:function(){this.disabledData()},deleateRowVisible:function(){this.deleateDisabledData()},disabledData:function(){for(var e=this,t=0;t<this.sysTags.length;t++)this.sysTags[t].disabled=!1;for(var a=0;a<this.sysTagData.length;a++)!function(t){e.sysTags.filter(function(a){a==e.sysTagData[t].tag&&(a.disabled=!0)})}(a)},deleateDisabledData:function(){for(var e=this,t=0;t<this.deleateTags.length;t++)this.deleateTags[t].disabled=!1;for(var a=0;a<this.deleateData.length;a++)!function(t){e.deleateTags.filter(function(a){a==e.deleateData[t].tag&&(a.disabled=!0)})}(a)},createTree:function(e,t){this.sysTagData[t].value=e},deleateCreateTree:function(e,t){this.deleateData[t].value=e},addUserPackageRule:function(e,t){var a=this;t&&(this.sysTagData[e].value=[],this.sysTagData[e].operate="",this.sysTagData[e].numberType="",this.sysTagData[e].numberOfTimes1="",this.sysTagData[e].numberOfTimes2=""),this.disabledData(),this.sysTagDetailType.splice(e,1,t[e].tag.tag_type),1==t[e].tag.tag_type?(0,i.getSysTagDetail)({systagid:t[e].tag._id}).then(function(t){a.sysTagDetailData.splice(e,1,t.data.result)}):this.sysTagDetailData.splice(e,1,""),e+1>this.sysLen&&(0,i.getUserPackageRule)({customertagid:this.userId,systagid:t[e].tag._id,ruletype:t[e].tag.tag_type,grouptype:1}).then(function(t){a.ruleId.splice(e,1,t.data.result.ID),a.sysTagDetailType.splice(e,1,t.data.result.RuleType)})},deleateUserPackageRule:function(e,t){var a=this;t&&(this.deleateData[e].value=[],this.deleateData[e].operate="",this.deleateData[e].numberType="",this.deleateData[e].numberOfTimes1="",this.deleateData[e].numberOfTimes2=""),this.deleateDisabledData(),this.deleateDetailType.splice(e,1,t[e].tag.tag_type),1==t[e].tag.tag_type?(0,i.getSysTagDetail)({systagid:t[e].tag._id}).then(function(t){a.deleateDetailData.splice(e,1,t.data.result)}):this.deleateDetailData.splice(e,1,""),e+1>this.deleateLen&&(0,i.getUserPackageRule)({customertagid:this.userId,systagid:t[e].tag._id,ruletype:t[e].tag.tag_type,grouptype:2}).then(function(t){a.deleateRuleId.splice(e,1,t.data.result.ID),a.deleateDetailType.splice(e,1,t.data.result.RuleType)})},addClick:function(){this.sysTagData.push({tag:"",value:[],operate:"",numberType:"",numberOfTimes1:"",numberOfTimes2:""})},addRuleOut:function(){this.deleateData.push({tag:"",value:[],operate:"",numberType:"",numberOfTimes1:"",numberOfTimes2:""})},onSaveCoalescing:function(){var e;for(var t in this.sysTagData)if(e=this.sysTagData[t].tag._id,1==this.sysTagDetailType[t]){var a=void 0;a=this.sysTagData[t].value.join(";"),this.returnSetRUle(this.ruleId[t],1,2,a,e,this.sysTagDetailType[t])}else if(2==this.sysTagDetailType[t]){var s=this.dateFomate(this.sysTagData[t].operate[0])+";"+this.dateFomate(this.sysTagData[t].operate[1]);this.returnSetRUle(this.ruleId[t],2,5,s,e,this.sysTagDetailType[t])}else if(3==this.sysTagDetailType[t]){var i=void 0,n=void 0;"介于"==this.sysTagData[t].numberType?(n=5,i=this.sysTagData[t].numberOfTimes1+";"+this.sysTagData[t].numberOfTimes2):"大于"==this.sysTagData[t].numberType?(n=4,i=this.sysTagData[t].numberOfTimes1):"小于"==this.sysTagData[t].numberType&&(n=3,i=this.sysTagData[t].numberOfTimes1),this.returnSetRUle(this.ruleId[t],3,n,i,e,this.sysTagDetailType[t])}},onSaveDeleate:function(){var e;for(var t in this.deleateData)if(e=this.deleateData[t].tag._id,1==this.deleateDetailType[t]){var a=void 0;a=this.deleateData[t].value.join(";"),this.returnSetRUle(this.deleateRuleId[t],1,2,a,e,this.deleateDetailType[t])}else if(2==this.deleateDetailType[t]){var s=this.dateFomate(this.deleateData[t].operate[0])+";"+this.dateFomate(this.deleateData[t].operate[1]);this.returnSetRUle(this.deleateRuleId[t],2,5,s,e,this.deleateDetailType[t])}else if(3==this.deleateDetailType[t]){var i=void 0,n=void 0;"介于"==this.deleateData[t].numberType?(n=5,i=this.deleateData[t].numberOfTimes1+";"+this.deleateData[t].numberOfTimes2):"大于"==this.deleateData[t].numberType?(n=4,i=this.deleateData[t].numberOfTimes1):"小于"==this.deleateData[t].numberType&&(n=3,i=this.deleateData[t].numberOfTimes1),this.returnSetRUle(this.deleateRuleId[t],3,n,i,e,this.deleateDetailType[t])}},dateFomate:function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()},returnSetRUle:function(e,t,a,s,n,r){(0,i.setUserPackageRule)({ruleid:e,datatype:t,rulecond:a,ruleval:s,systagid:n,ruletype:r}).then(function(e){alert(e.data.info)})},onRemoveCoalescing:function(){this.sysTagData=[],this.isCoalesCing=!1,this.addIcon1=!0,this.mergeClick=!0},removeRowCoales:function(e){this.sysTagData.length>1&&this.sysTagData.splice(e,1)},onRemoveRuleOut:function(){this.deleateClick=!0,this.deleateData=[],this.isRuleOut=!1,this.addIcon2=!0},removeRowOut:function(e){this.deleateData.length>1&&this.deleateData.splice(e,1)}}},e.exports=t.default}.apply(t,s))&&(e.exports=i)},869:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"setting-addLling",staticStyle:{width:"850px",margin:"0 auto"}},[a("div",[a("p",{staticClass:"tracking-clues-information"},[e._v("基本信息")]),e._v(" "),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,"label-width":"90px"}},[a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"用户包名称"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.ruleForm.name,callback:function(t){e.ruleForm.name=t},expression:"ruleForm.name"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容"},model:{value:e.ruleForm.describe,callback:function(t){e.ruleForm.describe=t},expression:"ruleForm.describe"}})],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-bottom":"20px"}},[a("el-button",{staticStyle:{width:"75px"},attrs:{disabled:!e.saveClick,size:"small",type:"primary"},on:{click:e.returnAddCustomerTag}},[e._v("保存")])],1)],1),e._v(" "),a("div",[a("p",{staticClass:"tracking-clues-information"},[e._v("筛选用户")]),e._v(" "),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[a("el-row",[a("el-form-item",{attrs:{label:"要包含的用户"}},[a("el-row",[a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:!e.mergeClick},on:{click:e.onCoalescing}},[a("span",[e._v("合并组")]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.addIcon1,expression:"addIcon1"}],staticClass:"el-icon-plus"})])],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isCoalesCing,expression:"isCoalesCing"}],staticStyle:{margin:"20px 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.sysTagData,border:""}},[a("el-table-column",{attrs:{align:"center",label:"标签库"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",size:"small","value-key":"tag_name",placeholder:"请选择标签"},on:{"visible-change":e.rowVisible,change:function(a){e.addUserPackageRule(t.$index,e.sysTagData)}},model:{value:t.row.tag,callback:function(e){t.row.tag=e},expression:"scope.row.tag"}},e._l(e.sysTags,function(e,t){return a("el-option",{attrs:{disabled:e.disabled,label:e.tag_name,value:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"已选标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.sysTagDetailType[t.$index]?a("Tree",{attrs:{index:t.$index,onCheck:e.createTree,width:"100%",data:e.sysTagDetailData[t.$index]||[],value:t.row.value,placeholder:"请选择"}}):e._e(),e._v(" "),2==e.sysTagDetailType[t.$index]?a("el-date-picker",{attrs:{type:"daterange",align:"center","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:t.row.operate,callback:function(e){t.row.operate=e},expression:"scope.row.operate"}}):e._e(),e._v(" "),3==e.sysTagDetailType[t.$index]?a("span",[a("el-select",{staticStyle:{width:"40%"},attrs:{size:"small"},model:{value:t.row.numberType,callback:function(e){t.row.numberType=e},expression:"scope.row.numberType"}},e._l(e.NumberRules,function(e,t){return a("el-option",{attrs:{label:e.name,value:e.name}})})),e._v(" "),"大于"==t.row.numberType?a("span",[a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes1,callback:function(e){t.row.numberOfTimes1=e},expression:"scope.row.numberOfTimes1"}}),e._v("次\n                                          ")],1):"小于"==t.row.numberType?a("span",[a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes1,callback:function(e){t.row.numberOfTimes1=e},expression:"scope.row.numberOfTimes1"}}),e._v("次\n                                          ")],1):"介于"==t.row.numberType?a("span",[a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes1,callback:function(e){t.row.numberOfTimes1=e},expression:"scope.row.numberOfTimes1"}}),e._v("~"),a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes2,callback:function(e){t.row.numberOfTimes2=e},expression:"scope.row.numberOfTimes2"}}),e._v("次\n                                          ")],1):e._e()],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"newuser-add",attrs:{href:"javascript:void(0)"},on:{click:e.addClick}}),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.removeIcon1,expression:"removeIcon1"}],staticClass:"newuser-remove",attrs:{href:"javascript:void(0)"},on:{click:function(a){e.removeRowCoales(t.$index)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticStyle:{width:"75px"},attrs:{size:"small",type:"primary"},on:{click:e.onSaveCoalescing}},[e._v("保存")]),e._v(" "),a("el-button",{staticStyle:{width:"75px"},attrs:{size:"small"},on:{click:e.onRemoveCoalescing}},[e._v("删除")])],1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{attrs:{label:"要排除的用户"}},[a("el-row",[a("el-button",{staticStyle:{width:"100%"},attrs:{disabled:!e.deleateClick},on:{click:e.onRuleOut}},[a("span",[e._v("排除组")]),e._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:e.addIcon2,expression:"addIcon2"}],staticClass:"el-icon-plus"})])],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.isRuleOut,expression:"isRuleOut"}],staticStyle:{margin:"20px 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.deleateData,border:""}},[a("el-table-column",{attrs:{align:"center",label:"标签库"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",clearable:"",size:"small","value-key":"tag_name",placeholder:"请选择标签"},on:{"visible-change":e.deleateRowVisible,change:function(a){e.deleateUserPackageRule(t.$index,e.deleateData)}},model:{value:t.row.tag,callback:function(e){t.row.tag=e},expression:"scope.row.tag"}},e._l(e.deleateTags,function(e,t){return a("el-option",{attrs:{disabled:e.disabled,label:e.tag_name,value:e}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"已选标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.deleateDetailType[t.$index]?a("Tree",{attrs:{index:t.$index,onCheck:e.deleateCreateTree,width:"100%",data:e.deleateDetailData[t.$index]||[],value:t.row.value,placeholder:"请选择"}}):e._e(),e._v(" "),2==e.deleateDetailType[t.$index]?a("el-date-picker",{attrs:{type:"daterange",align:"center","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:t.row.operate,callback:function(e){t.row.operate=e},expression:"scope.row.operate"}}):e._e(),e._v(" "),3==e.deleateDetailType[t.$index]?a("span",[a("el-select",{staticStyle:{width:"40%"},attrs:{size:"small"},model:{value:t.row.numberType,callback:function(e){t.row.numberType=e},expression:"scope.row.numberType"}},e._l(e.deleateNumberRules,function(e,t){return a("el-option",{attrs:{label:e.name,value:e.name}})})),e._v(" "),"大于"==t.row.numberType?a("span",[a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes1,callback:function(e){t.row.numberOfTimes1=e},expression:"scope.row.numberOfTimes1"}}),e._v("次\n\t                                          ")],1):"小于"==t.row.numberType?a("span",[a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes1,callback:function(e){t.row.numberOfTimes1=e},expression:"scope.row.numberOfTimes1"}}),e._v("次\n\t                                          ")],1):"介于"==t.row.numberType?a("span",[a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes1,callback:function(e){t.row.numberOfTimes1=e},expression:"scope.row.numberOfTimes1"}}),e._v("~"),a("el-input",{staticStyle:{width:"25%",display:"inline-block"},attrs:{type:"small",placeholder:""},model:{value:t.row.numberOfTimes2,callback:function(e){t.row.numberOfTimes2=e},expression:"scope.row.numberOfTimes2"}}),e._v("次\n\t                                          ")],1):e._e()],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{staticClass:"newuser-add",attrs:{href:"javascript:void(0)"},on:{click:e.addRuleOut}}),e._v(" "),a("a",{directives:[{name:"show",rawName:"v-show",value:e.removeIcon2,expression:"removeIcon2"}],staticClass:"newuser-remove",attrs:{href:"javascript:void(0)"},on:{click:function(a){e.removeRowOut(t.$index)}}})]}}])})],1),e._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-button",{staticStyle:{width:"75px"},attrs:{size:"small",type:"primary"},on:{click:e.onSaveDeleate}},[e._v("保存")]),e._v(" "),a("el-button",{staticStyle:{width:"75px"},attrs:{size:"small"},on:{click:e.onRemoveRuleOut}},[e._v("删除")])],1)],1)],1)],1)],1)],1)],1)])},staticRenderFns:[]},e.exports.render._withStripped=!0},951:function(e,t){},952:function(e,t){}});